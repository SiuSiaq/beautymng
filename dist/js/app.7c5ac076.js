(function(e){function t(t){for(var a,i,o=t[0],c=t[1],l=t[2],d=0,m=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(m.length)m.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},s=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0560":function(e,t,n){},"15da":function(e,t,n){"use strict";var a=n("6442"),r=n.n(a);r.a},4678:function(e,t,n){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=s,e.exports=r,r.id="4678"},"56d7":function(e,t,n){"use strict";n.r(t),n.d(t,"db",(function(){return Pa})),n.d(t,"auth",(function(){return Fa})),n.d(t,"storageRef",(function(){return Ha})),n.d(t,"increment",(function(){return Ua})),n.d(t,"decrement",(function(){return qa})),n.d(t,"uid",(function(){return Ya}));n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("Navbar"),n("v-alert",{attrs:{transition:"slide-y-transition",dense:"",type:e.getAlert.success?"success":"error",rounded:"0"},model:{value:e.getAlert.show,callback:function(t){e.$set(e.getAlert,"show",t)},expression:"getAlert.show"}},[e._v(" "+e._s(e.getAlert.text)+" ")]),n("v-main",[n("router-view")],1)],1)},s=[],i=n("5530"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",[n("v-app-bar",{attrs:{flat:"",dark:"",color:"primary"}},[e.getIsLoggedIn?n("v-app-bar-nav-icon",{on:{click:function(t){e.draw=!e.draw}}}):e._e(),n("v-toolbar-title",{staticClass:"text-uppercase font-weight-bold white--text"},[e._v(" Beauty "),n("span",{staticClass:"font-weight-light"},[e._v("Mng")])]),n("v-spacer"),n("v-menu",{attrs:{transition:"slide-y-transition","close-on-content-click":"",bottom:"",left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",r,!1),a),[n("v-icon",[e._v("mdi-dots-vertical")])],1)]}}])},[n("v-list",[n("AddClientVisit")],1)],1)],1),n("v-navigation-drawer",{attrs:{color:"secondary",app:"",temporary:""},model:{value:e.draw,callback:function(t){e.draw=t},expression:"draw"}},[n("v-list",{attrs:{nav:""}},[n("v-list-item-group",[e._l(e.items,(function(t){return n("v-list-item",{key:t.text,attrs:{router:"",to:t.route}},[n("v-list-item-icon",[n("v-icon",{staticClass:"white--text"},[e._v(e._s(t.icon))])],1),n("v-list-item-content",[n("v-list-item-title",{staticClass:"white--text",domProps:{textContent:e._s(t.text)}})],1)],1)})),e.isAdmin?n("v-list-item",{attrs:{to:e.settings}},[n("v-list-item-icon",[n("v-icon",{staticClass:"white--text"},[e._v("mdi-cog")])],1),n("v-list-item-content",[n("v-list-item-title",{staticClass:"white--text"},[e._v("Ustawienia salonu")])],1)],1):e._e(),n("v-list-item",{on:{click:e.logOutClick}},[n("v-list-item-icon",[n("v-icon",{staticClass:"white--text"},[e._v("mdi-logout-variant")])],1),n("v-list-item-content",[n("v-list-item-title",{staticClass:"white--text"},[e._v("Wyloguj")])],1)],1)],2)],1)],1)],1)},c=[],l=(n("96cf"),n("1da1")),u=n("2f62"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-list-item",e._g(e._b({},"v-list-item",r,!1),a),[n("v-list-item-icon",[n("v-icon",[e._v("mdi-account-arrow-left")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Umów nowego klienta")])],1)],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[e._v("Umów nowego klienta na wizytę")]),n("v-stepper",{model:{value:e.el,callback:function(t){e.el=t},expression:"el"}},[n("v-stepper-header",[n("v-stepper-step",{attrs:{complete:e.el>1,step:"1"}},[e._v(" Dodaj klienta ")]),n("v-divider"),n("v-stepper-step",{attrs:{complete:e.el>2,step:"2"}},[e._v(" Umów wizytę ")]),n("v-divider")],1),n("v-stepper-items",[n("v-stepper-content",{attrs:{step:"1"}},[n("v-form",{ref:"clientForm",staticClass:"mx-5",model:{value:e.validClient,callback:function(t){e.validClient=t},expression:"validClient"}},[n("v-text-field",{staticClass:"mt-4",attrs:{counter:50,rules:e.nameRules,label:"Imię",required:""},model:{value:e.clientName,callback:function(t){e.clientName=t},expression:"clientName"}}),n("v-text-field",{attrs:{counter:50,rules:e.surnameRules,label:"Nazwisko",required:""},model:{value:e.clientSurname,callback:function(t){e.clientSurname=t},expression:"clientSurname"}}),n("v-text-field",{attrs:{rules:e.emailRules,label:"Email",required:""},model:{value:e.clientEmail,callback:function(t){e.clientEmail=t},expression:"clientEmail"}}),n("v-text-field",{attrs:{rules:e.phoneRules,label:"Telefon",required:""},model:{value:e.clientPhone,callback:function(t){e.clientPhone=t},expression:"clientPhone"}})],1),n("v-btn",{attrs:{color:"primary",loading:e.clientLoader},on:{click:e.clientClick}},[e._v("Dalej")])],1),n("v-stepper-content",{attrs:{step:"2"}},[n("v-form",{ref:"eventForm",staticClass:"mx-5",model:{value:e.validEvent,callback:function(t){e.validEvent=t},expression:"validEvent"}},[n("v-autocomplete",{staticClass:"mt-4",attrs:{"offset-y":"",items:e.getAllTreatments,"item-text":"name","item-value":"id",rules:[function(e){return!!e||"Zabieg jest wymagany"}],label:"Zabieg",required:""},on:{change:e.treatmentSelected},model:{value:e.selectedTreatmentId,callback:function(t){e.selectedTreatmentId=t},expression:"selectedTreatmentId"}}),n("v-autocomplete",{attrs:{"offset-y":"",items:e.getAllClients,"item-text":"fullname","item-value":"id",rules:[function(e){return!!e||"Klient jest wymagany"}],label:"Klient",required:""},on:{change:e.clientSelected},model:{value:e.selectedClientId,callback:function(t){e.selectedClientId=t},expression:"selectedClientId"}}),n("v-autocomplete",{attrs:{"offset-y":"",items:e.getSalon.users,"item-text":"fullname","item-value":"ref.id",rules:[function(e){return!!e||"Wykonawca jest wymagany"}],label:"Wykonawca zabiegu",required:""},on:{change:e.doctorSelected},model:{value:e.selectedDoctorId,callback:function(t){e.selectedDoctorId=t},expression:"selectedDoctorId"}}),n("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{required:"",label:"Data zabiegu","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.computedDateFormatted,callback:function(t){e.computedDateFormatted=t},expression:"computedDateFormatted"}},"v-text-field",r,!1),a))]}}]),model:{value:e.menu1,callback:function(t){e.menu1=t},expression:"menu1"}},[n("v-date-picker",{attrs:{"no-title":""},on:{input:function(t){e.menu1=!1}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-select",{attrs:{required:"",items:e.hours,label:"Godzina"},model:{value:e.timeHour,callback:function(t){e.timeHour=t},expression:"timeHour"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-select",{attrs:{items:e.minutes,label:"Minuty"},model:{value:e.timeMinute,callback:function(t){e.timeMinute=t},expression:"timeMinute"}})],1)],1)],1),n("v-btn",{attrs:{color:"primary",loading:e.eventLoader},on:{click:e.eventSubmit}},[e._v("Zapisz")])],1)],1)],1)],1)],1)},m=[],v=(n("99af"),n("7db0"),n("4160"),n("fb6a"),n("b0c0"),n("d3b7"),n("25f0"),n("159b"),{data:function(e){return{dialog:!1,el:1,clientLoader:!1,eventLoader:!1,validClient:!0,validEvent:!1,clientName:"",clientSurname:"",nameRules:[function(e){return!!e||"Imię jest wymagane"},function(e){return e&&e.length<=50||"Imię musi być krótsze niż 50 znaków"}],surnameRules:[function(e){return!!e||"Nazwisko jest wymagane"},function(e){return e&&e.length<=50||"Nazwisko musi być krótsze niż 50 znaków"}],clientEmail:"",emailRules:[function(e){return!!e||"Email jest wymagany"},function(e){return/.+@.+/.test(e)||"Nie poprawny email"}],clientPhone:"",phoneRules:[function(e){return!!e||"Numer telefonu jest wymagany"},function(e){return/^\d{9}$/.test(e)||"Niepoprawny numer telefonu"}],date:(new Date).toISOString().substr(0,10),dateFormatted:e.formatDate((new Date).toISOString().substr(0,10)),menu1:!1,selectedTreatmentId:null,selectedTreatment:null,selectedClientId:null,selectedClient:null,selectedDoctorId:null,selectedDoctor:null,selectedDate:null,doctor:null,hours:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],minutes:[0,5,10,15,20,25,30,35,40,45,50,55],timeHour:null,timeMinute:null}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["addClient","addEvent","fetchClients","fetchTreatments"])),{},{clientClick:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.clientForm.validate()){t.next=2;break}return t.abrupt("return");case 2:return n={name:e.clientName,surname:e.clientSurname,fullname:"".concat(e.clientName," ").concat(e.clientSurname),email:e.clientEmail,phone:e.clientPhone,registered:(new Date).toISOString().slice(0,10),visits:0,plannedcount:0,plannedvisits:[],pastvisits:[],color:e.getRandomColor()},e.clientLoader=!0,t.next=6,e.addClient(n);case 6:e.clientLoader=!1,e.el=2;case 8:case"end":return t.stop()}}),t)})))()},eventSubmit:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,a,r,s,i,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.eventForm.validate()&&e.timeHour){t.next=2;break}return t.abrupt("return");case 2:return e.timeMinute||(e.timeMinute=0),r=e.selectedTreatment,s=e.selectedClient,n=e.timeHour<10?"0".concat(e.timeHour):"".concat(e.timeHour),a=e.timeMinute<10?"0".concat(e.timeMinute):"".concat(e.timeMinute),i=new Date("".concat(e.computedDateFormatted," ").concat(n,":").concat(a)),o=new Date("".concat(e.computedDateFormatted," ").concat(n,":").concat(a)),o.setTime(i.getTime()+60*r.hours*60*1e3+60*r.minutes*1e3),c={name:r.name,time:60*r.hours+r.minutes,color:r.color,confirmed:!1,clientName:"".concat(s.name," ").concat(s.surname),clientPhone:s.phone,clientEmail:s.email,clientRef:e.getUserData.salon.ref.collection("clients").doc(s.id),treatmentRef:e.getUserData.salon.ref.collection("treatments").doc(r.id),start:"".concat(i.toISOString().slice(0,10)," ").concat(n,":").concat(a),end:"".concat(o.toISOString().slice(0,10)," ").concat(o.getHours(),":").concat(o.getMinutes()),startDate:i,endDate:o,doctor:e.selectedDoctor,doctorName:e.selectedDoctor.fullname,archived:!1,category:e.selectedDoctor.fullname,price:r.price,additionalTreatments:[]},e.eventLoader=!0,t.next=13,e.addEvent(c);case 13:e.eventLoader=!1,e.dialog=!1;case 15:case"end":return t.stop()}}),t)})))()},getRandomColor:function(){return"#"+Math.floor(16777215*Math.random()).toString(16)},treatmentSelected:function(){var e=this;this.selectedTreatment=this.getAllTreatments.find((function(t){return t.id===e.selectedTreatmentId}))},clientSelected:function(){var e=this;this.selectedClient=this.getAllClients.find((function(t){return t.id===e.selectedClientId}))},doctorSelected:function(){var e=this;this.selectedDoctor=this.getSalon.users.find((function(t){return t.ref.id===e.selectedDoctorId}))},formatDate:function(e){if(!e)return null;var t=e.slice(0,4),n=e.slice(5,7),a=e.slice(8,10);return"".concat(t,"-").concat(n,"-").concat(a)},doctors:function(){var e=[];return this.getSalon.users.forEach((function(t){t.doctor&&e.push("".concat(t.name," ").concat(t.surname))})),console.log(e),e}}),mounted:function(){this.fetchClients(),this.fetchTreatments()},computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])(["getAllClients","getAllTreatments","getUserData","getSalon"])),{},{computedDateFormatted:{get:function(){return this.formatDate(this.date)},set:function(e){this.date=e}}})}),f=v,p=n("2877"),h=n("6544"),b=n.n(h),g=n("c6a6"),w=n("8336"),x=n("b0af"),y=n("99d9"),k=n("62ad"),_=n("2e4b"),C=n("169a"),j=n("ce7e"),V=n("4bd4"),E=n("132d"),T=n("da13"),D=n("5d23"),z=n("34c3"),R=n("e449"),O=n("0fd9"),S=n("b974"),A=n("7e85"),I=n("e516"),N=n("9c54"),M=n("56a4"),L=n("8654"),$=Object(p["a"])(f,d,m,!1,null,null,null),P=$.exports;b()($,{VAutocomplete:g["a"],VBtn:w["a"],VCard:x["a"],VCardTitle:y["c"],VCol:k["a"],VDatePicker:_["a"],VDialog:C["a"],VDivider:j["a"],VForm:V["a"],VIcon:E["a"],VListItem:T["a"],VListItemContent:D["a"],VListItemIcon:z["a"],VListItemTitle:D["c"],VMenu:R["a"],VRow:O["a"],VSelect:S["a"],VStepper:A["a"],VStepperContent:I["a"],VStepperHeader:N["a"],VStepperItems:N["b"],VStepperStep:M["a"],VTextField:L["a"]});var F={components:{AddClientVisit:P},data:function(){return{draw:!1,settings:"/settings",items:[{icon:"mdi-view-dashboard",text:"Home",route:"/"},{icon:"mdi-calendar-text",text:"Kalendarz",route:"/calendar"},{icon:"mdi-seal",text:"Dzisiaj",route:"/today"},{icon:"mdi-bell-check",text:"Do potwierdzenia",route:"/confirms"},{icon:"mdi-account-box-multiple",text:"Klienci",route:"/clients"},{icon:"mdi-needle",text:"Zabiegi",route:"/treatments"},{icon:"mdi-finance",text:"Statystyki",route:"/statistics"}],options:[{icon:"mdi-account-arrow-left",text:"Umów nowego klienta"},{icon:"mdi-account",text:"Umów istniejącego klienta"}]}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["logOut"])),{},{logOutClick:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.logOut();case 2:e.$router.go("/login");case 3:case"end":return t.stop()}}),t)})))()}}),computed:Object(i["a"])({},Object(u["c"])(["getIsLoggedIn","isAdmin"]))},H=F,U=n("40dc"),q=n("5bc1"),Y=n("8860"),B=n("1baa"),Z=n("f774"),W=n("2fa4"),K=n("2a7f"),G=Object(p["a"])(H,o,c,!1,null,null,null),J=G.exports;b()(G,{VAppBar:U["a"],VAppBarNavIcon:q["a"],VBtn:w["a"],VIcon:E["a"],VList:Y["a"],VListItem:T["a"],VListItemContent:D["a"],VListItemGroup:B["a"],VListItemIcon:z["a"],VListItemTitle:D["c"],VMenu:R["a"],VNavigationDrawer:Z["a"],VSpacer:W["a"],VToolbarTitle:K["a"]});var Q={name:"App",components:{Navbar:J},methods:Object(i["a"])({},Object(u["b"])(["authStateChanged"])),computed:Object(u["c"])(["getAlert"]),created:function(){this.authStateChanged()}},X=Q,ee=n("0798"),te=n("7496"),ne=n("f6c4"),ae=Object(p["a"])(X,r,s,!1,null,null,null),re=ae.exports;b()(ae,{VAlert:ee["a"],VApp:te["a"],VMain:ne["a"]});n("45fc");var se=n("8c4f"),ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"px-0 mx-0 home",attrs:{fluid:""}},[n("v-card",{class:e.$vuetify.breakpoint.mobile?"homeCardMobile":"homeCard",attrs:{width:"80%",height:e.$vuetify.breakpoint.mobile?"auto":"400",elevation:"24",rounded:"xl"}},[n("v-card-title",{staticClass:"ml-3 grey--text text-h4"},[e._v("Salon")]),n("v-card-text",[n("v-row",[n("v-col",{attrs:{cols:"12",md:"6"}},[n("div",{staticClass:"ml-2 ml-md-5"},[n("div",{staticClass:"caption"},[e._v("Nazwa salonu")]),n("div",{staticClass:"black--text text-subtitle-1"},[e._v(e._s(e.getSalon.name))]),n("div",{staticClass:"caption mt-1"},[e._v("Właścicel/ka")]),n("div",{staticClass:"black--text text-subtitle-1"},[e._v(e._s(e.getSalon.leader.name)+" "+e._s(e.getSalon.leader.surname))]),n("div",{staticClass:"caption mt-1"},[e._v("Wykonanych zabiegów")]),n("div",{staticClass:"black--text text-subtitle-1"},[e._v(e._s(e.getSalon.visits))]),n("div",{staticClass:"caption mt-1"},[e._v("Termin wygaśnięcia subskrybcji")]),n("div",{staticClass:"black--text text-subtitle-1"},[e._v("20.04.2420")])])]),n("v-col",{attrs:{cols:"12",md:"6"}},[n("div",{staticClass:"caption ml-2"},[e._v("Pracownicy")]),n("v-list",[n("v-list-item-group",e._l(e.getSalon.users,(function(e,t){return n("User",{key:t,attrs:{user:e}})})),1)],1)],1)],1)],1)],1)],1)},oe=[],ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-list-item",e._g(e._b({},"v-list-item",r,!1),a),[n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(e.user.name)+" "+e._s(e.user.surname))])],1)],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[e._v(e._s(e.user.name)+" "+e._s(e.user.surname))]),n("v-card-text",[n("div",{staticClass:"caption"},[e._v("Imię i nazwisko")]),n("div",{staticClass:"text-subtitle-1 black--text"},[e._v(e._s(e.user.name)+" "+e._s(e.user.surname))]),e.user.doctor?n("div",[n("div",{staticClass:"caption"},[e._v("Wykonanych wizyt")]),n("div",{staticClass:"text-subtitle-1 black--text"},[e._v(e._s(e.user.visits))])]):n("div",[n("div",{staticClass:"caption"},[e._v("Rola")]),n("div",{staticClass:"text-subtitle-1 black--text"},[e._v("Menedżer")])])]),n("v-card-actions",[e.user.doctor?n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.roleClick}},[e._v("ustaw jako menadżera")]):n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.roleClick}},[e._v("ustaw jako doktora")]),n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:function(t){e.dialog=!1}}},[e._v("anuluj")])],1)],1)],1)},le=[],ue={data:function(){return{dialog:!1,loader:!1}},props:["user"],methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["setDoctor"])),{},{roleClick:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loader=!0,n={},n.doctor=!e.user.doctor,n.ref=e.user.ref,t.next=6,e.setDoctor(n);case 6:e.loader=!1,e.dialog=!1;case 8:case"end":return t.stop()}}),t)})))()}})},de=ue,me=Object(p["a"])(de,ce,le,!1,null,null,null),ve=me.exports;b()(me,{VBtn:w["a"],VCard:x["a"],VCardActions:y["a"],VCardText:y["b"],VCardTitle:y["c"],VDialog:C["a"],VListItem:T["a"],VListItemContent:D["a"],VListItemTitle:D["c"],VSpacer:W["a"]});var fe={data:function(){return{}},computed:Object(i["a"])({},Object(u["c"])(["getSalon"])),methods:Object(i["a"])({},Object(u["b"])(["fetchSalon"])),mounted:function(){this.fetchSalon},components:{User:ve}},pe=fe,he=(n("c2e0"),n("a523")),be=Object(p["a"])(pe,ie,oe,!1,null,"6fb41ca6",null),ge=be.exports;b()(be,{VCard:x["a"],VCardText:y["b"],VCardTitle:y["c"],VCol:k["a"],VContainer:he["a"],VList:Y["a"],VListItemGroup:B["a"],VRow:O["a"]});var we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"schedule"},[n("v-container",[n("Calendar"),n("AddEvent")],1)],1)},xe=[],ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{staticClass:"fill-height"},[n("v-col",[n("v-sheet",{attrs:{height:"64"}},[n("v-toolbar",{attrs:{flat:"",color:"white"}},[n("v-btn",{staticClass:"mr-4",attrs:{outlined:"",color:"grey darken-2"},on:{click:e.setToday}},[e._v("Dziś")]),n("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.prev}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-chevron-left")])],1),n("v-btn",{staticClass:"mr-4",attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.next}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-chevron-right")])],1),e.$refs.calendar?n("v-toolbar-title",[e._v(e._s(e.$refs.calendar.title))]):e._e(),n("v-spacer"),n("v-menu",{attrs:{bottom:"",right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{outlined:"",color:"grey darken-2"}},"v-btn",r,!1),a),[n("span",[e._v(e._s(e.typeToLabel[e.type]))]),n("v-icon",{attrs:{right:""}},[e._v("mdi-menu-down")])],1)]}}])},[n("v-list",[n("v-list-item",{on:{click:function(t){e.type="day"}}},[n("v-list-item-title",[e._v("Dzień")])],1),n("v-list-item",{on:{click:function(t){e.type="week"}}},[n("v-list-item-title",[e._v("Tydzień")])],1),n("v-list-item",{on:{click:function(t){e.type="month"}}},[n("v-list-item-title",[e._v("Miesiąc")])],1),n("v-list-item",{on:{click:function(t){e.type="4day"}}},[n("v-list-item-title",[e._v("4 Dni")])],1)],1)],1)],1)],1),n("v-sheet",{attrs:{height:"600"}},[n("v-calendar",{ref:"calendar",attrs:{color:"primary",weekdays:e.weekdays,events:e.getAllEvents,"event-color":e.getEventColor,type:e.type},on:{"click:event":e.showEvent,"click:more":e.viewDay,"click:date":e.viewDay},scopedSlots:e._u([{key:"day-body",fn:function(t){var a=t.date,r=t.week;return[n("div",{staticClass:"v-current-time",class:{first:a===r[0].date},style:{top:e.nowY}})]}}]),model:{value:e.focus,callback:function(t){e.focus=t},expression:"focus"}}),n("v-menu",{attrs:{"close-on-content-click":!1,activator:e.selectedElement,"offset-x":""},model:{value:e.selectedOpen,callback:function(t){e.selectedOpen=t},expression:"selectedOpen"}},[n("v-card",{attrs:{color:"grey lighten-4","max-width":"350",flat:""}},[n("v-toolbar",{attrs:{color:e.selectedEvent.color,dark:""}},[e.selectedEvent.archived?e._e():n("EditEvent",{on:{eventUpdated:function(t){e.selectedOpen=!1}}}),n("v-toolbar-title",[e._v(e._s(e.selectedEvent.name))])],1),n("v-expansion-panels",[n("v-expansion-panel",[n("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[n("v-icon",{attrs:{color:"primary"}},[e._v("mdi-account")])]},proxy:!0}])},[e._v(" Klient: "+e._s(e.selectedEvent.clientName)+" ")]),n("v-expansion-panel-content",[n("v-simple-table",[n("tbody",[n("tr",[n("td",[e._v("Imię")]),n("td",[e._v(e._s(e.selectedClient.name))])]),n("tr",[n("td",[e._v("Nazwisko")]),n("td",[e._v(e._s(e.selectedClient.surname))])]),n("tr",[n("td",[e._v("Telefon")]),n("td",[n("a",{attrs:{href:"tel:"+e.selectedClient.phone}},[e._v(e._s(e.selectedClient.phone))])])]),n("tr",[n("td",[e._v("Email")]),n("td",[n("a",{attrs:{href:"mailto:"+e.selectedClient.email}},[e._v(e._s(e.selectedClient.email))])])]),n("tr",[n("td",[e._v("Wizyt")]),n("td",[e._v(e._s(e.selectedClient.visits))])])])])],1)],1),n("v-expansion-panel",[n("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[n("v-icon",{attrs:{color:"primary"}},[e._v("mdi-needle")])]},proxy:!0}])},[e._v(" Zabieg: "+e._s(e.selectedTreatment.name)+" ")]),n("v-expansion-panel-content",[n("v-simple-table",[n("tbody",[n("tr",[n("td",[e._v("Zabieg")]),n("td",[e._v(e._s(e.selectedTreatment.name))])]),n("tr",[n("td",[e._v("Czas")]),n("td",[e._v(e._s(e.selectedTreatment.hours)+" godziny "+e._s(e.selectedTreatment.minutes)+" minuty")])]),n("tr",[n("td",[e._v("Cena")]),n("td",[e._v(e._s(e.selectedTreatment.price)+"zł")])]),n("tr",[n("td",[e._v("Wykonano")]),n("td",[e._v(e._s(e.selectedTreatment.visits))])])])])],1)],1),n("v-expansion-panel",[n("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[n("v-icon",{attrs:{color:"primary"}},[e._v("mdi-doctor")])]},proxy:!0}])},[e._v(" Wykonawca: "+e._s(e.selectedEvent.doctorName)+" ")])],1),n("v-expansion-panel",[n("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[n("v-icon",{attrs:{color:e.selectedEvent.confirmed?"success":"error"}},[e._v(e._s(e.selectedEvent.confirmed?"mdi-check":"mdi-close-circle"))])]},proxy:!0}])},[e._v(" Status:"),n("span",{staticClass:"ml-1",class:e.selectedEvent.confirmed?"success--text":"error--text"},[e._v(" "+e._s(e.selectedEvent.confirmed?"Potwierdzono":"Nie potwierdzono"))])])],1)],1),n("v-card-actions",[n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.selectedOpen=!1}}},[e._v("anuluj")]),e.selectedEvent.archived?e._e():n("v-btn",{attrs:{text:"",color:"primary",loading:e.deleteLoader},on:{click:e.deleteClick}},[e._v("usuń")])],1)],1)],1)],1)],1)],1)},ke=[],_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"max-width":"400"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",r,!1),a),[n("v-icon",[e._v("mdi-pencil")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline primary white--text"},[e._v(" Edytuj termin zabiegu "),n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:function(t){e.dialog=!1}}},[n("v-icon",{attrs:{color:"white"}},[e._v("mdi-close")])],1)],1),n("v-form",{ref:"form",staticClass:"mx-5",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("div",{staticClass:"caption mt-4"},[e._v("Poprzedni termin")]),n("div",{staticClass:"mb-5"},[e._v(e._s(e.getSelectedEvent.start))]),n("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{required:"",label:"Data zabiegu","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.computedDateFormatted,callback:function(t){e.computedDateFormatted=t},expression:"computedDateFormatted"}},"v-text-field",r,!1),a))]}}]),model:{value:e.menu1,callback:function(t){e.menu1=t},expression:"menu1"}},[n("v-date-picker",{attrs:{"no-title":""},on:{input:function(t){e.menu1=!1}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-select",{attrs:{required:"",items:e.hours,label:"Godzina"},model:{value:e.timeHour,callback:function(t){e.timeHour=t},expression:"timeHour"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-select",{attrs:{items:e.minutes,label:"Minuty"},model:{value:e.timeMinute,callback:function(t){e.timeMinute=t},expression:"timeMinute"}})],1)],1)],1),n("v-card-actions",[n("v-btn",{attrs:{text:""},on:{click:function(t){e.dialog=!1}}},[e._v("anuluj")]),n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:"",loading:e.loader,disabled:!e.valid},on:{click:e.submit}},[e._v("zapisz")])],1)],1)],1)},Ce=[],je={name:"AddEvent",data:function(e){return{date:(new Date).toISOString().substr(0,10),dateFormatted:e.formatDate((new Date).toISOString().substr(0,10)),menu1:!1,loader:!1,dialog:!1,valid:!0,selectedDate:null,hours:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],minutes:[0,10,15,20,30,40,45,50],timeHour:null,timeMinute:null}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["editEvent"])),{},{submit:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()&&e.timeHour){t.next=2;break}return t.abrupt("return");case 2:return e.timeMinute||(e.timeMinute=0),n=e.timeHour<10?"0".concat(e.timeHour):"".concat(e.timeHour),a=e.timeMinute<10?"0".concat(e.timeMinute):"".concat(e.timeMinute),r=new Date("".concat(e.computedDateFormatted," ").concat(n,":").concat(a)),s=new Date("".concat(e.computedDateFormatted," ").concat(n,":").concat(a)),s.setTime(r.getTime()+60*e.getSelectedEvent.time*1e3),e.getSelectedEvent.start="".concat(r.getFullYear(),"-").concat(r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1,"-").concat(r.getDate()<10?"0"+r.getDate():r.getDate()," ").concat(r.getHours()<10?"0"+r.getHours():r.getHours(),":").concat(r.getMinutes()<10?"0"+r.getMinutes():r.getMinutes()),e.getSelectedEvent.end="".concat(s.getFullYear(),"-").concat(s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1,"-").concat(s.getDate()<10?"0"+s.getDate():s.getDate()," ").concat(s.getHours()<10?"0"+s.getHours():s.getHours(),":").concat(s.getMinutes()<10?"0"+s.getMinutes():s.getMinutes()),e.loader=!0,t.next=13,e.editEvent(e.getSelectedEvent);case 13:e.loader=!1,e.dialog=!1,e.reset(),e.$emit("eventUpdated");case 17:case"end":return t.stop()}}),t)})))()},reset:function(){this.$refs.form.reset(),this.date=(new Date).toISOString().substr(0,10)},formatDate:function(e){if(!e)return null;var t=e.slice(0,4),n=e.slice(5,7),a=e.slice(8,10);return"".concat(t,"-").concat(n,"-").concat(a)}}),computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])(["getSelectedEvent"])),{},{computedDateFormatted:{get:function(){return this.formatDate(this.date)},set:function(e){this.date=e}}})},Ve=je,Ee=Object(p["a"])(Ve,_e,Ce,!1,null,null,null),Te=Ee.exports;b()(Ee,{VBtn:w["a"],VCard:x["a"],VCardActions:y["a"],VCardTitle:y["c"],VCol:k["a"],VDatePicker:_["a"],VDialog:C["a"],VForm:V["a"],VIcon:E["a"],VMenu:R["a"],VRow:O["a"],VSelect:S["a"],VSpacer:W["a"],VTextField:L["a"]});var De={components:{EditEvent:Te},data:function(){return{weekdays:[1,2,3,4,5,6,0],focus:"",type:"week",typeToLabel:{month:"Miesiąc",week:"Tydzień",day:"Dzień","4day":"4 Dni"},ready:!1,selectedEvent:{},selectedElement:null,selectedOpen:!1,selectedClient:{},selectedTreatment:{},deleteLoader:!1}},mounted:function(){this.fetchEvents(),this.$refs.calendar.checkChange(),this.ready=!0,this.scrollToTime(),this.updateTime()},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["fetchEvents","removeEvent","selectEvent"])),{},{viewDay:function(e){var t=e.date;this.focus=t,this.type="day"},getEventColor:function(e){return e.color},setToday:function(){this.focus=""},prev:function(){this.$refs.calendar.prev()},next:function(){this.$refs.calendar.next()},showEvent:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var a,r,s,i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.nativeEvent,r=e.event,s=function(){t.selectedEvent=r,t.selectedElement=a.target,setTimeout((function(){return t.selectedOpen=!0}),10)},t.selectedOpen?(t.selectedOpen=!1,setTimeout(s,10)):s(),a.stopPropagation(),t.selectEvent(r),n.next=7,t.selectedEvent.clientRef.get();case 7:return i=n.sent,t.selectedClient=i.data(),t.selectedClient.id=i.id,n.next=12,t.selectedEvent.treatmentRef.get();case 12:o=n.sent,t.selectedTreatment=o.data(),t.selectedTreatment.id=o.id;case 15:case"end":return n.stop()}}),n)})))()},deleteClick:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.deleteLoader=!0,t.next=3,e.removeEvent(e.selectedEvent,e.selectedClient,e.selectedTreatment);case 3:e.deleteLoader=!1,e.selectedOpen=!1;case 5:case"end":return t.stop()}}),t)})))()},getCurrentTime:function(){return this.cal?60*this.cal.times.now.hour+this.cal.times.now.minute:0},scrollToTime:function(){var e=this.getCurrentTime(),t=Math.max(0,e-e%30-30);this.cal.scrollToTime(t)},updateTime:function(){var e=this;setInterval((function(){return e.cal.updateTimes()}),6e4)}}),computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])(["getAllEvents"])),{},{cal:function(){return this.ready?this.$refs.calendar:null},nowY:function(){return this.cal?this.cal.timeToY(this.cal.times.now)+"px":"-10px"}})},ze=De,Re=(n("e611"),n("a4f6")),Oe=n("cd55"),Se=n("49e2"),Ae=n("c865"),Ie=n("0393"),Ne=n("8dd9"),Me=n("1f4f"),Le=n("71d9"),$e=Object(p["a"])(ze,ye,ke,!1,null,null,null),Pe=$e.exports;b()($e,{VBtn:w["a"],VCalendar:Re["a"],VCard:x["a"],VCardActions:y["a"],VCol:k["a"],VExpansionPanel:Oe["a"],VExpansionPanelContent:Se["a"],VExpansionPanelHeader:Ae["a"],VExpansionPanels:Ie["a"],VIcon:E["a"],VList:Y["a"],VListItem:T["a"],VListItemTitle:D["c"],VMenu:R["a"],VRow:O["a"],VSheet:Ne["a"],VSimpleTable:Me["a"],VSpacer:W["a"],VToolbar:Le["a"],VToolbarTitle:K["a"]});var Fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"max-width":"400"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{fixed:"",bottom:"",right:"",fab:"",color:"secondary"}},"v-btn",r,!1),a),[n("v-icon",{attrs:{large:""}},[e._v("mdi-plus-circle")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline primary white--text"},[e._v(" Nowy zabieg "),n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:function(t){e.dialog=!1}}},[n("v-icon",{attrs:{color:"white"}},[e._v("mdi-close")])],1)],1),n("v-form",{ref:"form",staticClass:"mx-5",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-autocomplete",{staticClass:"mt-4",attrs:{"offset-y":"",items:e.getAllTreatments,"item-text":"name","item-value":"id",rules:[function(e){return!!e||"Zabieg jest wymagany"}],label:"Zabieg",required:""},on:{change:e.treatmentSelected},model:{value:e.selectedTreatmentId,callback:function(t){e.selectedTreatmentId=t},expression:"selectedTreatmentId"}}),n("v-autocomplete",{attrs:{"offset-y":"",items:e.getAllClients,"item-text":"fullname","item-value":"id",rules:[function(e){return!!e||"Klient jest wymagany"}],label:"Klient",required:""},on:{change:e.clientSelected},model:{value:e.selectedClientId,callback:function(t){e.selectedClientId=t},expression:"selectedClientId"}}),n("v-autocomplete",{attrs:{"offset-y":"",items:e.getSalon.users,"item-text":"fullname","item-value":"ref.id",rules:[function(e){return!!e||"Wykonawca jest wymagany"}],label:"Wykonawca zabiegu",required:""},on:{change:e.doctorSelected},model:{value:e.selectedDoctorId,callback:function(t){e.selectedDoctorId=t},expression:"selectedDoctorId"}}),n("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{required:"",label:"Data zabiegu","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.computedDateFormatted,callback:function(t){e.computedDateFormatted=t},expression:"computedDateFormatted"}},"v-text-field",r,!1),a))]}}]),model:{value:e.menu1,callback:function(t){e.menu1=t},expression:"menu1"}},[n("v-date-picker",{attrs:{"no-title":""},on:{input:function(t){e.menu1=!1}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-select",{attrs:{required:"",items:e.hours,label:"Godzina"},model:{value:e.timeHour,callback:function(t){e.timeHour=t},expression:"timeHour"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-select",{attrs:{items:e.minutes,label:"Minuty"},model:{value:e.timeMinute,callback:function(t){e.timeMinute=t},expression:"timeMinute"}})],1)],1)],1),n("v-card-actions",[n("v-btn",{attrs:{text:""},on:{click:function(t){e.dialog=!1}}},[e._v("anuluj")]),n("v-btn",{attrs:{text:""},on:{click:e.reset}},[e._v("resetuj")]),n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:"",loading:e.loader,disabled:!e.valid},on:{click:e.submit}},[e._v("dodaj")])],1)],1)],1)},He=[],Ue={name:"AddEvent",data:function(e){return{date:(new Date).toISOString().substr(0,10),dateFormatted:e.formatDate((new Date).toISOString().substr(0,10)),menu1:!1,loader:!1,dialog:!1,valid:!0,selectedTreatmentId:null,selectedTreatment:null,selectedClientId:null,selectedClient:null,selectedDoctorId:null,selectedDoctor:null,selectedDate:null,doctor:null,hours:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],minutes:[0,5,10,15,20,25,30,35,40,45,50,55],timeHour:null,timeMinute:null}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["addEvent","fetchClients","fetchTreatments"])),{},{submit:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,a,r,s,i,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()&&e.timeHour){t.next=2;break}return t.abrupt("return");case 2:return e.timeMinute||(e.timeMinute=0),r=e.selectedTreatment,s=e.selectedClient,n=e.timeHour<10?"0".concat(e.timeHour):"".concat(e.timeHour),a=e.timeMinute<10?"0".concat(e.timeMinute):"".concat(e.timeMinute),i=new Date("".concat(e.computedDateFormatted," ").concat(n,":").concat(a)),o=new Date("".concat(e.computedDateFormatted," ").concat(n,":").concat(a)),o.setTime(i.getTime()+60*r.hours*60*1e3+60*r.minutes*1e3),c={name:r.name,time:60*r.hours+r.minutes,color:r.color,confirmed:!1,clientName:"".concat(s.name," ").concat(s.surname),clientPhone:s.phone,clientEmail:s.email,clientRef:e.getUserData.salon.ref.collection("clients").doc(s.id),treatmentRef:e.getUserData.salon.ref.collection("treatments").doc(r.id),start:"".concat(i.toISOString().slice(0,10)," ").concat(n,":").concat(a),end:"".concat(o.toISOString().slice(0,10)," ").concat(o.getHours(),":").concat(o.getMinutes()),startDate:i,endDate:o,doctor:e.selectedDoctor,doctorName:e.selectedDoctor.fullname,archived:!1,category:e.selectedDoctor.fullname,price:r.price,additionalTreatments:[]},e.loader=!0,t.next=13,e.addEvent(c);case 13:e.loader=!1,e.dialog=!1,e.reset();case 16:case"end":return t.stop()}}),t)})))()},reset:function(){this.$refs.form.reset(),this.date=(new Date).toISOString().substr(0,10)},treatmentSelected:function(){var e=this;this.selectedTreatment=this.getAllTreatments.find((function(t){return t.id===e.selectedTreatmentId}))},clientSelected:function(){var e=this;this.selectedClient=this.getAllClients.find((function(t){return t.id===e.selectedClientId}))},doctorSelected:function(){var e=this;this.selectedDoctor=this.getSalon.users.find((function(t){return t.ref.id===e.selectedDoctorId}))},formatDate:function(e){if(!e)return null;var t=e.slice(0,4),n=e.slice(5,7),a=e.slice(8,10);return"".concat(t,"-").concat(n,"-").concat(a)},doctors:function(){var e=[];return this.getSalon.users.forEach((function(t){t.doctor&&e.push("".concat(t.name," ").concat(t.surname))})),console.log(e),e}}),mounted:function(){this.fetchClients(),this.fetchTreatments()},computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])(["getAllClients","getAllTreatments","getUserData","getSalon"])),{},{computedDateFormatted:{get:function(){return this.formatDate(this.date)},set:function(e){this.date=e}}})},qe=Ue,Ye=Object(p["a"])(qe,Fe,He,!1,null,null,null),Be=Ye.exports;b()(Ye,{VAutocomplete:g["a"],VBtn:w["a"],VCard:x["a"],VCardActions:y["a"],VCardTitle:y["c"],VCol:k["a"],VDatePicker:_["a"],VDialog:C["a"],VForm:V["a"],VIcon:E["a"],VMenu:R["a"],VRow:O["a"],VSelect:S["a"],VSpacer:W["a"],VTextField:L["a"]});var Ze={name:"Schedule",components:{Calendar:Pe,AddEvent:Be}},We=Ze,Ke=Object(p["a"])(We,we,xe,!1,null,null,null),Ge=Ke.exports;b()(Ke,{VContainer:he["a"]});var Je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"test"},[n("v-container",{attrs:{fluid:""}},[n("AddClient",{on:{clientAdded:function(t){e.selectedClient=e.getAllClients[0]}}}),n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"12",md:"3"}},[n("v-card",{staticClass:"px-4 pt-2"},[n("v-autocomplete",{attrs:{"offset-y":"",items:e.getAllClients,"item-text":"fullname","item-value":"id",label:"Klient","prepend-icon":"mdi-account-search-outline"},on:{change:e.searchSelect},model:{value:e.searchClientId,callback:function(t){e.searchClientId=t},expression:"searchClientId"}}),e.$vuetify.breakpoint.mobile?e._e():n("v-list",{staticStyle:{height:"80vh","overflow-y":"scroll"},attrs:{"three-line":""}},[n("v-list-item-group",e._l(e.getAllClients,(function(t){return n("v-list-item",{key:t.id,on:{click:function(n){e.selectedClient=t}}},[n("v-list-item-avatar",{staticClass:"white--text",attrs:{color:t.color}},[e._v(e._s(t.name[0]))]),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t.fullname))]),n("v-list-item-subtitle",[e._v(e._s(t.phone)+" "),n("br"),e._v(" "+e._s(t.email))])],1)],1)})),1)],1)],1)],1),n("v-col",{attrs:{cols:"12",md:"9"}},[n("v-row",{staticClass:"pa-5"},[n("v-col",{attrs:{cols:"6"}},[n("div",{staticClass:"caption"},[e._v("Imię")]),n("div",[e._v(e._s(e.selectedClient.name))])]),n("v-col",{attrs:{cols:"6"}},[n("div",{staticClass:"caption"},[e._v("Nazwisko")]),n("div",[e._v(e._s(e.selectedClient.surname))])]),n("v-col",{attrs:{cols:"6"}},[n("div",{staticClass:"caption"},[e._v("Telefon")]),n("div",[e._v(e._s(e.selectedClient.phone))])]),n("v-col",{attrs:{cols:"12",sm:"6"}},[n("div",{staticClass:"caption"},[e._v("Email")]),n("div",[e._v(e._s(e.selectedClient.email))])]),n("v-col",{attrs:{cols:"12",sm:"6"}},[n("div",{staticClass:"caption"},[e._v("Zarejestrowany")]),n("div",[e._v(e._s(e.selectedClient.registered))])]),n("v-col",{attrs:{cols:"6"}},[n("div",{staticClass:"caption"},[e._v("Liczba wizyt")]),n("div",[e._v(e._s(e.selectedClient.visits))])]),n("v-col",{attrs:{cols:"6"}},[n("div",{staticClass:"caption"},[e._v("Zaplanowanych wizyt")]),n("div",[e._v(e._s(e.selectedClient.plannedcount))])]),n("v-col",{attrs:{cols:"12"}},[n("div",{staticClass:"caption"},[e._v("Zaplanowane wizyty")]),0===e.selectedClient.plannedcount||void 0===e.selectedClient.plannedcount?n("div",[e._v("Brak zaplanowanych wizyt")]):n("v-row",e._l(e.selectedClient.plannedvisits,(function(t){return n("v-col",{key:t.id,attrs:{cols:"12",md:"3"}},[n("v-card",[n("v-card-text",[t.confirmed?n("div",{staticClass:"success--text subtitle-1"},[e._v("Potwierdzono")]):n("div",{staticClass:"error--text subtitle-1"},[e._v("Nie potwierdzono")]),n("div",{staticClass:"text-h5 text--primary"},[e._v(e._s(t.start.slice(0,10))),n("br"),e._v(e._s(t.start.slice(10)))]),n("div",{staticClass:"text-h6 font-weight-regular"},[e._v(" "+e._s(t.name)+" "),n("br")])]),n("v-card-actions",{staticClass:"mt-n4"},[n("DeleteEvent",{attrs:{eventRef:t.eventRef},on:{eventRemoved:function(t){return e.eventDeleted(t)}}})],1)],1)],1)})),1)],1),n("v-col",{attrs:{cols:"12"}},[n("v-expansion-panels",{attrs:{focusable:""}},[n("v-expansion-panel",[n("v-expansion-panel-header",[e._v("Wizyty")]),n("v-expansion-panel-content",[n("v-list",[n("v-list-item-group",e._l(e.selectedClient.pastvisits,(function(e){return n("Visit",{key:e.id,attrs:{event:e}})})),1)],1)],1)],1)],1),n("div",{staticClass:"mt-4"},[void 0!==e.selectedClient.id?n("v-btn",{attrs:{text:"",color:"error"},on:{click:function(t){return e.deleteClient(e.selectedClient.id)}}},[e._v("Usuń")]):e._e(),void 0!==e.selectedClient.id?n("EditClient",{attrs:{client:e.selectedClient}}):e._e()],1)],1)],1)],1)],1)],1)],1)},Qe=[],Xe=(n("4de4"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"max-width":"400"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{fixed:"",bottom:"",right:"",fab:"",color:"secondary"}},"v-btn",r,!1),a),[n("v-icon",{attrs:{large:""}},[e._v("mdi-plus-circle")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline primary white--text"},[e._v(" Dodaj klienta "),n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:function(t){e.dialog=!1}}},[n("v-icon",{attrs:{color:"white"}},[e._v("mdi-close")])],1)],1),n("v-form",{ref:"form",staticClass:"mx-5",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{staticClass:"mt-4",attrs:{counter:50,rules:e.nameRules,label:"Imię",required:""},model:{value:e.clientName,callback:function(t){e.clientName=t},expression:"clientName"}}),n("v-text-field",{attrs:{counter:50,rules:e.surnameRules,label:"Nazwisko",required:""},model:{value:e.clientSurname,callback:function(t){e.clientSurname=t},expression:"clientSurname"}}),n("v-text-field",{attrs:{rules:e.emailRules,label:"Email",required:""},model:{value:e.clientEmail,callback:function(t){e.clientEmail=t},expression:"clientEmail"}}),n("v-text-field",{attrs:{rules:e.phoneRules,label:"Telefon",required:""},model:{value:e.clientPhone,callback:function(t){e.clientPhone=t},expression:"clientPhone"}})],1),n("v-card-actions",[n("v-btn",{attrs:{text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Anuluj")]),n("v-btn",{attrs:{text:""},on:{click:e.reset}},[e._v("resetuj")]),n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:"",loading:e.loader,disabled:!e.valid},on:{click:e.submit}},[e._v("Dodaj")])],1)],1)],1)}),et=[],tt={name:"AddClient",data:function(){return{timeError:!1,loader:!1,dialog:!1,valid:!0,clientName:"",clientSurname:"",nameRules:[function(e){return!!e||"Imię jest wymagane"},function(e){return e&&e.length<=50||"Imię musi być krótsze niż 50 znaków"}],surnameRules:[function(e){return!!e||"Nazwisko jest wymagane"},function(e){return e&&e.length<=50||"Nazwisko musi być krótsze niż 50 znaków"}],clientEmail:"",emailRules:[function(e){return!!e||"Email jest wymagany"},function(e){return/.+@.+/.test(e)||"Nie poprawny email"}],clientPhone:"",phoneRules:[function(e){return!!e||"Numer telefonu jest wymagany"},function(e){return/^\d{9}$/.test(e)||"Niepoprawny numer telefonu"}]}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["addClient","deleteClient"])),{},{getRandomColor:function(){return"#"+Math.floor(16777215*Math.random()).toString(16)},submit:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:return n={name:e.clientName,surname:e.clientSurname,fullname:"".concat(e.clientName," ").concat(e.clientSurname),email:e.clientEmail,phone:e.clientPhone,registered:(new Date).toISOString().slice(0,10),visits:0,plannedcount:0,plannedvisits:[],pastvisits:[],color:e.getRandomColor()},e.loader=!0,t.next=6,e.addClient(n);case 6:e.loader=!1,e.dialog=!1,e.reset(),e.$emit("clientAdded");case 10:case"end":return t.stop()}}),t)})))()},reset:function(){this.$refs.form.reset()}})},nt=tt,at=Object(p["a"])(nt,Xe,et,!1,null,null,null),rt=at.exports;b()(at,{VBtn:w["a"],VCard:x["a"],VCardActions:y["a"],VCardTitle:y["c"],VDialog:C["a"],VForm:V["a"],VIcon:E["a"],VSpacer:W["a"],VTextField:L["a"]});var st=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"max-width":"400"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{text:""}},"v-btn",r,!1),a),[e._v("Edytuj")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline primary white--text"},[e._v(" Edytuj klienta "),n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:function(t){e.dialog=!1}}},[n("v-icon",{attrs:{color:"white"}},[e._v("mdi-close")])],1)],1),n("v-form",{ref:"form",staticClass:"mx-5",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{staticClass:"mt-4",attrs:{counter:50,rules:e.nameRules,label:"Imię",required:""},model:{value:e.client.name,callback:function(t){e.$set(e.client,"name",t)},expression:"client.name"}}),n("v-text-field",{attrs:{counter:50,rules:e.surnameRules,label:"Nazwisko",required:""},model:{value:e.client.surname,callback:function(t){e.$set(e.client,"surname",t)},expression:"client.surname"}}),n("v-text-field",{attrs:{rules:e.emailRules,label:"Email",required:""},model:{value:e.client.email,callback:function(t){e.$set(e.client,"email",t)},expression:"client.email"}}),n("v-text-field",{attrs:{rules:e.phoneRules,label:"Telefon",required:""},model:{value:e.client.phone,callback:function(t){e.$set(e.client,"phone",t)},expression:"client.phone"}})],1),n("v-card-actions",[n("v-btn",{attrs:{text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Anuluj")]),n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:"",loading:e.loader,disabled:!e.valid},on:{click:e.submit}},[e._v("Zapisz")])],1)],1)],1)},it=[],ot={name:"EditClient",props:["client"],data:function(){return{addSuccess:!1,timeError:!1,loader:!1,dialog:!1,valid:!0,clientName:"",clientSurname:"",nameRules:[function(e){return!!e||"Imię jest wymagane"},function(e){return e&&e.length<=50||"Imię musi być krótsze niż 50 znaków"}],surnameRules:[function(e){return!!e||"Nazwisko jest wymagane"},function(e){return e&&e.length<=50||"Nazwisko musi być krótsze niż 50 znaków"}],clientEmail:"",emailRules:[function(e){return!!e||"Email jest wymagany"},function(e){return/.+@.+/.test(e)||"Nie poprawny email"}],clientPhone:"",phoneRules:[function(e){return!!e||"Numer telefonu jest wymagany"},function(e){return/^\d{9}$/.test(e)||"Niepoprawny numer telefonu"}]}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["updateClient"])),{},{submit:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:return e.loader=!0,n={id:e.client.id,name:e.client.name,surname:e.client.surname,email:e.client.email,phone:e.client.phone,registered:e.client.registered,plannedcount:e.client.plannedcount,plannedvisits:e.client.plannedvisits,pastvisits:e.client.pastvisits,visits:e.client.visits,color:e.client.color,fullname:"".concat(e.client.name," ").concat(e.client.surname)},t.next=6,e.updateClient(n);case 6:e.loader=!1,e.dialog=!1;case 8:case"end":return t.stop()}}),t)})))()}})},ct=ot,lt=Object(p["a"])(ct,st,it,!1,null,null,null),ut=lt.exports;b()(lt,{VBtn:w["a"],VCard:x["a"],VCardActions:y["a"],VCardTitle:y["c"],VDialog:C["a"],VForm:V["a"],VIcon:E["a"],VSpacer:W["a"],VTextField:L["a"]});var dt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-btn",{attrs:{text:"",loading:e.loader,color:"error"},on:{click:e.deleteClick}},[e._v("Usuń")])},mt=[],vt={name:"DeleteEvent",data:function(){return{loader:!1}},props:["eventRef"],methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["removeEvent"])),{},{deleteClick:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loader=!0,t.next=3,e.eventRef.get();case 3:return n=t.sent,a=n.data(),a.id=n.id,t.next=8,e.removeEvent(a,null,null);case 8:e.loader=!1,e.$emit("eventRemoved",a);case 10:case"end":return t.stop()}}),t)})))()}})},ft=vt,pt=Object(p["a"])(ft,dt,mt,!1,null,null,null),ht=pt.exports;b()(pt,{VBtn:w["a"]});var bt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{width:"800"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-list-item",e._g(e._b({},"v-list-item",r,!1),a),[n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(e.event.clientName))]),n("v-list-item-subtitle",[e._v(e._s(e.event.start))])],1)],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[e._v("Szczegóły zabiegu")]),n("v-card-text",{staticClass:"black--text"},[n("v-row",[n("v-col",{attrs:{cols:"12",md:"6"}},[n("div",{staticClass:"caption"},[e._v("Klient")]),n("div",{staticClass:"subtitle-1"},[e._v(e._s(e.event.clientName))])]),n("v-col",{attrs:{cols:"12",md:"6"}},[n("div",{staticClass:"caption mt-1"},[e._v("Zabieg")]),n("div",{staticClass:"subtitle-1"},[e._v(e._s(e.event.name))])]),n("v-col",{attrs:{cols:"12",md:"6"}},[n("div",{staticClass:"caption mt-1"},[e._v("Dodatkowe zabiegi")]),n("div",{staticClass:"subtitle-1"},[e._v(e._s(e.event.additionalTreatments.length>0?e.additionalTreatments:"Brak dodatkowych zabiegów"))])]),n("v-col",{attrs:{cols:"12",md:"6"}},[n("div",{staticClass:"caption mt-1"},[e._v("Wykonawca")]),n("div",{staticClass:"subtitle-1"},[e._v(e._s(e.event.doctor.fullname))])]),n("v-col",{attrs:{cols:"12",md:"6"}},[n("div",{staticClass:"caption mt-1"},[e._v("Termin")]),n("div",{staticClass:"subtitle-1"},[e._v(e._s(e.event.start))])]),n("v-col",{attrs:{cols:"12",md:"6"}},[n("div",{staticClass:"caption mt-1"},[e._v("Przychód")]),n("div",{staticClass:"subtitle-1"},[e._v(e._s(e.event.price)+" zł")])]),n("v-col",{attrs:{cols:"12",md:"6"}},[n("div",{staticClass:"caption mt-1"},[e._v("Ocena")]),n("div",{staticClass:"subtitle-1"},[e._v(e._s(e.event.rate)+"/5")])])],1),n("div",{staticClass:"caption mt-1"},[e._v("Zdjęcia")]),e.event.imageUrls.length>0?n("v-row",e._l(e.event.imageUrls,(function(e){return n("v-col",{key:e,attrs:{cols:"12",md:"4"}},[n("VisitImage",{attrs:{image:e}})],1)})),1):n("div",{staticClass:"subtitle-1"},[e._v("Brak zdjęć")])],1)],1)],1)},gt=[],wt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-img",e._g(e._b({attrs:{src:e.image}},"v-img",r,!1),a))]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-img",{attrs:{src:e.image}})],1)},xt=[],yt={data:function(){return{dialog:!1}},props:["image"]},kt=yt,_t=n("adda"),Ct=Object(p["a"])(kt,wt,xt,!1,null,null,null),jt=Ct.exports;b()(Ct,{VDialog:C["a"],VImg:_t["a"]});var Vt={props:["event"],components:{VisitImage:jt},data:function(){return{dialog:!1}},computed:{additionalTreatments:function(){var e="";return this.event.additionalTreatments.forEach((function(t){e+=t,e+=", "})),e}}},Et=Vt,Tt=Object(p["a"])(Et,bt,gt,!1,null,null,null),Dt=Tt.exports;b()(Tt,{VCard:x["a"],VCardText:y["b"],VCardTitle:y["c"],VCol:k["a"],VDialog:C["a"],VListItem:T["a"],VListItemContent:D["a"],VListItemSubtitle:D["b"],VListItemTitle:D["c"],VRow:O["a"]});var zt={name:"Clients",components:{AddClient:rt,EditClient:ut,DeleteEvent:ht,Visit:Dt},data:function(){return{selectedClient:{name:"",surname:"",phone:"",email:""},searchClientId:null,pastvisits:[],plannedvisits:[],visits:0,planvisits:0,deleteEventLoader:!1}},computed:Object(i["a"])({},Object(u["c"])(["getAllClients"])),methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["fetchClients","removeClient","removeEvent"])),{},{searchSelect:function(){var e=this;void 0!==this.searchClientId&&(this.selectedClient=this.getAllClients.find((function(t){return t.id===e.searchClientId})))},deleteClient:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.removeClient(e);case 2:t.getAllClients.length>0?t.selectedClient=t.getAllClients[0]:t.selectedClient=null;case 3:case"end":return n.stop()}}),n)})))()},eventDeleted:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.selectedClient.plannedvisits=t.selectedClient.plannedvisits.filter((function(t){return t.eventRef.id!==e.id})),t.selectedClient.plannedcount--;case 2:case"end":return n.stop()}}),n)})))()}}),mounted:function(){this.fetchClients()}},Rt=zt,Ot=n("8270"),St=Object(p["a"])(Rt,Je,Qe,!1,null,null,null),At=St.exports;b()(St,{VAutocomplete:g["a"],VBtn:w["a"],VCard:x["a"],VCardActions:y["a"],VCardText:y["b"],VCol:k["a"],VContainer:he["a"],VExpansionPanel:Oe["a"],VExpansionPanelContent:Se["a"],VExpansionPanelHeader:Ae["a"],VExpansionPanels:Ie["a"],VList:Y["a"],VListItem:T["a"],VListItemAvatar:Ot["a"],VListItemContent:D["a"],VListItemGroup:B["a"],VListItemSubtitle:D["b"],VListItemTitle:D["c"],VRow:O["a"]});var It=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"test"},[n("v-container",{attrs:{fluid:""}},[n("AddTreatment",{on:{treatmentAdded:function(t){e.selectedTreatment=e.getAllTreatments[0]}}}),n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"12",md:"3"}},[n("v-card",{staticClass:"px-4 pt-2"},[n("v-autocomplete",{attrs:{"offset-y":"",items:e.getAllTreatments,"item-text":"name","item-value":"id",label:"Zabieg","prepend-icon":"mdi-needle"},on:{change:e.searchSelect},model:{value:e.searchTreatmentId,callback:function(t){e.searchTreatmentId=t},expression:"searchTreatmentId"}}),e.$vuetify.breakpoint.mobile?e._e():n("v-list",{staticStyle:{height:"80vh","overflow-y":"scroll"}},[n("v-list-item-group",e._l(e.getAllTreatments,(function(t){return n("v-list-item",{key:t.id,on:{click:function(n){e.selectedTreatment=t}}},[n("v-list-item-avatar",{staticClass:"white--text",attrs:{color:t.color}},[e._v(e._s(t.name[0]))]),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t.name))])],1)],1)})),1)],1)],1)],1),n("v-col",{attrs:{cols:"12",md:"9"}},[n("v-row",{staticClass:"pa-5"},[n("v-col",{attrs:{cols:"6"}},[n("div",{staticClass:"caption"},[e._v("Nazwa zabiegu")]),n("div",[e._v(e._s(e.selectedTreatment.name))])]),n("v-col",{attrs:{cols:"6"}},[n("div",{staticClass:"caption"},[e._v("Czas zabiegu")]),n("div",[e._v(e._s(e.selectedTreatment.hours)+" godziny "+e._s(e.selectedTreatment.minutes)+" minuty")])]),n("v-col",{attrs:{cols:"6"}},[n("div",{staticClass:"caption"},[e._v("Cena")]),n("div",[e._v(e._s(e.selectedTreatment.price)+" zł")])]),n("v-col",{attrs:{cols:"6"}},[n("div",{staticClass:"caption"},[e._v("Wykonano")]),n("div",[e._v(e._s(e.selectedTreatment.visits))])]),n("v-col",{attrs:{cols:"6"}},[n("div",{staticClass:"caption"},[e._v("Zaplanowanych wizyt")]),n("div",[e._v(e._s(e.selectedTreatment.plannedcount))])]),n("v-col",{attrs:{cols:"12"}},[n("div",{staticClass:"caption"},[e._v("Opis")]),n("div",[e._v(e._s(""!==e.selectedTreatment.description?e.selectedTreatment.description:"Brak opisu"))])]),n("v-col",{attrs:{cols:"12"}},[n("div",{staticClass:"caption"},[e._v("Zaplanowane wizyty")]),0===e.selectedTreatment.plannedcount||void 0===e.selectedTreatment.plannedcount?n("div",[e._v("Brak zaplanowanych wizyt")]):n("v-row",e._l(e.selectedTreatment.plannedvisits,(function(t){return n("v-col",{key:t.start,attrs:{cols:"12",md:"3"}},[n("v-card",[n("v-card-text",[t.confirmed?n("div",{staticClass:"success--text subtitle-1"},[e._v("Potwierdzono")]):n("div",{staticClass:"error--text subtitle-1"},[e._v("Nie potwierdzono")]),n("div",{staticClass:"text-h5 text--primary"},[e._v(e._s(t.start.slice(0,10))),n("br"),e._v(e._s(t.start.slice(10)))]),n("div",{staticClass:"text-h6 font-weight-regular"},[e._v(" "+e._s(t.clientName)+" "),n("br")])]),n("v-card-actions",{staticClass:"mt-n4"},[n("DeleteEvent",{attrs:{eventRef:t.eventRef},on:{eventRemoved:function(t){return e.eventDeleted(t)}}})],1)],1)],1)})),1)],1),n("v-col",{attrs:{cols:"12"}},[n("v-expansion-panels",{attrs:{focusable:""}},[n("v-expansion-panel",[n("v-expansion-panel-header",[e._v("Wykonane zabiegi")]),n("v-expansion-panel-content",[n("v-list",[n("v-list-item-group",e._l(e.selectedTreatment.pastvisits,(function(e){return n("Visit",{key:e.id,attrs:{event:e}})})),1)],1)],1)],1)],1),n("div",{staticClass:"mt-4"},[void 0!==e.selectedTreatment.id?n("v-btn",{attrs:{text:"",color:"error"},on:{click:function(t){return e.deleteTreatment(e.selectedTreatment.id)}}},[e._v("Usuń")]):e._e(),void 0!==e.selectedTreatment.id?n("EditTreatment",{attrs:{treatment:e.selectedTreatment}}):e._e()],1)],1)],1)],1)],1)],1)],1)},Nt=[],Mt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"max-width":"400"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{fixed:"",bottom:"",right:"",fab:"",color:"secondary"}},"v-btn",r,!1),a),[n("v-icon",{attrs:{large:""}},[e._v("mdi-plus-circle")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline primary white--text"},[e._v(" Dodaj zabieg "),n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:function(t){e.dialog=!1}}},[n("v-icon",{attrs:{color:"white"}},[e._v("mdi-close")])],1)],1),n("v-form",{ref:"form",staticClass:"mx-5",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{staticClass:"mt-4",attrs:{counter:50,rules:e.nameRules,label:"Nazwa zabiegu",required:""},model:{value:e.treatname,callback:function(t){e.treatname=t},expression:"treatname"}}),n("h3",{staticClass:"caption mb-n3 mt-1"},[e._v("Czas zabiegu")]),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-select",{attrs:{items:e.hours,label:"Godziny"},model:{value:e.timeHour,callback:function(t){e.timeHour=t},expression:"timeHour"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-select",{attrs:{items:e.minutes,label:"Minuty"},model:{value:e.timeMinute,callback:function(t){e.timeMinute=t},expression:"timeMinute"}})],1)],1),n("v-text-field",{attrs:{rules:e.priceRules,label:"Cena zabiegu",type:"number",required:""},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}}),n("v-textarea",{attrs:{rows:"1","auto-grow":"",clearable:"",label:"Opis"},model:{value:e.treatmentDesc,callback:function(t){e.treatmentDesc=t},expression:"treatmentDesc"}}),n("div",{staticClass:"caption mb-2"},[e._v("Kolor")]),n("v-color-picker",{staticClass:"ml-5",attrs:{required:"","hide-inputs":""},model:{value:e.color,callback:function(t){e.color=t},expression:"color"}})],1),n("v-card-actions",[n("v-btn",{attrs:{text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Anuluj")]),n("v-btn",{attrs:{text:""},on:{click:e.reset}},[e._v("resetuj")]),n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:"",loading:e.loader,disabled:!e.valid},on:{click:e.submit}},[e._v("Dodaj")])],1)],1)],1)},Lt=[],$t={name:"AddTreatment",data:function(){return{treatmentDesc:"",loader:!1,dialog:!1,valid:!0,hours:[0,1,2,3,4,5,6],minutes:[0,5,10,15,20,30,45],color:"#D9486E",timeHour:null,timeMinute:null,treatname:"",nameRules:[function(e){return!!e||"Nazwa zabiegu jest wymagana"},function(e){return e&&e.length<=50||"Nazwa zabiegu musi być krótsza niż 50 znaków"}],price:null,priceRules:[function(e){return!!e||"Cena zabiegu jest wymagana"},function(e){return e>0||"Cena zabiegu musi być większa od 0"}]}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["addTreatment"])),{},{submit:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:if(!e.timeHour&&!e.timeMinute){t.next=15;break}return e.timeMinute||(e.timeMinute=0),e.timeHour||(e.timeHour=0),n={name:e.treatname,hours:e.timeHour,minutes:e.timeMinute,price:parseFloat(e.price),color:e.color,visits:0,plannedcount:0,pastvisits:[],plannedvisits:[],description:void 0!==e.treatmentDesc?e.treatmentDesc:""},e.loader=!0,t.next=9,e.addTreatment(n);case 9:e.loader=!1,e.dialog=!1,e.reset(),e.$emit("treatmentAdded"),t.next=17;break;case 15:return e.timeError=!0,t.abrupt("return");case 17:case"end":return t.stop()}}),t)})))()},reset:function(){this.$refs.form.reset()}})},Pt=$t,Ft=n("03a4"),Ht=n("a844"),Ut=Object(p["a"])(Pt,Mt,Lt,!1,null,null,null),qt=Ut.exports;b()(Ut,{VBtn:w["a"],VCard:x["a"],VCardActions:y["a"],VCardTitle:y["c"],VCol:k["a"],VColorPicker:Ft["a"],VDialog:C["a"],VForm:V["a"],VIcon:E["a"],VRow:O["a"],VSelect:S["a"],VSpacer:W["a"],VTextField:L["a"],VTextarea:Ht["a"]});var Yt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"max-width":"400"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{text:""}},"v-btn",r,!1),a),[e._v("Edytuj")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline primary white--text"},[e._v(" Edytuj zabieg "),n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:function(t){e.dialog=!1}}},[n("v-icon",{attrs:{color:"white"}},[e._v("mdi-close")])],1)],1),n("v-form",{ref:"form",staticClass:"mx-5",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{staticClass:"mt-4",attrs:{counter:50,rules:e.nameRules,label:"Nazwa zabiegu",required:""},model:{value:e.treatment.name,callback:function(t){e.$set(e.treatment,"name",t)},expression:"treatment.name"}}),n("h3",{staticClass:"caption mb-n3 mt-1"},[e._v("Czas zabiegu")]),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-select",{attrs:{items:e.hours,label:"Godziny"},model:{value:e.treatment.hours,callback:function(t){e.$set(e.treatment,"hours",t)},expression:"treatment.hours"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-select",{attrs:{items:e.minutes,label:"Minuty"},model:{value:e.treatment.minutes,callback:function(t){e.$set(e.treatment,"minutes",t)},expression:"treatment.minutes"}})],1)],1),n("v-text-field",{attrs:{rules:e.priceRules,label:"Cena zabiegu",type:"number",required:""},model:{value:e.treatment.price,callback:function(t){e.$set(e.treatment,"price",t)},expression:"treatment.price"}}),n("v-textarea",{attrs:{rows:"1","auto-grow":"",clearable:"",label:"Opis"},model:{value:e.treatment.description,callback:function(t){e.$set(e.treatment,"description",t)},expression:"treatment.description"}}),n("div",{staticClass:"caption mb-2"},[e._v("Kolor")]),n("v-color-picker",{staticClass:"ml-5",attrs:{required:"","hide-inputs":""},model:{value:e.treatment.color,callback:function(t){e.$set(e.treatment,"color",t)},expression:"treatment.color"}})],1),n("v-card-actions",[n("v-btn",{attrs:{text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Anuluj")]),n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:"",loading:e.loader,disabled:!e.valid},on:{click:e.submit}},[e._v("Zapisz")])],1)],1)],1)},Bt=[],Zt=(n("a4d3"),n("e01a"),{name:"EditTreatment",props:["treatment"],data:function(){return{addSuccess:!1,timeError:!1,loader:!1,dialog:!1,color:null,valid:!0,hours:[1,2,3,4,5,6],minutes:[0,5,10,15,20,30,45],timeHour:null,timeMinute:null,treatname:"",nameRules:[function(e){return!!e||"Nazwa zabiegu jest wymagana"},function(e){return e&&e.length<=50||"Nazwa zabiegu musi być krótsza niż 50 znaków"}],price:null,priceRules:[function(e){return!!e||"Cena zabiegu jest wymagana"},function(e){return e>0||"Cena zabiegu musi być większa od 0"}]}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["updateTreatment"])),{},{submit:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:if(!e.treatment.hours&&!e.treatment.minutes){t.next=12;break}return e.treatment.minutes||(e.treatment.minutes=0),e.treatment.hours||(e.treatment.hours=0),n={id:e.treatment.id,name:e.treatment.name,hours:e.treatment.hours,minutes:e.treatment.minutes,price:e.treatment.price,color:e.treatment.color,visits:e.treatment.visits,plannedvisits:e.treatment.plannedvisits,pastvisits:e.treatment.pastvisits,description:void 0!==e.treatment.description?e.treatment.description:""},e.loader=!0,t.next=9,e.updateTreatment(n);case 9:e.loader=!1,e.dialog=!1,e.reset();case 12:return t.abrupt("return");case 13:case"end":return t.stop()}}),t)})))()},reset:function(){this.$refs.form.reset()}})}),Wt=Zt,Kt=Object(p["a"])(Wt,Yt,Bt,!1,null,null,null),Gt=Kt.exports;b()(Kt,{VBtn:w["a"],VCard:x["a"],VCardActions:y["a"],VCardTitle:y["c"],VCol:k["a"],VColorPicker:Ft["a"],VDialog:C["a"],VForm:V["a"],VIcon:E["a"],VRow:O["a"],VSelect:S["a"],VSpacer:W["a"],VTextField:L["a"],VTextarea:Ht["a"]});var Jt={name:"Treatments",components:{AddTreatment:qt,EditTreatment:Gt,DeleteEvent:ht,Visit:Dt},data:function(){return{selectedTreatment:{name:"",color:"#ffffff",count:0,hours:0,minutes:0,price:0,plannedcount:0,pastvisits:[],plannedvisits:[]},searchTreatmentId:null}},computed:Object(i["a"])({},Object(u["c"])(["getAllTreatments"])),methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["fetchTreatments","removeTreatment"])),{},{getRandomColor:function(){return"#"+Math.floor(16777215*Math.random()).toString(16)},searchSelect:function(){var e=this;void 0!==this.searchTreatmentId&&(this.selectedTreatment=this.getAllTreatments.find((function(t){return t.id===e.searchTreatmentId})))},deleteTreatment:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.removeTreatment(e);case 2:t.getAllTreatments.length>0?t.selectedTreatment=t.getAllTreatments[1]:t.selectedTreatment=null;case 3:case"end":return n.stop()}}),n)})))()},eventDeleted:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.selectedTreatment.plannedvisits=t.selectedTreatment.plannedvisits.filter((function(t){return t.eventRef.id!==e.id})),t.selectedTreatment.plannedcount--;case 2:case"end":return n.stop()}}),n)})))()}}),mounted:function(){this.fetchTreatments()}},Qt=Jt,Xt=Object(p["a"])(Qt,It,Nt,!1,null,null,null),en=Xt.exports;b()(Xt,{VAutocomplete:g["a"],VBtn:w["a"],VCard:x["a"],VCardActions:y["a"],VCardText:y["b"],VCol:k["a"],VContainer:he["a"],VExpansionPanel:Oe["a"],VExpansionPanelContent:Se["a"],VExpansionPanelHeader:Ae["a"],VExpansionPanels:Ie["a"],VList:Y["a"],VListItem:T["a"],VListItemAvatar:Ot["a"],VListItemContent:D["a"],VListItemGroup:B["a"],VListItemTitle:D["c"],VRow:O["a"]});var tn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"today"},[n("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[n("v-sheet",{attrs:{height:"64"}},[n("v-toolbar",{attrs:{flat:"",color:"white"}},[n("v-btn",{staticClass:"mr-4",attrs:{outlined:"",color:"grey darken-2"},on:{click:e.setToday}},[e._v("Dzisiaj")]),n("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.prev}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-chevron-left")])],1),n("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.next}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-chevron-right")])],1),e.$refs.calendar?n("v-toolbar-title",[e._v(e._s(e.$refs.calendar.title))]):e._e(),n("v-spacer")],1)],1),n("v-sheet",{attrs:{height:"600"}},[n("v-calendar",{ref:"calendar",attrs:{color:"primary",type:"category","category-show-all":"",categories:e.categories,events:e.getAllEvents,"event-color":e.getEventColor},on:{"click:event":e.showEvent},scopedSlots:e._u([{key:"day-body",fn:function(t){var a=t.date,r=t.week;return[n("div",{staticClass:"v-current-time",class:{first:a===r[0].date},style:{top:e.nowY}})]}}]),model:{value:e.focus,callback:function(t){e.focus=t},expression:"focus"}}),n("v-menu",{attrs:{"close-on-content-click":!1,activator:e.selectedElement,"offset-x":""},model:{value:e.selectedOpen,callback:function(t){e.selectedOpen=t},expression:"selectedOpen"}},[n("v-card",{attrs:{color:"grey lighten-4","max-width":"350",flat:""}},[n("v-toolbar",{attrs:{color:e.selectedEvent.color,dark:""}},[n("v-toolbar-title",[e._v(e._s(e.selectedEvent.name))])],1),n("v-expansion-panels",[n("v-expansion-panel",[n("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[n("v-icon",{attrs:{color:"primary"}},[e._v("mdi-account")])]},proxy:!0}])},[e._v(" Klient: "+e._s(e.selectedEvent.clientName)+" ")]),n("v-expansion-panel-content",[n("v-simple-table",[n("tbody",[n("tr",[n("td",[e._v("Imię")]),n("td",[e._v(e._s(e.selectedClient.name))])]),n("tr",[n("td",[e._v("Nazwisko")]),n("td",[e._v(e._s(e.selectedClient.surname))])]),n("tr",[n("td",[e._v("Telefon")]),n("td",[n("a",{attrs:{href:"tel:"+e.selectedClient.phone}},[e._v(e._s(e.selectedClient.phone))])])]),n("tr",[n("td",[e._v("Email")]),n("td",[n("a",{attrs:{href:"mailto:"+e.selectedClient.email}},[e._v(e._s(e.selectedClient.email))])])]),n("tr",[n("td",[e._v("Wizyt")]),n("td",[e._v(e._s(e.selectedClient.visits))])])])])],1)],1),n("v-expansion-panel",[n("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[n("v-icon",{attrs:{color:"primary"}},[e._v("mdi-needle")])]},proxy:!0}])},[e._v(" Zabieg: "+e._s(e.selectedTreatment.name)+" ")]),n("v-expansion-panel-content",[n("v-simple-table",[n("tbody",[n("tr",[n("td",[e._v("Zabieg")]),n("td",[e._v(e._s(e.selectedTreatment.name))])]),n("tr",[n("td",[e._v("Czas")]),n("td",[e._v(e._s(e.selectedTreatment.hours)+" godziny "+e._s(e.selectedTreatment.minutes)+" minuty")])]),n("tr",[n("td",[e._v("Cena")]),n("td",[e._v(e._s(e.selectedTreatment.price)+"zł")])]),n("tr",[n("td",[e._v("Wykonano")]),n("td",[e._v(e._s(e.selectedTreatment.visits))])])])])],1)],1),n("v-expansion-panel",[n("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[n("v-icon",{attrs:{color:e.selectedEvent.confirmed?"success":"error"}},[e._v(e._s(e.selectedEvent.confirmed?"mdi-check":"mdi-close-circle"))])]},proxy:!0}])},[e._v(" Status:"),n("span",{staticClass:"ml-1",class:e.selectedEvent.confirmed?"success--text":"error--text"},[e._v(" "+e._s(e.selectedEvent.confirmed?"Potwierdzono":"Nie potwierdzono"))])])],1)],1),n("v-card-actions",[n("v-btn",{attrs:{text:"",color:"black"},on:{click:function(t){e.selectedOpen=!1}}},[e._v("anuluj")]),n("v-spacer"),e.selectedEvent.archived?e._e():n("EventSummary",{attrs:{event:e.selectedEvent},on:{archived:function(t){e.selectedOpen=!1}}})],1)],1)],1)],1)],1)],1)},nn=[],an=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{staticClass:"px-0",attrs:{width:"700"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{text:"",color:"primary"}},"v-btn",r,!1),a),[e._v("Podsumuj zabieg")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-stepper",{model:{value:e.el,callback:function(t){e.el=t},expression:"el"}},[n("v-stepper-header",[n("v-stepper-step",{attrs:{complete:e.el>1,step:"1"}},[e._v("Zakończ zabieg")]),n("v-divider"),n("v-stepper-step",{attrs:{complete:e.el>2,step:"2"}},[e._v("Ocena klientki")]),n("v-divider"),n("v-stepper-step",{attrs:{step:"3"}},[e._v("Dodaj zdjęcia")])],1),n("v-stepper-items",[n("v-stepper-content",{attrs:{step:"1"}},[n("v-card",{staticClass:"px-2"},[n("div",{staticClass:"caption"},[e._v("Klient")]),n("div",{staticClass:"text-subtitle-1"},[e._v(e._s(e.event.clientName))]),n("div",{staticClass:"caption"},[e._v("Zabieg")]),n("div",{staticClass:"text-subtitle-1"},[e._v(e._s(e.event.name))]),n("div",{staticClass:"caption"},[e._v("Dodatkowe zabiegi")]),n("v-autocomplete",{staticClass:"mt-2",attrs:{items:e.getAllTreatments,"item-text":"name","item-value":"id",dense:"",chips:"","small-chips":"",placeholder:"Zabiegi",multiple:""},model:{value:e.additionalTreatments,callback:function(t){e.additionalTreatments=t},expression:"additionalTreatments"}}),n("v-divider",{staticClass:"mt-2"}),n("div",{staticClass:"d-flex justify-center"},[n("v-btn",{staticClass:"mt-2",attrs:{text:"",large:"",color:"secondary"},on:{click:function(t){e.el=2}}},[e._v("Zakończ zabieg")])],1)],1)],1),n("v-stepper-content",{attrs:{step:"2"}},[n("v-card",[n("v-row",[n("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[n("v-rating",{attrs:{large:"","background-color":"secondary",color:"secondary"},model:{value:e.rating,callback:function(t){e.rating=t},expression:"rating"}})],1),n("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[n("v-btn",{attrs:{"x-large":"",color:"secondary",text:""},on:{click:function(t){e.el=3}}},[e._v("Dalej")])],1)],1)],1)],1),n("v-stepper-content",{attrs:{step:"3"}},[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-file-input",{attrs:{multiple:"","prepend-icon":"mdi-camera-burst",label:"Dodaj zdjęcia"},scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.text;return[n("v-chip",{attrs:{small:"",label:"",color:"primary"}},[e._v(e._s(a))])]}}]),model:{value:e.images,callback:function(t){e.images=t},expression:"images"}})],1),n("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[n("v-btn",{attrs:{"x-large":"",color:"secondary",loading:e.archiveLoader,text:""},on:{click:e.archiveClick}},[e._v("Zakończ")])],1)],1)],1)],1)],1)],1)},rn=[],sn={data:function(){return{el:1,dialog:!1,archiveLoader:!1,rating:0,images:[],additionalTreatments:[]}},props:["event"],methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["archiveEvent"])),{},{archiveClick:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.archiveLoader=!0,n=e.event,n.images=e.images,n.rate=0===e.rating?5:e.rating,n.additionalTreatments=[],e.additionalTreatments.forEach((function(t){var a=e.getAllTreatments.find((function(e){return e.id===t}));n.price+=a.price,n.additionalTreatments.push(a)})),n.archived=!0,t.next=8,e.archiveEvent(n);case 8:e.archiveLoader=!1,e.el=1,e.rating=0,e.dialog=!1,e.$emit("archived");case 13:case"end":return t.stop()}}),t)})))()}}),computed:Object(i["a"])({},Object(u["c"])(["getAllTreatments"]))},on=sn,cn=n("cc20"),ln=n("23a7"),un=n("1d4d"),dn=Object(p["a"])(on,an,rn,!1,null,null,null),mn=dn.exports;b()(dn,{VAutocomplete:g["a"],VBtn:w["a"],VCard:x["a"],VChip:cn["a"],VCol:k["a"],VDialog:C["a"],VDivider:j["a"],VFileInput:ln["a"],VRating:un["a"],VRow:O["a"],VStepper:A["a"],VStepperContent:I["a"],VStepperHeader:N["a"],VStepperItems:N["b"],VStepperStep:M["a"]});var vn={name:"Today",data:function(){return{focus:"",value:"",ready:!1,selectedEvent:{},selectedTreatment:{},selectedClient:{},selectedElement:null,selectedOpen:!1}},components:{EventSummary:mn},mounted:function(){this.getData(),this.ready=!0,this.scrollToTime(),this.updateTime()},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["fetchEvents","archiveEvent"])),{},{getData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchEvents();case 2:case"end":return t.stop()}}),t)})))()},getEventColor:function(e){return e.archived?"#969696":e.color},setToday:function(){this.focus=""},prev:function(){this.$refs.calendar.prev()},next:function(){this.$refs.calendar.next()},getCurrentTime:function(){return this.cal?60*this.cal.times.now.hour+this.cal.times.now.minute:0},scrollToTime:function(){var e=this.getCurrentTime(),t=Math.max(0,e-e%30-30);this.cal.scrollToTime(t)},updateTime:function(){var e=this;setInterval((function(){return e.cal.updateTimes()}),6e4)},showEvent:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var a,r,s,i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.nativeEvent,r=e.event,s=function(){t.selectedEvent=r,t.selectedElement=a.target,setTimeout((function(){return t.selectedOpen=!0}),10)},t.selectedOpen?(t.selectedOpen=!1,setTimeout(s,10)):s(),a.stopPropagation(),n.next=6,t.selectedEvent.clientRef.get();case 6:return i=n.sent,t.selectedClient=i.data(),t.selectedClient.id=i.id,n.next=11,t.selectedEvent.treatmentRef.get();case 11:o=n.sent,t.selectedTreatment=o.data(),t.selectedTreatment.id=o.id;case 14:case"end":return n.stop()}}),n)})))()}}),computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])(["getAllEvents","getSalon"])),{},{cal:function(){return this.ready?this.$refs.calendar:null},nowY:function(){return this.cal?this.cal.timeToY(this.cal.times.now)+"px":"-10px"},categories:function(){var e=[];return this.getSalon.users.forEach((function(t){t.doctor&&e.push("".concat(t.name," ").concat(t.surname))})),e}})},fn=vn,pn=(n("15da"),Object(p["a"])(fn,tn,nn,!1,null,null,null)),hn=pn.exports;b()(pn,{VBtn:w["a"],VCalendar:Re["a"],VCard:x["a"],VCardActions:y["a"],VContainer:he["a"],VExpansionPanel:Oe["a"],VExpansionPanelContent:Se["a"],VExpansionPanelHeader:Ae["a"],VExpansionPanels:Ie["a"],VIcon:E["a"],VMenu:R["a"],VSheet:Ne["a"],VSimpleTable:Me["a"],VSpacer:W["a"],VToolbar:Le["a"],VToolbarTitle:K["a"]});var bn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("v-row",e._l(e.days,(function(t){return n("v-col",{key:t.name,attrs:{cols:"12",md:"4"}},[n("v-card",{staticClass:"pb-4 px-3",class:t.list.length>0?"":"success"},[n("v-card-title",{staticClass:"text-h4",class:t.list.length>0?"grey--text":"white--text"},[e._v(e._s(t.name))]),t.list.length>0?n("v-list",{class:e.$vuetify.breakpoint.mobile?"":"desktop",attrs:{"three-line":""}},[n("v-list-item-group",e._l(t.list,(function(e){return n("ConfirmEventItem",{key:e.id,attrs:{event:e}})})),1)],1):n("div",{staticClass:"d-flex"},[n("v-icon",{staticClass:"fab mr-3",attrs:{size:e.$vuetify.breakpoint.mobile?30:50,color:"white"}},[e._v("mdi-check-circle")]),n("div",{staticClass:"mt-md-2 text-subtitle-1 font-weight-regular text-md-h5 white--text"},[e._v("Wszystkie zabiegi potwierdzone")])],1)],1)],1)})),1)],1)},gn=[],wn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[n("v-list-item",e._g(e._b({},"v-list-item",r,!1),a),[n("v-list-item-avatar",{staticClass:"white--text",attrs:{color:e.event.color}},[e._v(e._s(e.event.name[0]))]),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(e.event.name))]),n("v-list-item-subtitle",[e._v(" "+e._s(e.event.clientName)+" "),n("br"),e._v(" "+e._s(e.event.clientPhone)+" ")])],1),n("v-list-item-action",[n("div",{staticClass:"text-h4 font-weight-light mt-1"},[e._v(e._s(e.event.start.slice(11)))])])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",{staticClass:"px-5 pb-2"},[n("v-card-title",[e._v("Potwierdzanie wizyty")]),n("div",{staticClass:"caption"},[e._v("Telefon")]),n("div",[n("a",{attrs:{href:"tel:"+e.event.clientPhone}},[e._v(e._s(e.event.clientPhone))])]),n("div",{staticClass:"caption"},[e._v("Klient")]),n("div",[e._v(e._s(e.event.clientName))]),n("div",{staticClass:"caption"},[e._v("Termin")]),n("div",[e._v(e._s(e.event.start))]),n("div",{staticClass:"caption"},[e._v("Zabieg")]),n("div",[e._v(e._s(e.event.name))]),n("v-card-actions",[n("v-btn",{attrs:{text:""},on:{click:function(t){e.dialog=!1}}},[e._v("anuluj")]),n("v-spacer"),n("v-btn",{attrs:{color:"error",text:""}},[e._v("anuluj wizytę")]),n("v-btn",{attrs:{color:"success",text:"",loading:e.loader},on:{click:e.confirmClick}},[e._v("potwierdź")])],1)],1)],1)},xn=[],yn={data:function(){return{dialog:!1,loader:!1}},props:["event"],methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["confirmEvent"])),{},{confirmClick:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loader=!0,t.next=3,e.confirmEvent(e.event);case 3:e.loader=!1,e.dialog=!1;case 5:case"end":return t.stop()}}),t)})))()}})},kn=yn,_n=n("1800"),Cn=Object(p["a"])(kn,wn,xn,!1,null,null,null),jn=Cn.exports;b()(Cn,{VBtn:w["a"],VCard:x["a"],VCardActions:y["a"],VCardTitle:y["c"],VDialog:C["a"],VListItem:T["a"],VListItemAction:_n["a"],VListItemAvatar:Ot["a"],VListItemContent:D["a"],VListItemSubtitle:D["b"],VListItemTitle:D["c"],VSpacer:W["a"]});var Vn={data:function(){return{}},components:{ConfirmEventItem:jn},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["fetchEvents","tomorrowNotConfirmedEvents","todayNotConfirmedEvents","dayAfterNotConfirmedEvents"])),{},{getData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchEvents();case 2:e.tomorrowNotConfirmedEvents(),e.todayNotConfirmedEvents(),e.dayAfterNotConfirmedEvents();case 5:case"end":return t.stop()}}),t)})))()}}),computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])(["getTodayNotConfirmedEvents","getTomorrowNotConfirmedEvents","getDayAfterNotConfirmedEvents"])),{},{days:{get:function(){return[{name:"Dzisiaj",list:this.getTodayNotConfirmedEvents},{name:"Jutro",list:this.getTomorrowNotConfirmedEvents},{name:"Pojutrze",list:this.getDayAfterNotConfirmedEvents}]},set:function(){}}}),mounted:function(){this.getData()}},En=Vn,Tn=(n("a1ba"),Object(p["a"])(En,bn,gn,!1,null,"2975af1e",null)),Dn=Tn.exports;b()(Tn,{VCard:x["a"],VCardTitle:y["c"],VCol:k["a"],VContainer:he["a"],VIcon:E["a"],VList:Y["a"],VListItemGroup:B["a"],VRow:O["a"]});var zn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-card",{staticClass:"mt-15 mx-auto px-5",attrs:{"max-width":"500px"}},[n("v-card-title",{staticClass:"grey--text"},[e._v("Logowanie")]),n("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{rules:e.emailRules,label:"E-mail",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),n("v-text-field",{attrs:{"append-icon":e.show?"mdi-eye":"mdi-eye-off",rules:e.passwordRules,type:e.show?"text":"password",label:"Hasło",hint:"Conajmniej 6 znaków",counter:""},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),n("v-card-actions",[n("v-card-actions",[n("v-btn",{attrs:{text:""},on:{click:e.reset}},[e._v("resetuj")]),n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:"",loading:e.loader,disabled:!e.valid},on:{click:e.logInClick}},[e._v("zaloguj")])],1)],1)],1)],1)},Rn=[],On={data:function(){return{show:!1,loader:!1,valid:!0,email:"",emailRules:[function(e){return!!e||"E-mail jest wymagany"},function(e){return/.+@.+\..+/.test(e)||"E-mail musi być poprawny"}],password:"",passwordRules:[function(e){return!!e||"Hasło jest wymagane"},function(e){return e.length>=6||"Conajmniej 6 znaków"}]}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["logIn"])),{},{validate:function(){this.$refs.form.validate()},reset:function(){this.$refs.form.reset(),this.email="",this.password=""},resetValidation:function(){this.$refs.form.resetValidation()},logInClick:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:return e.loader=!0,n={email:e.email,password:e.password},t.next=6,e.logIn(n);case 6:e.loader=!1;case 7:case"end":return t.stop()}}),t)})))()}}),computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])(["getUser"])),{},{user:function(){return this.getUser}}),watch:{user:function(e){null!==e&&void 0!==e&&this.$router.push("/")}}},Sn=On,An=Object(p["a"])(Sn,zn,Rn,!1,null,null,null),In=An.exports;b()(An,{VBtn:w["a"],VCard:x["a"],VCardActions:y["a"],VCardTitle:y["c"],VContainer:he["a"],VForm:V["a"],VSpacer:W["a"],VTextField:L["a"]});var Nn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-card",{staticClass:"mt-5 mx-auto",attrs:{"max-width":"600px"}},[n("v-stepper",{model:{value:e.el,callback:function(t){e.el=t},expression:"el"}},[n("v-stepper-header",[n("v-stepper-step",{attrs:{complete:e.el>1,step:"1"}},[e._v("Rejestracja")]),n("v-divider"),n("v-stepper-step",{attrs:{complete:e.el>2,step:"2"}},[e._v("Wybierz salon")]),n("v-divider")],1),n("v-stepper-items",[n("v-stepper-content",{attrs:{step:"1"}},[n("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{rules:e.emailRules,label:"E-mail",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),n("v-text-field",{attrs:{"append-icon":e.show?"mdi-eye":"mdi-eye-off",rules:e.passwordRules,type:e.show?"text":"password",label:"Hasło",hint:"Conajmniej 6 znaków",counter:""},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("v-text-field",{attrs:{counter:50,rules:e.nameRules,label:"Imię",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("v-text-field",{attrs:{counter:50,rules:e.surnameRules,label:"Nazwisko",required:""},model:{value:e.surname,callback:function(t){e.surname=t},expression:"surname"}}),n("v-text-field",{attrs:{rules:e.phoneRules,label:"Telefon",required:""},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),n("div",{staticClass:"d-inline"},[n("v-btn",{attrs:{text:""},on:{click:e.reset}},[e._v("resetuj")]),n("v-btn",{attrs:{color:"primary",text:"",loading:e.loader,disabled:!e.valid},on:{click:e.register}},[e._v("zarejestruj")])],1)],1),n("v-stepper-content",{attrs:{step:"2"}},[n("v-row",[n("v-col",{attrs:{cols:"9"}},[n("v-text-field",{attrs:{placeholder:"ACFXYY",label:"Klucz salonu",rules:e.salon_keyRules},model:{value:e.salon_key,callback:function(t){e.salon_key=t},expression:"salon_key"}})],1),n("v-col",{attrs:{cols:"3"}},[n("v-btn",{staticClass:"mt-3",attrs:{color:"primary",loading:e.joinLoader},on:{click:function(t){return t.preventDefault(),e.joinSalonClick(t)}}},[e._v("Dołącz")])],1),n("v-col",{attrs:{cols:"12"}},[n("div",{staticClass:"text-h5 grey--text text-center"},[e._v("lub")])]),n("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[n("v-btn",{attrs:{color:"primary"}},[e._v("Stwórz swój salon")])],1)],1)],1)],1)],1)],1)],1)},Mn=[],Ln={data:function(){return{el:1,show:!1,loader:!1,joinLoader:!1,valid:!0,name:null,surname:null,phone:null,phoneRules:[function(e){return!!e||"Numer telefonu jest wymagany"},function(e){return/^\d{9}$/.test(e)||"Niepoprawny numer telefonu"}],nameRules:[function(e){return!!e||"Imię jest wymagane"},function(e){return e&&e.length<=50||"Imię musi być krótsze niż 50 znaków"}],surnameRules:[function(e){return!!e||"Nazwisko jest wymagane"},function(e){return e&&e.length<=50||"Nazwisko musi być krótsze niż 50 znaków"}],email:"",emailRules:[function(e){return!!e||"E-mail jest wymagany"},function(e){return/.+@.+\..+/.test(e)||"E-mail musi być poprawny"}],password:"",passwordRules:[function(e){return!!e||"Hasło jest wymagane"},function(e){return e.length>=6||"Conajmniej 6 znaków"}],salon_key:"",salon_keyRules:[function(e){return!!e||"Klucz salonu jest wymagany"},function(e){return 6===e.length||"Klucz musi składać się z 6 znaków"}]}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["registerUser","joinSalon"])),{},{validate:function(){this.$refs.form.validate()},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},register:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:return e.loader=!0,n={email:e.email,password:e.password,name:e.name,surname:e.surname,phone:e.phone},t.next=6,e.registerUser(n);case 6:e.loader=!1,e.el=2;case 8:case"end":return t.stop()}}),t)})))()},joinSalonClick:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.joinLoader=!0,t.next=3,e.joinSalon(e.salon_key);case 3:n=t.sent,e.joinLoader=!1,n&&e.$router.push("/");case 6:case"end":return t.stop()}}),t)})))()}})},$n=Ln,Pn=Object(p["a"])($n,Nn,Mn,!1,null,null,null),Fn=Pn.exports;b()(Pn,{VBtn:w["a"],VCard:x["a"],VCol:k["a"],VContainer:he["a"],VDivider:j["a"],VForm:V["a"],VRow:O["a"],VStepper:A["a"],VStepperContent:I["a"],VStepperHeader:N["a"],VStepperItems:N["b"],VStepperStep:M["a"],VTextField:L["a"]});var Hn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",{staticClass:"mt-4"},[n("v-col",{attrs:{cols:"12",md:"6"}},[n("div",{staticClass:"text-h4 grey--text mb-5"},[e._v("Ustawienia salonu")]),n("v-text-field",{attrs:{rules:e.nameRules,label:"Nazwa salonu",counter:50,required:"",disabled:e.disableName},model:{value:e.getSalon.name,callback:function(t){e.$set(e.getSalon,"name",t)},expression:"getSalon.name"}}),e.disableName?n("v-btn",{staticClass:"ml-n3 mt-n3",attrs:{text:""},on:{click:function(t){e.disableName=!1}}},[e._v("edytuj")]):n("v-btn",{staticClass:"ml-n3 mt-n3",attrs:{text:"",loading:e.loader},on:{click:e.saveClick}},[e._v("zapisz")])],1),n("v-col",{attrs:{cols:"12",md:"6"}},[n("div",{staticClass:"text-h4 grey--text"},[e._v("Pracownicy")]),n("v-list",[n("v-list-item-group",e._l(e.getSalon.users,(function(e,t){return n("User",{key:t,attrs:{user:e}})})),1)],1)],1)],1)],1)},Un=[],qn={data:function(){return{disableName:!0,loader:!1,nameRules:[function(e){return!!e||"Nazwa salonu jest wymagana"},function(e){return e.length<=50||"Nazwa musi być krótsza niż 50 znaków"}]}},computed:Object(i["a"])({},Object(u["c"])(["getSalon"])),components:{User:ve},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["setSalonName"])),{},{saveClick:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loader=!0,t.next=3,e.setSalonName(e.getSalon.name);case 3:e.loader=!1,e.disableName=!0;case 5:case"end":return t.stop()}}),t)})))()}})},Yn=qn,Bn=Object(p["a"])(Yn,Hn,Un,!1,null,null,null),Zn=Bn.exports;b()(Bn,{VBtn:w["a"],VCol:k["a"],VContainer:he["a"],VList:Y["a"],VListItemGroup:B["a"],VRow:O["a"],VTextField:L["a"]});var Wn,Kn,Gn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("div",{staticClass:"text-h4 grey--text mt-2 mb-5",domProps:{textContent:e._s(e.statsString)}}),n("v-sheet",{staticClass:"d-flex",attrs:{tile:"",height:"54"}},["Rok"!==e.type?n("v-btn",{staticClass:"ma-2",attrs:{icon:""}},[n("v-icon",[e._v("mdi-chevron-left")])],1):e._e(),n("v-select",{staticClass:"ma-2",attrs:{items:e.types,dense:"",outlined:"","hide-details":"",label:"Typ"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),"Rok"!==e.type?n("v-btn",{staticClass:"ma-2",attrs:{icon:""}},[n("v-icon",[e._v("mdi-chevron-right")])],1):e._e()],1),n("IncomeChart")],1)},Jn=[],Qn=(n("d81d"),n("ddb0"),n("1fca")),Xn={extends:Qn["a"],data:function(){return{currentMont:(new Date).getMonth(),labels:[],yearlyLabels:[],monthlyLabels:[],values:[],yearlyValues:[],monthlyValues:[],months:[{name:"Styczeń",days:[],value:0},{name:"Luty",days:[],value:0},{name:"Marzec",days:[],value:0},{name:"Kwiecień",days:[],value:0},{name:"Maj",days:[],value:0},{name:"Czerwiec",days:[],value:0},{name:"Lipiec",days:[],value:0},{name:"Sierpień",days:[],value:0},{name:"Wrzesień",days:[],value:0},{name:"Październik",days:[],value:0},{name:"Listopad",days:[],value:0},{name:"Grudzień",days:[],value:0}]}},methods:{getDaysInMonth:function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},setYearView:function(){this.labels=this.yearlyLabels,this.values=this.yearlyValues,this.loadChart()},setMonthView:function(e){this.labels=this.months[e].days.map((function(e){return e.name})),this.values=this.months[e].days.map((function(e){return e.value})),this.loadChart()},loadChart:function(){this.renderChart({labels:this.labels,datasets:[{backgroundColor:"#D9486E",label:"Przychody ",data:this.values}]},{responsive:!0,maintainAspectRatio:!1})}},computed:Object(u["c"])(["getAllEvents","getStatsType"]),mounted:function(){var e=this,t=new Date,n=0;this.months.forEach((function(a){e.yearlyLabels.push(a.name);for(var r=e.getDaysInMonth(new Date("".concat(t.getFullYear(),"-").concat(n+1,"-1"))),s=1;s<=r;s++)e.months[n].days.push({name:s<10?"0".concat(s):"".concat(s),value:0});n++})),this.getAllEvents.forEach((function(n){if(!n.startDate.getFullYear()!==t.getFullYear()){var a=n.startDate.getMonth(),r=n.startDate.getDate();e.months[a].value+=n.price,e.months[a].days[r-1].value+=n.price}})),this.yearlyValues=this.months.map((function(e){return e.value})),this.labels=this.yearlyLabels,this.values=this.yearlyValues,this.loadChart()},watch:{getStatsType:function(e){switch(e){case"Rok":this.setYearView();break;case"Miesiąc":this.setMonthView((new Date).getMonth());break;default:break}}}},ea=Xn,ta=Object(p["a"])(ea,Wn,Kn,!1,null,null,null),na=ta.exports,aa={components:{IncomeChart:na},data:function(){return{type:"Rok",types:["Rok","Miesiąc"],month:(new Date).getMonth(),monthNames:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"]}},methods:Object(i["a"])({},Object(u["b"])(["setStatsType"])),watch:{type:function(e){this.setStatsType(e)}},computed:{statsString:function(){return"Rok"===this.type?"Statystyki na rok ".concat((new Date).getFullYear()):"Statyski na ".concat(this.monthNames[this.month]," ").concat((new Date).getFullYear())}}},ra=aa,sa=Object(p["a"])(ra,Gn,Jn,!1,null,null,null),ia=sa.exports;b()(sa,{VBtn:w["a"],VContainer:he["a"],VIcon:E["a"],VSelect:S["a"],VSheet:Ne["a"]}),a["a"].use(se["a"]);var oa=[{path:"/",name:"Home",component:ge,meta:{requiresAuth:!0}},{path:"/calendar",name:"About",component:Ge,meta:{requiresAuth:!0}},{path:"/clients",name:"Clients",component:At,meta:{requiresAuth:!0}},{path:"/treatments",name:"Treatments",component:en,meta:{requiresAuth:!0}},{path:"/today",name:"today",component:hn,meta:{requiresAuth:!0}},{path:"/confirms",name:"confirms",component:Dn,meta:{requiresAuth:!0}},{path:"/settings",name:"settings",component:Zn,meta:{requiresAuth:!0}},{path:"/statistics",name:"statistics",component:ia,meta:{requiresAuth:!0}},{path:"/login",name:"login",component:In,meta:{requiresGuest:!0}},{path:"/register",name:"register",component:Fn,meta:{requiresGuest:!0}}],ca=new se["a"]({routes:oa});ca.beforeEach((function(e,t,n){e.matched.some((function(e){return e.meta.requiresAuth}))?Fa.currentUser?n():n({path:"/login",query:{redirect:e.fullPath}}):e.matched.some((function(e){return e.meta.requiresGuest}))&&Fa.currentUser?n({path:"/",query:{redirect:e.fullPath}}):n()}));var la=ca,ua={clients:[]},da={getAllClients:function(e){return e.clients}},ma={fetchClients:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.commit,a=e.dispatch,r=[],Ia.state.login.userData.salon.ref.collection("clients").get().then((function(e){e.forEach((function(e){var t=e.data();t.id=e.id,r.push(t)})),n("setClients",r)})).catch((function(e){console.error(e.error),a("showAlert",{text:"Nie udało się pobrać bazy danych klientów",success:!1})}));case 3:case"end":return t.stop()}}),t)})))()},addClient:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function n(){var a,r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,r=e.dispatch,n.prev=1,n.next=4,Ia.state.login.userData.salon.ref.collection("clients").add(t);case 4:s=n.sent,t.id=s.id,a("clientAdded",t),r("showAlert",{text:"Pomyślnie dodano klienta",success:!0}),n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](1),console.error(n.t0.error),r("showAlert",{text:"Nie udało się dodać klienta",success:!1});case 14:return n.abrupt("return");case 15:case"end":return n.stop()}}),n,null,[[1,10]])})))()},removeClient:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,r=e.dispatch,n.prev=1,n.next=4,Ia.state.login.userData.salon.ref.collection("clients").doc(t).delete();case 4:a("clientRemoved",t),r("showAlert",{text:"Pomyślnie usunięto klienta",success:!0}),n.next=12;break;case 8:n.prev=8,n.t0=n["catch"](1),console.error(n.t0),r("showAlert",{text:"Nie udało się usunąć klienta",success:!1});case 12:return n.abrupt("return");case 13:case"end":return n.stop()}}),n,null,[[1,8]])})))()},updateClient:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function n(){var a,r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,r=e.dispatch,n.prev=1,n.next=4,Ia.state.login.userData.salon.ref.collection("clients").doc(t.id).set(t);case 4:s=ua.clients.map((function(e){return e.id===t.id?t:e})),a("setClients",s),r("showAlert",{text:"Pomyślnie zaktualizowano klienta",success:!0}),n.next=13;break;case 9:n.prev=9,n.t0=n["catch"](1),console.error(n.t0),r("showAlert",{text:"Nie udało się zaktualizować klienta",success:!1});case 13:return n.abrupt("return");case 14:case"end":return n.stop()}}),n,null,[[1,9]])})))()}},va={setClients:function(e,t){return e.clients=t},clientAdded:function(e,t){return e.clients.unshift(t)},clientRemoved:function(e,t){return e.clients=e.clients.filter((function(e){return e.id!==t}))}},fa={state:ua,getters:da,actions:ma,mutations:va},pa={events:[],todayEvents:[],todayNotConfirmedEvents:[],tomorrowNotConfirmedEvents:[],dayAfterNotConfirmedEvents:[],tomorrowEvents:[],dayAfterEvents:[],selectedEvent:null,currentEvent:null,todayLeftEvents:[]},ha={getAllEvents:function(e){return e.events},getTodayEvents:function(e){return e.todayEvents},getTomorrowEvents:function(e){return e.todayEvents},getDayAfterEvents:function(e){return e.dayAfterEvents},getTomorrowNotConfirmedEvents:function(e){return e.tomorrowNotConfirmedEvents},getTodayNotConfirmedEvents:function(e){return e.todayNotConfirmedEvents},getDayAfterNotConfirmedEvents:function(e){return e.dayAfterNotConfirmedEvents},getSelectedEvent:function(e){return e.selectedEvent},getCurrentEvent:function(e){return e.currentEvent},getTodayLeftEvents:function(e){return e.todayLeftEvents}},ba={fetchEvents:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,a=e.dispatch,t.prev=1,r=[],t.next=5,Ia.state.login.userData.salon.ref.collection("events").get();case 5:return s=t.sent,s.forEach((function(e){var t=e.data();t.id=e.id,t.startDate=t.startDate.toDate(),t.endDate=t.endDate.toDate(),r.push(t)})),n("setEvents",r),t.abrupt("return");case 11:t.prev=11,t.t0=t["catch"](1),console.error(t.t0),a("showAlert",{text:"Nie udało się pobrać bazy danych wizyt",success:!1});case 15:case"end":return t.stop()}}),t,null,[[1,11]])})))()},todayEvents:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,a=new Date,r=pa.events.filter((function(e){var t=new Date(e.end);return t.getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()&&t.getDate()===a.getDate()})),r.sort((function(e,t){var n=new Date(e.start),a=new Date(t.start);return n-a})),n("setTodayEvents",r),t.abrupt("return");case 9:t.prev=9,t.t0=t["catch"](1),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},todayNotConfirmedEvents:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,a=new Date,r=pa.events.filter((function(e){var t=new Date(e.start);return t.getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()&&t.getDate()===a.getDate()&&!e.confirmed&&a<t})),r.sort((function(e,t){var n=new Date(e.start),a=new Date(t.start);return n-a})),n("setTodayNotConfirmedEvents",r),t.abrupt("return");case 9:t.prev=9,t.t0=t["catch"](1),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},todayLeftEvents:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,a=new Date,r=pa.events.filter((function(e){var t=new Date(e.start);return t.getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()&&t.getDate()===a.getDate()&&a<t})),r.sort((function(e,t){var n=new Date(e.start),a=new Date(t.start);return n-a})),n("setTodayLeftEvents",r),t.abrupt("return");case 9:t.prev=9,t.t0=t["catch"](1),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},tomorrowEvents:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,a=new Date,a.setTime(a.getTime()+864e5),r=pa.events.filter((function(e){var t=new Date(e.start);return t.getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()&&t.getDate()===a.getDate()})),r.sort((function(e,t){var n=new Date(e.start),a=new Date(t.start);return n-a})),n("setTomorrowEvents",r),t.abrupt("return");case 10:t.prev=10,t.t0=t["catch"](1),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},tomorrowNotConfirmedEvents:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,a=new Date,a.setTime(a.getTime()+864e5),r=pa.events.filter((function(e){var t=new Date(e.start);return t.getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()&&t.getDate()===a.getDate()&&!e.confirmed})),r.sort((function(e,t){var n=new Date(e.start),a=new Date(t.start);return n-a})),n("setTomorrowNotConfirmedEvents",r),t.abrupt("return");case 10:t.prev=10,t.t0=t["catch"](1),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},dayAfterNotConfirmedEvents:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,a=new Date,a.setTime(a.getTime()+1728e5),r=pa.events.filter((function(e){var t=new Date(e.start);return t.getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()&&t.getDate()===a.getDate()&&!e.confirmed})),r.sort((function(e,t){var n=new Date(e.start),a=new Date(t.start);return n-a})),n("setDayAfterNotConfirmedEvents",r),t.abrupt("return");case 10:t.prev=10,t.t0=t["catch"](1),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},dayAfterEvents:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,a=new Date,a.setTime(a.getTime()+1728e5),r=pa.events.filter((function(e){var t=new Date(e.start);return t.getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()&&t.getDate()===a.getDate()})),r.sort((function(e,t){var n=new Date(e.start),a=new Date(t.start);return n-a})),n("setDayAfterEvents",r),t.abrupt("return");case 10:t.prev=10,t.t0=t["catch"](1),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},addEvent:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function n(){var a,r,s,i,o,c,l,u,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,r=e.dispatch,n.prev=1,n.next=4,Ia.state.login.userData.salon.ref.collection("events").add(t);case 4:return s=n.sent,t.id=s.id,i={name:t.name,eventRef:Ia.state.login.userData.salon.ref.collection("events").doc(t.id),confirmed:!1,start:t.start,startDate:t.startDate,clientName:t.clientName,doctor:t.doctor},n.next=9,t.treatmentRef.get();case 9:return o=n.sent,c=o.data(),c.plannedvisits.push(i),n.next=14,t.clientRef.get();case 14:return l=n.sent,u=l.data(),u.plannedvisits.push(i),d=Pa.batch(),d.update(t.treatmentRef,{plannedcount:Ua,plannedvisits:c.plannedvisits}),d.update(t.clientRef,{plannedcount:Ua,plannedvisits:u.plannedvisits}),d.update(t.doctor.ref,{plannedcount:Ua}),n.next=23,d.commit();case 23:a("eventAdded",t),r("showAlert",{text:"Pomyślnie dodano wizytę",success:!0}),n.next=31;break;case 27:n.prev=27,n.t0=n["catch"](1),console.log("Batch failure:",n.t0),r("showAlert",{text:"Nie udało się dodać wizyty",success:!1});case 31:return n.abrupt("return");case 32:case"end":return n.stop()}}),n,null,[[1,27]])})))()},removeEvent:function(e,t,n,a){return Object(l["a"])(regeneratorRuntime.mark((function r(){var s,i,o,c,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(s=e.commit,i=e.dispatch,r.prev=1,o=Pa.batch(),null!==n&&void 0!==n){r.next=9;break}return r.next=6,t.clientRef.get();case 6:c=r.sent,n=c.data(),n.id=c.id;case 9:if(null!==a&&void 0!==a){r.next=15;break}return r.next=12,t.treatmentRef.get();case 12:l=r.sent,a=l.data(),a.id=l.id;case 15:return n.plannedvisits=n.plannedvisits.filter((function(e){return e.eventRef.id!==t.id})),a.plannedvisits=a.plannedvisits.filter((function(e){return e.eventRef.id!==t.id})),o.update(t.clientRef,{plannedvisits:n.plannedvisits,plannedcount:qa}),o.update(t.treatmentRef,{plannedvisits:a.plannedvisits,plannedcount:qa}),o.update(t.doctor.ref,{plannedcount:qa}),o.delete(Ia.state.login.userData.salon.ref.collection("events").doc(t.id)),r.next=23,o.commit();case 23:s("eventRemoved",t.id),i("showAlert",{text:"Pomyślnie usunięto wizytę",success:!0}),r.next=31;break;case 27:r.prev=27,r.t0=r["catch"](1),console.error(r.t0),i("showAlert",{text:"Nie udało się usunąć wizyty",success:!1});case 31:return r.abrupt("return");case 32:case"end":return r.stop()}}),r,null,[[1,27]])})))()},editEvent:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function n(){var a,r,s,i,o,c,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,r=e.dispatch,n.prev=1,s=Pa.batch(),n.next=5,t.clientRef.get();case 5:return i=n.sent,n.next=8,t.treatmentRef.get();case 8:return o=n.sent,c=i.data(),c.id=i.id,l=o.data(),l.id=o.id,c.plannedvisits=c.plannedvisits.map((function(e){return e.eventRef.id===t.id?{name:e.name,eventRef:e.eventRef,confirmed:e.confirmed,clientName:e.clientName,start:t.start,startDate:t.startDate,doctor:t.doctor}:e})),l.plannedvisits=l.plannedvisits.map((function(e){return e.eventRef.id===t.id?{name:e.name,eventRef:e.eventRef,confirmed:e.confirmed,clientName:e.clientName,start:t.start,startDate:t.startDate,doctor:t.doctor}:e})),s.update(t.clientRef,{plannedvisits:c.plannedvisits}),s.update(t.treatmentRef,{plannedvisits:l.plannedvisits}),s.update(Ia.state.login.userData.salon.ref.collection("events").doc(t.id),{start:t.start,end:t.end}),n.next=20,s.commit();case 20:a("eventUpdated",t),r("showAlert",{text:"Pomyślnie zaktualizowano wizytę",success:!0}),n.next=28;break;case 24:n.prev=24,n.t0=n["catch"](1),console.error(n.t0),r("showAlert",{text:"Nie udało się zaktualizować wizyty",success:!1});case 28:return n.abrupt("return");case 29:case"end":return n.stop()}}),n,null,[[1,24]])})))()},confirmEvent:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function n(){var a,r,s,i,o,c,l,u,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,r=e.dispatch,n.prev=1,s=Pa.batch(),n.next=5,t.clientRef.get();case 5:return i=n.sent,n.next=8,t.treatmentRef.get();case 8:return o=n.sent,c=i.data(),c.id=i.id,l=o.data(),l.id=o.id,c.plannedvisits.find((function(e){return e.start===t.start})).confirmed=!0,l.plannedvisits.find((function(e){return e.start===t.start})).confirmed=!0,s.update(Ia.state.login.userData.salon.ref.collection("events").doc(t.id),{confirmed:!0}),s.update(t.clientRef,{plannedvisits:c.plannedvisits}),s.update(t.treatmentRef,{plannedvisits:l.plannedvisits}),n.next=20,s.commit();case 20:if(u=new Date,d=new Date(t.start),u.getDate()!==d.getDate()){n.next=25;break}return a("eventTodayConfirmed",t.id),n.abrupt("return");case 25:u.setDate(u.getDate()+1),u.getDate()===d.getDate()?a("eventTomorrowConfirmed",t.id):a("eventDayAfterConfirmed",t.id),r("showAlert",{text:"Pomyślnie potwierdzono wizytę",success:!0}),n.next=34;break;case 30:n.prev=30,n.t0=n["catch"](1),console.error(n.t0),r("showAlert",{text:"Nie udało się potwierdzić wizyty",success:!1});case 34:return n.abrupt("return");case 35:case"end":return n.stop()}}),n,null,[[1,30]])})))()},archiveEvent:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function n(){var a,r,s,i,o,c,l,u,d,m,v,f,p,h,b;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,r=e.dispatch,n.prev=1,s=Pa.batch(),n.next=5,t.clientRef.get();case 5:return i=n.sent,n.next=8,t.treatmentRef.get();case 8:o=n.sent,c=i.data(),c.id=i.id,l=o.data(),l.id=o.id,u=Ia.state.login.userData.salon.ref.id,d=[],m=0;case 16:if(!(m<t.images.length)){n.next=28;break}return v=t.images[m],f=Ha.child("".concat(u,"/").concat(t.id,"/").concat(v.name)),n.next=21,f.put(v);case 21:return n.next=23,f.getDownloadURL();case 23:p=n.sent,d.push(p);case 25:m++,n.next=16;break;case 28:return t.imageUrls=d,delete t.images,h=c.plannedvisits.find((function(e){return e.eventRef.id===t.id})),h.imageUrls=d,h.rate=t.rate,h.price=t.price,h.additionalTreatments=t.additionalTreatments.map((function(e){return e.name})),c.plannedvisits=c.plannedvisits.filter((function(e){return e.eventRef.id!==t.id})),c.pastvisits.push(h),b=l.plannedvisits.find((function(e){return e.eventRef.id===t.id})),b.imageUrls=d,b.rate=t.rate,b.price=t.price,b.additionalTreatments=t.additionalTreatments.map((function(e){return e.name})),l.plannedvisits=l.plannedvisits.filter((function(e){return e.eventRef.id!==t.id})),l.pastvisits.push(b),s.update(Ia.state.login.userData.salon.ref.collection("events").doc(t.id),{archived:!0,additionalTreatments:t.additionalTreatments.map((function(e){return e.name})),price:t.price}),s.update(t.clientRef,{plannedvisits:c.plannedvisits,pastvisits:c.pastvisits,plannedcount:qa,visits:Ua}),s.update(t.treatmentRef,{plannedvisits:l.plannedvisits,pastvisits:l.pastvisits,plannedcount:qa,visits:Ua}),s.update(Ia.state.login.userData.salon.ref,{visits:Ua}),s.update(t.doctor.ref,{visits:Ua}),n.next=51,s.commit();case 51:a("eventUpdated",t),r("showAlert",{text:"Zakończono zabieg",success:!0}),r("fetchSalon"),n.next=60;break;case 56:n.prev=56,n.t0=n["catch"](1),console.error(n.t0),r("showAlert",{text:"Nie udało się zakończyć zabiegu",success:!1});case 60:return n.abrupt("return");case 61:case"end":return n.stop()}}),n,null,[[1,56]])})))()},selectEvent:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=e.commit,a("setSelectedEvent",t);case 2:case"end":return n.stop()}}),n)})))()}},ga={setEvents:function(e,t){return e.events=t},setTomorrowEvents:function(e,t){return e.tomorrowEvents=t},setTomorrowNotConfirmedEvents:function(e,t){return e.tomorrowNotConfirmedEvents=t},setDayAfterEvents:function(e,t){return e.dayAfterEvents=t},setTodayEvents:function(e,t){return e.todayEvents=t},setTodayNotConfirmedEvents:function(e,t){return e.todayNotConfirmedEvents=t},setDayAfterNotConfirmedEvents:function(e,t){return e.dayAfterNotConfirmedEvents=t},setTodayLeftEvents:function(e,t){return e.todayLeftEvents=t},setSelectedEvent:function(e,t){return e.selectedEvent=t},setCurrentEvent:function(e,t){return e.currentEvent=t},eventAdded:function(e,t){return e.events.unshift(t)},eventRemoved:function(e,t){return e.events=e.events.filter((function(e){return e.id!==t}))},eventUpdated:function(e,t){return e.events=e.events.map((function(e){return e.id===t.id?t:e}))},eventTodayConfirmed:function(e,t){return e.todayNotConfirmedEvents=e.todayNotConfirmedEvents.filter((function(e){return e.id!==t}))},eventTomorrowConfirmed:function(e,t){return e.tomorrowNotConfirmedEvents=e.tomorrowNotConfirmedEvents.filter((function(e){return e.id!==t}))},eventDayAfterConfirmed:function(e,t){return e.dayAfterNotConfirmedEvents=e.dayAfterNotConfirmedEvents.filter((function(e){return e.id!==t}))}},wa={state:pa,getters:ha,actions:ba,mutations:ga},xa={treatments:[]},ya={getAllTreatments:function(e){return e.treatments}},ka={fetchTreatments:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.commit,a=e.dispatch,r=[],Ia.state.login.userData.salon.ref.collection("treatments").get().then((function(e){e.forEach((function(e){var t=e.data();t.id=e.id,r.push(t)})),n("setTreatments",r)})).catch((function(e){console.error(e),a("showAlert",{text:"Nie udało się zaktualizować bazy danych zabiegów",success:!1})}));case 3:case"end":return t.stop()}}),t)})))()},addTreatment:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function n(){var a,r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,r=e.dispatch,n.prev=1,n.next=4,Ia.state.login.userData.salon.ref.collection("treatments").add(t);case 4:s=n.sent,t.id=s.id,a("treatmentAdded",t),r("showAlert",{text:"Pomyślnie dodano zabieg",success:!0}),n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](1),console.error(n.t0.error),r("showAlert",{text:"Nie udało się dodać zabiegu",success:!1});case 14:return n.abrupt("return");case 15:case"end":return n.stop()}}),n,null,[[1,10]])})))()},removeTreatment:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,r=e.dispatch,n.prev=1,n.next=4,Ia.state.login.userData.salon.ref.collection("treatments").doc(t).delete();case 4:a("treatmentRemoved",t),r("showAlert",{text:"Pomyślnie usunięto zabieg",success:!0}),n.next=12;break;case 8:n.prev=8,n.t0=n["catch"](1),console.error(n.t0.error),r("showAlert",{text:"Nie udało się dodać zabiegu",success:!1});case 12:return n.abrupt("return");case 13:case"end":return n.stop()}}),n,null,[[1,8]])})))()},updateTreatment:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function n(){var a,r,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,r=e.dispatch,n.prev=1,s=Ia.state.login.userData.salon.ref.collection("treatments").doc(t.id),delete t.id,n.next=6,s.set(t);case 6:i=xa.treatments.map((function(e){return e.id===t.id?t:e})),a("setTreatments",i),r("showAlert",{text:"Pomyślnie zaktualizowano zabieg",success:!0}),n.next=15;break;case 11:n.prev=11,n.t0=n["catch"](1),console.error(n.t0.error),r("showAlert",{text:"Nie udało się zaktualizować zabiegu",success:!1});case 15:return n.abrupt("return");case 16:case"end":return n.stop()}}),n,null,[[1,11]])})))()}},_a={setTreatments:function(e,t){return e.treatments=t},treatmentAdded:function(e,t){return e.treatments.unshift(t)},treatmentRemoved:function(e,t){return e.treatments=e.treatments.filter((function(e){return e.id!==t}))}},Ca={state:xa,getters:ya,actions:ka,mutations:_a},ja={isLoggedIn:!1,user:null,userData:null,alert:{show:!1,text:"",success:!0}},Va={getIsLoggedIn:function(e){return e.isLoggedIn},getUser:function(e){return e.user},getUserData:function(e){return e.userData},getAlert:function(e){return e.alert}},Ea={registerUser:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,n.prev=1,n.next=4,Fa.createUserWithEmailAndPassword(t.email,t.password);case 4:if(r=n.sent,!r){n.next=12;break}return a("setIsLoggedIn",!0),a("setUser",r.user),n.next=10,Pa.collection("users").doc(r.user.uid).set({email:t.email,name:t.name,surname:t.surname,phone:t.phone,doctor:!1,registered:(new Date).toISOString()});case 10:n.next=13;break;case 12:return n.abrupt("return",!1);case 13:n.next=19;break;case 15:return n.prev=15,n.t0=n["catch"](1),console.log(n.t0.code),n.abrupt("return",!1);case 19:return n.abrupt("return",!0);case 20:case"end":return n.stop()}}),n,null,[[1,15]])})))()},logIn:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function n(){var a,r,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,n.prev=1,n.next=4,Fa.signInWithEmailAndPassword(t.email,t.password);case 4:if(r=n.sent,!r){n.next=16;break}return a("setIsLoggedIn",!0),a("setUser",r),n.next=10,Pa.collection("users").doc(r.uid).get();case 10:s=n.sent,i=s.data(),i.id=s.id,a("setUserData",i),n.next=17;break;case 16:return n.abrupt("return",!1);case 17:n.next=23;break;case 19:return n.prev=19,n.t0=n["catch"](1),console.log(n.t0.code),n.abrupt("return",!1);case 23:return n.abrupt("return",!0);case 24:case"end":return n.stop()}}),n,null,[[1,19]])})))()},logOut:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,Fa.signOut();case 3:return n("setIsLoggedIn",!1),n("setUser",null),console.log("logged out"),t.abrupt("return");case 7:case"end":return t.stop()}}),t)})))()},joinSalon:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function n(){var a,r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,r=e.dispatch,n.next=3,Pa.collection("salons").where("key","==",t).get();case 3:if(s=n.sent,!s.empty){n.next=8;break}return console.log("Cannot find salon"),r("showAlert",{text:"Salon o podanym kluczu nie istnieje!",success:!1}),n.abrupt("return",!1);case 8:return s.forEach(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var n,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.data(),n.id=t.id,e.next=4,Pa.collection("users").doc(ja.user.uid).update({salon:{name:n.name,ref:Pa.collection("salons").doc(t.id)}});case 4:return e.next=6,Pa.collection("users").doc(ja.user.uid).get();case 6:return s=e.sent,i=s.data(),i.id=s.id,a("setUserData",i),e.next=12,Pa.runTransaction(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Pa.collection("salons").doc(n.id),e.next=3,t.get(a);case 3:r=e.sent,s=r.data().users,s.push({name:ja.userData.name,surname:ja.userData.surname,fullname:"".concat(i.name," ").concat(i.surname),id:ja.user.uid,doctor:!1,visits:0,ref:Pa.collection("users").doc(ja.user.uid)}),t.update(a,{users:s});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 12:r("fetchSalon");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.abrupt("return",!0);case 10:case"end":return n.stop()}}),n)})))()},showAlert:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=e.commit,t.show=!0,a("setAlert",t),setTimeout((function(){return a("hideAlert")}),3e3);case 4:case"end":return n.stop()}}),n)})))()},authStateChanged:function(e){var t=e.commit,n=e.dispatch;Fa.onAuthStateChanged(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(a){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=10;break}return t("setIsLoggedIn",!0),t("setUser",a),e.next=5,Pa.collection("users").doc(a.uid).get();case 5:r=e.sent,s=r.data(),void 0!==s&&(s.id=r.id,t("setUserData",s),n("fetchSalon")),e.next=11;break;case 10:console.log("User signed out");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},Ta={setIsLoggedIn:function(e,t){return e.isLoggedIn=t},setUser:function(e,t){return e.user=t},setUserData:function(e,t){return e.userData=t},setAlert:function(e,t){return e.alert=t},hideAlert:function(e){return e.alert.show=!1}},Da={state:ja,getters:Va,actions:Ea,mutations:Ta},za={salon:{name:"",leader:{name:"",surname:""}},admin:!1,statsType:"Rok"},Ra={getSalon:function(e){return e.salon},isAdmin:function(e){return e.admin},getStatsType:function(e){return e.statsType}},Oa={fetchSalon:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,Ia.state.login.userData.salon.ref.get();case 3:a=t.sent,r=a.data(),r.id=a.id,za.isAdmin||r.leader.ref.id===Ia.state.login.user.uid&&n("setAdmin",!0),n("setSalon",r);case 8:case"end":return t.stop()}}),t)})))()},setDoctor:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.dispatch,n.prev=1,n.next=4,t.ref.update({doctor:t.doctor});case 4:return r=Ia.state.salon.salon.users,r.forEach((function(e){e.ref.id===t.ref.id&&(e.doctor=t.doctor)})),n.next=8,Ia.state.login.userData.salon.ref.update({users:r});case 8:a("fetchSalon"),n.next=15;break;case 11:n.prev=11,n.t0=n["catch"](1),console.error(n.t0),a("showAlert",{text:"Nie udało się zaktualizować pracownika",success:!1});case 15:case"end":return n.stop()}}),n,null,[[1,11]])})))()},setSalonName:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function n(){var a,r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,r=e.dispatch,n.prev=1,n.next=4,Pa.collection("salons").doc(za.salon.id).update({name:t});case 4:s=za.salon,s.name=t,a("setSalon",s),r("showAlert",{text:"Pomyślnie zaktualizowano nazwę salonu",success:!0}),n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](1),console.error(n.t0),r("showAlert",{text:"Nie udało się zaktualizować nazwy salonu",success:!1});case 14:case"end":return n.stop()}}),n,null,[[1,10]])})))()},setStatsType:function(e,t){var n=e.commit;n("statsTypeSet",t)}},Sa={setSalon:function(e,t){return e.salon=t},setAdmin:function(e,t){return e.admin=t},statsTypeSet:function(e,t){return e.statsType=t}},Aa={state:za,getters:Ra,actions:Oa,mutations:Sa};a["a"].use(u["a"]);var Ia=new u["a"].Store({state:{},mutations:{},actions:{},modules:{clients:fa,events:wa,treatments:Ca,login:Da,salon:Aa}}),Na=n("f309");a["a"].use(Na["a"]);var Ma=new Na["a"]({theme:{themes:{light:{primary:"#D984A3",secondary:"#D9486E"}}}}),La=n("59ca"),$a=n.n(La);n("e71f"),n("ea7b"),n("588e");a["a"].config.productionTip=!1,$a.a.initializeApp({apiKey:"AIzaSyDZuwNnftQPQX4mcf-UwLIOjxE0HC88KYk",authDomain:"beutymng.firebaseapp.com",databaseURL:"https://beutymng.firebaseio.com",projectId:"beutymng",storageBucket:"beutymng.appspot.com",messagingSenderId:"728645110661",appId:"1:728645110661:web:226b79631083a9148a52ec",measurementId:"G-J7R1N5H844"});var Pa=$a.a.firestore(),Fa=$a.a.auth(),Ha=$a.a.storage().ref(),Ua=$a.a.firestore.FieldValue.increment(1),qa=$a.a.firestore.FieldValue.increment(-1),Ya=null;new a["a"]({router:la,store:Ia,vuetify:Ma,render:function(e){return e(re)}}).$mount("#app")},"606d":function(e,t,n){},6442:function(e,t,n){},"740b":function(e,t,n){},a1ba:function(e,t,n){"use strict";var a=n("606d"),r=n.n(a);r.a},c2e0:function(e,t,n){"use strict";var a=n("740b"),r=n.n(a);r.a},e611:function(e,t,n){"use strict";var a=n("0560"),r=n.n(a);r.a}});
//# sourceMappingURL=app.7c5ac076.js.map