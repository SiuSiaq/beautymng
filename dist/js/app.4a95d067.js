(function(e){function t(t){for(var n,i,o=t[0],c=t[1],l=t[2],d=0,m=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(m.length)m.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={app:0},s=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0560":function(e,t,a){},"15da":function(e,t,a){"use strict";var n=a("6442"),r=a.n(n);r.a},2492:function(e,t,a){},"3fef":function(e,t,a){},"44f4":function(e,t,a){},4678:function(e,t,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id="4678"},"46ab":function(e,t,a){"use strict";var n=a("44f4"),r=a.n(n);r.a},"56d7":function(e,t,a){"use strict";a.r(t),a.d(t,"db",(function(){return tr})),a.d(t,"auth",(function(){return ar})),a.d(t,"storageRef",(function(){return nr})),a.d(t,"increment",(function(){return rr})),a.d(t,"decrement",(function(){return sr})),a.d(t,"changeValue",(function(){return ir})),a.d(t,"uid",(function(){return or}));a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{staticClass:"app"},[a("Navbar"),a("v-alert",{attrs:{transition:"slide-y-transition",dense:"",type:e.getAlert.success?"success":"error",rounded:"0"},model:{value:e.getAlert.show,callback:function(t){e.$set(e.getAlert,"show",t)},expression:"getAlert.show"}},[e._v(" "+e._s(e.getAlert.text)+" ")]),a("v-main",[a("router-view")],1)],1)},s=[],i=a("5530"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",[a("v-app-bar",{attrs:{flat:"",dark:"",color:"primary",app:""}},[e.getIsLoggedIn?a("v-app-bar-nav-icon",{on:{click:function(t){e.draw=!e.draw}}}):e._e(),a("v-toolbar-title",{staticClass:"text-uppercase font-weight-bold white--text"},[e._v(" Beauty "),a("span",{staticClass:"font-weight-light"},[e._v("Mng")])]),a("v-spacer"),a("v-menu",{attrs:{transition:"slide-y-transition","close-on-content-click":"",bottom:"",left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-dots-vertical")])],1)]}}])},[a("v-list",[a("AddClientVisit")],1)],1)],1),a("v-navigation-drawer",{attrs:{color:"secondary",app:"",temporary:""},model:{value:e.draw,callback:function(t){e.draw=t},expression:"draw"}},[a("v-list",{attrs:{nav:""}},[a("v-list-item-group",[e._l(e.items,(function(t){return a("v-list-item",{key:t.text,attrs:{router:"",to:t.route}},[a("v-list-item-icon",[a("v-icon",{staticClass:"white--text"},[e._v(e._s(t.icon))])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:"white--text",domProps:{textContent:e._s(t.text)}})],1)],1)})),e.isAdmin?a("v-list-item",{attrs:{to:e.settings}},[a("v-list-item-icon",[a("v-icon",{staticClass:"white--text"},[e._v("mdi-cog")])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:"white--text"},[e._v("Ustawienia salonu")])],1)],1):e._e(),a("v-list-item",{on:{click:e.logOutClick}},[a("v-list-item-icon",[a("v-icon",{staticClass:"white--text"},[e._v("mdi-logout-variant")])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:"white--text"},[e._v("Wyloguj")])],1)],1)],2)],1)],1)],1)},c=[],l=(a("96cf"),a("1da1")),u=a("2f62"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-list-item",e._g(e._b({},"v-list-item",r,!1),n),[a("v-list-item-icon",[a("v-icon",[e._v("mdi-account-arrow-left")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v("Umów nowego klienta")])],1)],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[e._v("Umów nowego klienta na wizytę")]),a("v-stepper",{model:{value:e.el,callback:function(t){e.el=t},expression:"el"}},[a("v-stepper-header",[a("v-stepper-step",{attrs:{complete:e.el>1,step:"1"}},[e._v(" Dodaj klienta ")]),a("v-divider"),a("v-stepper-step",{attrs:{complete:e.el>2,step:"2"}},[e._v(" Umów wizytę ")]),a("v-divider")],1),a("v-stepper-items",[a("v-stepper-content",{attrs:{step:"1"}},[a("v-form",{ref:"clientForm",staticClass:"mx-5",model:{value:e.validClient,callback:function(t){e.validClient=t},expression:"validClient"}},[a("v-text-field",{staticClass:"mt-4",attrs:{counter:50,rules:e.nameRules,label:"Imię",required:""},model:{value:e.clientName,callback:function(t){e.clientName=t},expression:"clientName"}}),a("v-text-field",{attrs:{counter:50,rules:e.surnameRules,label:"Nazwisko",required:""},model:{value:e.clientSurname,callback:function(t){e.clientSurname=t},expression:"clientSurname"}}),a("v-text-field",{attrs:{rules:e.emailRules,label:"Email",required:""},model:{value:e.clientEmail,callback:function(t){e.clientEmail=t},expression:"clientEmail"}}),a("v-text-field",{attrs:{rules:e.phoneRules,label:"Telefon",required:""},model:{value:e.clientPhone,callback:function(t){e.clientPhone=t},expression:"clientPhone"}})],1),a("v-btn",{attrs:{color:"primary",loading:e.clientLoader},on:{click:e.clientClick}},[e._v("Dalej")])],1),a("v-stepper-content",{attrs:{step:"2"}},[a("v-form",{ref:"eventForm",staticClass:"mx-5",model:{value:e.validEvent,callback:function(t){e.validEvent=t},expression:"validEvent"}},[a("v-autocomplete",{staticClass:"mt-4",attrs:{"offset-y":"",items:e.getAllTreatments,"item-text":"name","item-value":"id",rules:[function(e){return!!e||"Zabieg jest wymagany"}],label:"Zabieg",required:""},on:{change:e.treatmentSelected},model:{value:e.selectedTreatmentId,callback:function(t){e.selectedTreatmentId=t},expression:"selectedTreatmentId"}}),a("v-autocomplete",{attrs:{"offset-y":"",items:e.getAllClients,"item-text":"fullname","item-value":"id",rules:[function(e){return!!e||"Klient jest wymagany"}],label:"Klient",required:""},on:{change:e.clientSelected},model:{value:e.selectedClientId,callback:function(t){e.selectedClientId=t},expression:"selectedClientId"}}),a("v-autocomplete",{attrs:{"offset-y":"",items:e.getSalon.users,"item-text":"fullname","item-value":"ref.id",rules:[function(e){return!!e||"Wykonawca jest wymagany"}],label:"Wykonawca zabiegu",required:""},on:{change:e.doctorSelected},model:{value:e.selectedDoctorId,callback:function(t){e.selectedDoctorId=t},expression:"selectedDoctorId"}}),a("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{required:"",label:"Data zabiegu","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.computedDateFormatted,callback:function(t){e.computedDateFormatted=t},expression:"computedDateFormatted"}},"v-text-field",r,!1),n))]}}]),model:{value:e.menu1,callback:function(t){e.menu1=t},expression:"menu1"}},[a("v-date-picker",{attrs:{locale:"pl-PL","no-title":""},on:{input:function(t){e.menu1=!1}},model:{value:e.dateDisplay,callback:function(t){e.dateDisplay=t},expression:"dateDisplay"}})],1),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-select",{attrs:{required:"",items:e.hours,label:"Godzina"},model:{value:e.timeHour,callback:function(t){e.timeHour=t},expression:"timeHour"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-select",{attrs:{items:e.minutes,label:"Minuty"},model:{value:e.timeMinute,callback:function(t){e.timeMinute=t},expression:"timeMinute"}})],1)],1)],1),a("v-btn",{attrs:{color:"primary",loading:e.eventLoader},on:{click:e.eventSubmit}},[e._v("Zapisz")])],1)],1)],1)],1)],1)},m=[],v=(a("99af"),a("7db0"),a("4160"),a("fb6a"),a("b0c0"),a("d3b7"),a("25f0"),a("159b"),{data:function(){return{dialog:!1,el:1,clientLoader:!1,eventLoader:!1,validClient:!0,validEvent:!1,clientName:"",clientSurname:"",nameRules:[function(e){return!!e||"Imię jest wymagane"},function(e){return e&&e.length<=50||"Imię musi być krótsze niż 50 znaków"}],surnameRules:[function(e){return!!e||"Nazwisko jest wymagane"},function(e){return e&&e.length<=50||"Nazwisko musi być krótsze niż 50 znaków"}],clientEmail:"",emailRules:[function(e){return!!e||"Email jest wymagany"},function(e){return/.+@.+/.test(e)||"Nie poprawny email"}],clientPhone:"",phoneRules:[function(e){return!!e||"Numer telefonu jest wymagany"},function(e){return/^\d{9}$/.test(e)||"Niepoprawny numer telefonu"}],date:new Date,dateDisplay:(new Date).toISOString().slice(0,10),menu1:!1,selectedTreatmentId:null,selectedTreatment:null,selectedClientId:null,selectedClient:null,selectedDoctorId:null,selectedDoctor:null,selectedDate:null,doctor:null,hours:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],minutes:[0,5,10,15,20,25,30,35,40,45,50,55],timeHour:null,timeMinute:null}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["addClient","addEvent"])),{},{clientClick:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.clientForm.validate()){t.next=2;break}return t.abrupt("return");case 2:return a={name:e.clientName,surname:e.clientSurname,fullname:"".concat(e.clientName," ").concat(e.clientSurname),email:e.clientEmail,phone:e.clientPhone,registered:new Date,visits:0,plannedcount:0,plannedvisits:[],pastvisits:[],color:e.getRandomColor()},e.clientLoader=!0,t.next=6,e.addClient(a);case 6:e.clientLoader=!1,e.el=2;case 8:case"end":return t.stop()}}),t)})))()},eventSubmit:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s,i,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.eventForm.validate()&&e.timeHour){t.next=2;break}return t.abrupt("return");case 2:return e.timeMinute||(e.timeMinute=0),r=e.selectedTreatment,s=e.selectedClient,a=e.timeHour<10?"0".concat(e.timeHour):"".concat(e.timeHour),n=e.timeMinute<10?"0".concat(e.timeMinute):"".concat(e.timeMinute),i=new Date(e.date.getTime()),i.setHours(e.timeHour),i.setMinutes(e.timeMinute),i.setSeconds(0),o=new Date,o.setTime(i.getTime()+60*r.hours*60*1e3+60*r.minutes*1e3),c={name:r.name,time:60*r.hours+r.minutes,color:r.color,confirmed:!1,clientName:"".concat(s.name," ").concat(s.surname),clientPhone:s.phone,clientEmail:s.email,clientRef:e.getUserData.salon.ref.collection("clients").doc(s.id),treatmentRef:e.getUserData.salon.ref.collection("treatments").doc(r.id),start:"".concat(i.toISOString().slice(0,10)," ").concat(a,":").concat(n),end:"".concat(o.toISOString().slice(0,10)," ").concat(o.getHours(),":").concat(o.getMinutes()),startDate:i,endDate:o,doctor:e.selectedDoctor,doctorName:e.selectedDoctor.fullname,archived:!1,category:e.selectedDoctor.fullname,price:r.price,additionalTreatments:[]},e.eventLoader=!0,t.next=16,e.addEvent(c);case 16:e.eventLoader=!1,e.dialog=!1;case 18:case"end":return t.stop()}}),t)})))()},getRandomColor:function(){return"#"+Math.floor(16777215*Math.random()).toString(16)},treatmentSelected:function(){var e=this;this.selectedTreatment=this.getAllTreatments.find((function(t){return t.id===e.selectedTreatmentId}))},clientSelected:function(){var e=this;this.selectedClient=this.getAllClients.find((function(t){return t.id===e.selectedClientId}))},doctorSelected:function(){var e=this;this.selectedDoctor=this.getSalon.users.find((function(t){return t.ref.id===e.selectedDoctorId}))},formatDate:function(e){if(!e)return null;var t=e.slice(0,4),a=e.slice(5,7),n=e.slice(8,10);return"".concat(t,"-").concat(a,"-").concat(n)},doctors:function(){var e=[];return this.getSalon.users.forEach((function(t){t.doctor&&e.push("".concat(t.name," ").concat(t.surname))})),console.log(e),e}}),computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])(["getAllClients","getAllTreatments","getUserData","getSalon"])),{},{computedDateFormatted:{get:function(){return this.formatDate(this.date)},set:function(e){this.date=e}}}),watch:{dateDisplay:function(e){this.date=new Date(Date.parse(e)),console.log(this.date)}}}),p=v,f=a("2877"),b=a("6544"),h=a.n(b),g=a("c6a6"),_=a("8336"),x=a("b0af"),w=a("99d9"),k=a("62ad"),y=a("2e4b"),C=a("169a"),j=a("ce7e"),V=a("4bd4"),T=a("132d"),z=a("da13"),S=a("5d23"),O=a("34c3"),E=a("e449"),D=a("0fd9"),R=a("b974"),I=a("7e85"),A=a("e516"),P=a("9c54"),N=a("56a4"),$=a("8654"),L=Object(f["a"])(p,d,m,!1,null,null,null),M=L.exports;h()(L,{VAutocomplete:g["a"],VBtn:_["a"],VCard:x["a"],VCardTitle:w["c"],VCol:k["a"],VDatePicker:y["a"],VDialog:C["a"],VDivider:j["a"],VForm:V["a"],VIcon:T["a"],VListItem:z["a"],VListItemContent:S["a"],VListItemIcon:O["a"],VListItemTitle:S["c"],VMenu:E["a"],VRow:D["a"],VSelect:R["a"],VStepper:I["a"],VStepperContent:A["a"],VStepperHeader:P["a"],VStepperItems:P["b"],VStepperStep:N["a"],VTextField:$["a"]});var U={components:{AddClientVisit:M},data:function(){return{draw:!1,settings:"/settings",items:[{icon:"mdi-view-dashboard",text:"Home",route:"/"},{icon:"mdi-calendar-text",text:"Kalendarz",route:"/calendar"},{icon:"mdi-seal",text:"Dzisiaj",route:"/today"},{icon:"mdi-bell-check",text:"Do potwierdzenia",route:"/confirms"},{icon:"mdi-account-box-multiple",text:"Klienci",route:"/clients"},{icon:"mdi-needle",text:"Zabiegi",route:"/treatments"},{icon:"mdi-package-variant",text:"Produkty",route:"/products"},{icon:"mdi-finance",text:"Statystyki",route:"/statistics"}],options:[{icon:"mdi-account-arrow-left",text:"Umów nowego klienta"},{icon:"mdi-account",text:"Umów istniejącego klienta"}]}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["logOut"])),{},{logOutClick:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.logOut();case 2:e.$router.go("/login");case 3:case"end":return t.stop()}}),t)})))()}}),computed:Object(i["a"])({},Object(u["c"])(["getIsLoggedIn","isAdmin"]))},H=U,F=a("40dc"),q=a("5bc1"),B=a("8860"),Z=a("1baa"),W=a("f774"),Y=a("2fa4"),K=a("2a7f"),G=Object(f["a"])(H,o,c,!1,null,null,null),J=G.exports;h()(G,{VAppBar:F["a"],VAppBarNavIcon:q["a"],VBtn:_["a"],VIcon:T["a"],VList:B["a"],VListItem:z["a"],VListItemContent:S["a"],VListItemGroup:Z["a"],VListItemIcon:O["a"],VListItemTitle:S["c"],VMenu:E["a"],VNavigationDrawer:W["a"],VSpacer:Y["a"],VToolbarTitle:K["a"]});var Q={name:"App",components:{Navbar:J},methods:Object(i["a"])({},Object(u["b"])(["authStateChanged"])),computed:Object(u["c"])(["getAlert"]),created:function(){this.authStateChanged()}},X=Q,ee=(a("46ab"),a("0798")),te=a("7496"),ae=a("f6c4"),ne=Object(f["a"])(X,r,s,!1,null,"17649790",null),re=ne.exports;h()(ne,{VAlert:ee["a"],VApp:te["a"],VMain:ae["a"]});a("45fc");var se=a("8c4f"),ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"testHomeClass",class:e.$vuetify.breakpoint.mobile?"pa-0":"",attrs:{fluid:""}},[e.$vuetify.breakpoint.mobile?a("div",{staticStyle:{height:"100%",width:"100%"}},[a("v-tabs",{attrs:{"background-color":"transparent",color:"white",grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.items,(function(t){return a("v-tab",{key:t},[e._v(" "+e._s(t)+" ")])})),1),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab-item",[e.getUserData.doctor?a("v-card",{staticClass:"pa-3"},[a("v-sheet",{attrs:{height:"auto"}},[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-btn",{staticClass:"mr-4",attrs:{outlined:"",color:"grey darken-2"},on:{click:e.setToday}},[e._v("Dzisiaj")]),a("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.prev}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-chevron-left")])],1),a("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.next}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-chevron-right")])],1),e.$refs.calendar?a("v-toolbar-title",[e._v(e._s(e.$refs.calendar.title))]):e._e(),a("v-spacer")],1)],1),a("v-sheet",{attrs:{height:"77.3vh"}},[a("v-calendar",{ref:"calendar",attrs:{locale:"pl-PL",color:"primary",events:e.getMyEvents,"event-color":e.getEventColor,type:"day"},on:{"click:event":e.showEvent},scopedSlots:e._u([{key:"day-body",fn:function(t){var n=t.date,r=t.week;return[a("div",{staticClass:"v-current-time",class:{first:n===r[0].date},style:{top:e.nowY}})]}}],null,!1,2187434639),model:{value:e.focus,callback:function(t){e.focus=t},expression:"focus"}}),a("v-menu",{attrs:{"close-on-content-click":!1,activator:e.selectedElement,"offset-x":""},model:{value:e.selectedOpen,callback:function(t){e.selectedOpen=t},expression:"selectedOpen"}},[a("v-card",{attrs:{color:"grey lighten-4","max-width":"350",flat:""}},[a("v-toolbar",{attrs:{color:e.selectedEvent.color,dark:""}},[a("v-toolbar-title",[e._v(e._s(e.selectedEvent.name))])],1),a("v-expansion-panels",[a("v-expansion-panel",[a("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[a("v-icon",{attrs:{color:"primary"}},[e._v("mdi-account")])]},proxy:!0}],null,!1,1164132294)},[e._v(" Klient: "+e._s(e.selectedEvent.clientName)+" ")]),a("v-expansion-panel-content",[a("v-simple-table",[a("tbody",[a("tr",[a("td",[e._v("Imię")]),a("td",[e._v(e._s(e.selectedClient.name))])]),a("tr",[a("td",[e._v("Nazwisko")]),a("td",[e._v(e._s(e.selectedClient.surname))])]),a("tr",[a("td",[e._v("Telefon")]),a("td",[a("a",{attrs:{href:"tel:"+e.selectedClient.phone}},[e._v(e._s(e.selectedClient.phone))])])]),a("tr",[a("td",[e._v("Email")]),a("td",[a("a",{attrs:{href:"mailto:"+e.selectedClient.email}},[e._v(e._s(e.selectedClient.email))])])]),a("tr",[a("td",[e._v("Wizyt")]),a("td",[e._v(e._s(e.selectedClient.visits))])])])])],1)],1),a("v-expansion-panel",[a("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[a("v-icon",{attrs:{color:"primary"}},[e._v("mdi-needle")])]},proxy:!0}],null,!1,815930052)},[e._v(" Zabieg: "+e._s(e.selectedTreatment.name)+" ")]),a("v-expansion-panel-content",[a("v-simple-table",[a("tbody",[a("tr",[a("td",[e._v("Zabieg")]),a("td",[e._v(e._s(e.selectedTreatment.name))])]),a("tr",[a("td",[e._v("Czas")]),a("td",[e._v(" "+e._s(e.selectedTreatment.hours)+" godziny "+e._s(e.selectedTreatment.minutes)+" minuty ")])]),a("tr",[a("td",[e._v("Cena")]),a("td",[e._v(e._s(e.selectedTreatment.price)+"zł")])]),a("tr",[a("td",[e._v("Wykonano")]),a("td",[e._v(e._s(e.selectedTreatment.visits))])])])])],1)],1),a("v-expansion-panel",[a("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[a("v-icon",{attrs:{color:e.selectedEvent.confirmed?"success":"error"}},[e._v(e._s(e.selectedEvent.confirmed?"mdi-check":"mdi-close-circle"))])]},proxy:!0}],null,!1,958814815)},[e._v(" Status:"),a("span",{staticClass:"ml-1",class:e.selectedEvent.confirmed?"success--text":"error--text"},[e._v(" "+e._s(e.selectedEvent.confirmed?"Potwierdzono":"Nie potwierdzono"))])])],1)],1),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"black"},on:{click:function(t){e.selectedOpen=!1}}},[e._v("anuluj")]),a("v-spacer"),e.selectedEvent.archived?e._e():a("EventSummary",{attrs:{event:e.selectedEvent},on:{archived:function(t){e.setTimeout((function(){e.selectedOpen=!1}),500)}}})],1)],1)],1)],1)],1):e._e()],1),a("v-tab-item",[a("v-card",{staticClass:"pa-3"},[a("v-card-title",{staticClass:"text-h4 grey--text text--darken-2"},[e._v("Dzisiaj")]),e.getTodayNotConfirmedEvents.length>0?a("v-list",{staticStyle:{height:"75.3vh","overflow-y":"scroll"},attrs:{"three-line":""}},[a("v-list-item-group",e._l(e.getTodayNotConfirmedEvents,(function(e){return a("ConfirmEventItem",{key:e.id,attrs:{event:e}})})),1)],1):a("div",{staticStyle:{height:"75.3vh"}},[a("div",{staticClass:"d-flex"},[a("v-icon",{staticClass:"fab mr-3",attrs:{size:e.$vuetify.breakpoint.mobile?30:50,color:"success"}},[e._v("mdi-check-circle")]),a("div",{staticClass:"mt-md-2 text-subtitle-1 font-weight-regular text-md-h5 success--text"},[e._v(" Wszystkie zabiegi potwierdzone ")])],1)])],1)],1),a("v-tab-item",[a("v-card",{staticClass:"pa-3"},[a("v-list",{staticStyle:{height:"84vh","overflow-y":"scroll"},attrs:{"three-line":""}},[a("v-list-item-group",e._l(e.getLowProducts,(function(t){return a("v-list-item",{key:t.id},[a("v-list-item-avatar",{staticClass:"white--text",attrs:{color:t.color}},[e._v(e._s(t.name[0]))]),a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.name))]),a("v-list-item-subtitle",[e._v("Obecnie: "+e._s(t.amount)+" "+e._s(t.unit)),a("br"),e._v(" Pozostanie: "+e._s(t.plannedAmount)+" "+e._s(t.unit))])],1)],1)})),1)],1)],1)],1)],1)],1):a("v-row",[a("v-col",{attrs:{cols:"12",md:"4"}},[e.getUserData.doctor?a("v-card",{staticClass:"pa-3",attrs:{"max-height":"84vh",elevation:"12",rounded:"lg"}},[a("v-sheet",{attrs:{height:"64"}},[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-btn",{staticClass:"mr-4",attrs:{outlined:"",color:"grey darken-2"},on:{click:e.setToday}},[e._v("Dzisiaj")]),a("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.prev}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-chevron-left")])],1),a("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.next}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-chevron-right")])],1),e.$refs.calendar?a("v-toolbar-title",[e._v(e._s(e.$refs.calendar.title))]):e._e(),a("v-spacer")],1)],1),a("v-sheet",{attrs:{height:"490"}},[a("v-calendar",{ref:"calendar",attrs:{locale:"pl-PL",color:"primary",events:e.getMyEvents,"event-color":e.getEventColor,type:"day"},on:{"click:event":e.showEvent},scopedSlots:e._u([{key:"day-body",fn:function(t){var n=t.date,r=t.week;return[a("div",{staticClass:"v-current-time",class:{first:n===r[0].date},style:{top:e.nowY}})]}}],null,!1,2187434639),model:{value:e.focus,callback:function(t){e.focus=t},expression:"focus"}}),a("v-menu",{attrs:{"close-on-content-click":!1,activator:e.selectedElement,"offset-x":""},model:{value:e.selectedOpen,callback:function(t){e.selectedOpen=t},expression:"selectedOpen"}},[a("v-card",{attrs:{color:"grey lighten-4","max-width":"350",flat:""}},[a("v-toolbar",{attrs:{color:e.selectedEvent.color,dark:""}},[a("v-toolbar-title",[e._v(e._s(e.selectedEvent.name))])],1),a("v-expansion-panels",[a("v-expansion-panel",[a("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[a("v-icon",{attrs:{color:"primary"}},[e._v("mdi-account")])]},proxy:!0}],null,!1,1164132294)},[e._v(" Klient: "+e._s(e.selectedEvent.clientName)+" ")]),a("v-expansion-panel-content",[a("v-simple-table",[a("tbody",[a("tr",[a("td",[e._v("Imię")]),a("td",[e._v(e._s(e.selectedClient.name))])]),a("tr",[a("td",[e._v("Nazwisko")]),a("td",[e._v(e._s(e.selectedClient.surname))])]),a("tr",[a("td",[e._v("Telefon")]),a("td",[a("a",{attrs:{href:"tel:"+e.selectedClient.phone}},[e._v(e._s(e.selectedClient.phone))])])]),a("tr",[a("td",[e._v("Email")]),a("td",[a("a",{attrs:{href:"mailto:"+e.selectedClient.email}},[e._v(e._s(e.selectedClient.email))])])]),a("tr",[a("td",[e._v("Wizyt")]),a("td",[e._v(e._s(e.selectedClient.visits))])])])])],1)],1),a("v-expansion-panel",[a("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[a("v-icon",{attrs:{color:"primary"}},[e._v("mdi-needle")])]},proxy:!0}],null,!1,815930052)},[e._v(" Zabieg: "+e._s(e.selectedTreatment.name)+" ")]),a("v-expansion-panel-content",[a("v-simple-table",[a("tbody",[a("tr",[a("td",[e._v("Zabieg")]),a("td",[e._v(e._s(e.selectedTreatment.name))])]),a("tr",[a("td",[e._v("Czas")]),a("td",[e._v(" "+e._s(e.selectedTreatment.hours)+" godziny "+e._s(e.selectedTreatment.minutes)+" minuty ")])]),a("tr",[a("td",[e._v("Cena")]),a("td",[e._v(e._s(e.selectedTreatment.price)+"zł")])]),a("tr",[a("td",[e._v("Wykonano")]),a("td",[e._v(e._s(e.selectedTreatment.visits))])])])])],1)],1),a("v-expansion-panel",[a("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[a("v-icon",{attrs:{color:e.selectedEvent.confirmed?"success":"error"}},[e._v(e._s(e.selectedEvent.confirmed?"mdi-check":"mdi-close-circle"))])]},proxy:!0}],null,!1,958814815)},[e._v(" Status:"),a("span",{staticClass:"ml-1",class:e.selectedEvent.confirmed?"success--text":"error--text"},[e._v(" "+e._s(e.selectedEvent.confirmed?"Potwierdzono":"Nie potwierdzono"))])])],1)],1),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"black"},on:{click:function(t){e.selectedOpen=!1}}},[e._v("anuluj")]),a("v-spacer"),e.selectedEvent.archived?e._e():a("EventSummary",{attrs:{event:e.selectedEvent},on:{archived:function(t){e.setTimeout((function(){e.selectedOpen=!1}),500)}}})],1)],1)],1)],1)],1):e._e()],1),a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-card",{staticClass:"pa-3",attrs:{rounded:"lg"}},[a("v-card-title",{staticClass:"text-h4 grey--text text--darken-2"},[e._v("Dzisiaj")]),e.getTodayNotConfirmedEvents.length>0?a("v-list",{class:e.$vuetify.breakpoint.mobile?"":"desktop",attrs:{"three-line":""}},[a("v-list-item-group",e._l(e.getTodayNotConfirmedEvents,(function(e){return a("ConfirmEventItem",{key:e.id,attrs:{event:e}})})),1)],1):a("div",{staticClass:"d-flex"},[a("v-icon",{staticClass:"fab mr-3",attrs:{size:e.$vuetify.breakpoint.mobile?30:50,color:"success"}},[e._v("mdi-check-circle")]),a("div",{staticClass:"mt-md-2 text-subtitle-1 font-weight-regular text-md-h5 success--text"},[e._v(" Wszystkie zabiegi potwierdzone ")])],1)],1)],1),a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-card",{staticClass:"pa-3",attrs:{rounded:"lg"}},[a("v-card-title",{staticClass:"text-h4 grey--text text--darken-2"},[e._v("Produkty")]),a("v-list",{staticStyle:{height:"69vh","overflow-y":"scroll"},attrs:{"three-line":""}},[a("v-list-item-group",e._l(e.getLowProducts,(function(t){return a("v-list-item",{key:t.id},[a("v-list-item-avatar",{staticClass:"white--text",attrs:{color:t.color}},[e._v(e._s(t.name[0]))]),a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.name))]),a("v-list-item-subtitle",[e._v("Obecnie: "+e._s(t.amount)+" "+e._s(t.unit)),a("br"),e._v(" Pozostanie: "),a("span",{class:t.plannedAmount<t.newAmount?"error--text":""},[e._v(e._s(t.plannedAmount)+" "+e._s(t.unit))])])],1)],1)})),1)],1)],1)],1)],1)],1)},oe=[],ce=(a("4de4"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{staticClass:"px-0",attrs:{width:"700"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{text:"",color:"primary"}},"v-btn",r,!1),n),[e._v("Podsumuj zabieg")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-stepper",{model:{value:e.el,callback:function(t){e.el=t},expression:"el"}},[a("v-stepper-header",[a("v-stepper-step",{attrs:{complete:e.el>1,step:"1"}},[e._v("Zakończ zabieg")]),a("v-divider"),a("v-stepper-step",{attrs:{complete:e.el>2,step:"2"}},[e._v("Ocena klientki")]),a("v-divider"),a("v-stepper-step",{attrs:{step:"3"}},[e._v("Dodaj zdjęcia")])],1),a("v-stepper-items",[a("v-stepper-content",{attrs:{step:"1"}},[a("v-card",{staticClass:"px-2"},[a("div",{staticClass:"caption"},[e._v("Klient")]),a("div",{staticClass:"text-subtitle-1"},[e._v(e._s(e.event.clientName))]),a("div",{staticClass:"caption"},[e._v("Zabieg")]),a("div",{staticClass:"text-subtitle-1"},[e._v(e._s(e.event.name))]),a("div",{staticClass:"caption"},[e._v("Dodatkowe zabiegi")]),a("v-autocomplete",{staticClass:"mt-2",attrs:{items:e.getAllTreatments,"item-text":"name","item-value":"id",dense:"",chips:"","small-chips":"",placeholder:"Zabiegi",multiple:""},model:{value:e.additionalTreatments,callback:function(t){e.additionalTreatments=t},expression:"additionalTreatments"}}),a("v-divider",{staticClass:"mt-2"}),a("div",{staticClass:"d-flex justify-center"},[a("v-btn",{staticClass:"mt-2",attrs:{text:"",large:"",color:"secondary"},on:{click:function(t){e.el=2}}},[e._v("Zakończ zabieg")])],1)],1)],1),a("v-stepper-content",{attrs:{step:"2"}},[a("v-card",[a("v-row",[a("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[a("v-rating",{attrs:{large:"","background-color":"secondary",color:"secondary"},model:{value:e.rating,callback:function(t){e.rating=t},expression:"rating"}})],1),a("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[a("v-btn",{attrs:{"x-large":"",color:"secondary",text:""},on:{click:function(t){e.el=3}}},[e._v("Dalej")])],1)],1)],1)],1),a("v-stepper-content",{attrs:{step:"3"}},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-file-input",{attrs:{multiple:"","prepend-icon":"mdi-camera-burst",label:"Dodaj zdjęcia"},scopedSlots:e._u([{key:"selection",fn:function(t){var n=t.text;return[a("v-chip",{attrs:{small:"",label:"",color:"primary"}},[e._v(e._s(n))])]}}]),model:{value:e.images,callback:function(t){e.images=t},expression:"images"}})],1),a("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[a("v-btn",{attrs:{"x-large":"",color:"secondary",loading:e.archiveLoader,text:""},on:{click:e.archiveClick}},[e._v("Zakończ")])],1)],1)],1)],1)],1)],1)}),le=[],ue={data:function(){return{el:1,dialog:!1,archiveLoader:!1,rating:0,images:[],additionalTreatments:[]}},props:["event"],methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["archiveEvent"])),{},{archiveClick:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.archiveLoader=!0,a=e.event,a.images=e.images,a.rate=0===e.rating?5:e.rating,a.additionalTreatments=[],e.additionalTreatments.forEach((function(t){var n=e.getAllTreatments.find((function(e){return e.id===t}));a.price+=n.price,a.additionalTreatments.push(n)})),a.archived=!0,t.next=8,e.archiveEvent(a);case 8:e.archiveLoader=!1,e.el=1,e.rating=0,e.dialog=!1,e.$emit("archived");case 13:case"end":return t.stop()}}),t)})))()}}),computed:Object(i["a"])({},Object(u["c"])(["getAllTreatments"]))},de=ue,me=a("cc20"),ve=a("23a7"),pe=a("1d4d"),fe=Object(f["a"])(de,ce,le,!1,null,null,null),be=fe.exports;h()(fe,{VAutocomplete:g["a"],VBtn:_["a"],VCard:x["a"],VChip:me["a"],VCol:k["a"],VDialog:C["a"],VDivider:j["a"],VFileInput:ve["a"],VRating:pe["a"],VRow:D["a"],VStepper:I["a"],VStepperContent:A["a"],VStepperHeader:P["a"],VStepperItems:P["b"],VStepperStep:N["a"]});var he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-list-item",e._g(e._b({},"v-list-item",r,!1),n),[a("v-list-item-avatar",{staticClass:"white--text",attrs:{color:e.event.color}},[e._v(e._s(e.event.name[0]))]),a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(e.event.name))]),a("v-list-item-subtitle",[e._v(" "+e._s(e.event.clientName)+" "),a("br"),e._v(" "+e._s(e.event.clientPhone)+" ")])],1),a("v-list-item-action",[a("div",{staticClass:"text-h4 font-weight-light mt-1"},[e._v(" "+e._s(e.event.start.slice(11))+" ")])])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",{staticClass:"pb-2"},[a("v-card-title",[e._v("Potwierdzanie wizyty"),a("v-spacer"),a("v-btn",{attrs:{icon:"",color:"black"},on:{click:function(t){e.dialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("div",{staticClass:"px-7"},[a("div",{staticClass:"caption"},[e._v("Telefon")]),a("div",[a("a",{attrs:{href:"tel:"+e.event.clientPhone}},[e._v(e._s(e.event.clientPhone))])]),a("div",{staticClass:"caption"},[e._v("Klient")]),a("div",[e._v(e._s(e.event.clientName))]),a("div",{staticClass:"caption"},[e._v("Termin")]),a("div",[e._v(e._s(e.formatedDate))]),a("div",{staticClass:"caption"},[e._v("Zabieg")]),a("div",[e._v(e._s(e.event.name))])]),a("v-card-actions",[a("v-btn",{attrs:{color:"error",text:""}},[e._v("anuluj wizytę")]),a("v-spacer"),a("v-btn",{attrs:{color:"success",text:"",loading:e.loader},on:{click:e.confirmClick}},[e._v("potwierdź")])],1)],1)],1)},ge=[],_e=(a("4d90"),{data:function(){return{dialog:!1,loader:!1}},props:["event"],methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["confirmEvent"])),{},{confirmClick:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loader=!0,t.next=3,e.confirmEvent(e.event);case 3:e.loader=!1,e.dialog=!1;case 5:case"end":return t.stop()}}),t)})))()}}),computed:{formatedDate:function(){var e=this.event.startDate.toDate(),t=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),s=e.getFullYear();return"".concat(n,".").concat(r,".").concat(s," ").concat(t,":").concat(a)}}}),xe=_e,we=a("1800"),ke=a("8270"),ye=Object(f["a"])(xe,he,ge,!1,null,null,null),Ce=ye.exports;h()(ye,{VBtn:_["a"],VCard:x["a"],VCardActions:w["a"],VCardTitle:w["c"],VDialog:C["a"],VIcon:T["a"],VListItem:z["a"],VListItemAction:we["a"],VListItemAvatar:ke["a"],VListItemContent:S["a"],VListItemSubtitle:S["b"],VListItemTitle:S["c"],VSpacer:Y["a"]});var je={data:function(){return{focus:"",value:"",ready:!1,selectedEvent:{},selectedTreatment:{},selectedClient:{},selectedElement:null,selectedOpen:!1,tab:null,items:["Dzisiaj","Klientki","Produkty"]}},components:{EventSummary:be,ConfirmEventItem:Ce},mounted:function(){this.ready=!0,this.scrollToTime(),this.updateTime()},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["archiveEvent"])),{},{getEventColor:function(e){return e.archived?"#969696":e.color},setToday:function(){this.focus=""},prev:function(){this.$refs.calendar.prev()},next:function(){this.$refs.calendar.next()},getCurrentTime:function(){return this.cal?60*this.cal.times.now.hour+this.cal.times.now.minute:0},scrollToTime:function(){var e=this.getCurrentTime(),t=Math.max(0,e-e%30-30);this.cal&&this.cal.scrollToTime(t)},updateTime:function(){var e=this;this.cal&&setInterval((function(){return e.cal.updateTimes()}),6e4)},showEvent:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.nativeEvent,r=e.event,s=function(){t.selectedEvent=r,t.selectedElement=n.target,setTimeout((function(){return t.selectedOpen=!0}),10)},t.selectedOpen?(t.selectedOpen=!1,setTimeout(s,10)):s(),n.stopPropagation(),a.next=6,t.selectedEvent.clientRef.get();case 6:return i=a.sent,t.selectedClient=i.data(),t.selectedClient.id=i.id,a.next=11,t.selectedEvent.treatmentRef.get();case 11:o=a.sent,t.selectedTreatment=o.data(),t.selectedTreatment.id=o.id;case 14:case"end":return a.stop()}}),a)})))()}}),computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])(["getAllEvents","getSalon","getUserData","getTodayNotConfirmedEvents","getLowProducts"])),{},{cal:function(){return this.ready?this.$refs.calendar:null},nowY:function(){return this.cal?this.cal.timeToY(this.cal.times.now)+"px":"-10px"},getMyEvents:function(){var e=this;return this.getAllEvents.filter((function(t){return t.category=="".concat(e.getUserData.name," ").concat(e.getUserData.surname)}))}})},Ve=je,Te=(a("8a49"),a("a4f6")),ze=a("a523"),Se=a("cd55"),Oe=a("49e2"),Ee=a("c865"),De=a("0393"),Re=a("8dd9"),Ie=a("1f4f"),Ae=a("71a3"),Pe=a("c671"),Ne=a("fe57"),$e=a("aac8"),Le=a("71d9"),Me=Object(f["a"])(Ve,ie,oe,!1,null,"6b4c3d9e",null),Ue=Me.exports;h()(Me,{VBtn:_["a"],VCalendar:Te["a"],VCard:x["a"],VCardActions:w["a"],VCardTitle:w["c"],VCol:k["a"],VContainer:ze["a"],VExpansionPanel:Se["a"],VExpansionPanelContent:Oe["a"],VExpansionPanelHeader:Ee["a"],VExpansionPanels:De["a"],VIcon:T["a"],VList:B["a"],VListItem:z["a"],VListItemAvatar:ke["a"],VListItemContent:S["a"],VListItemGroup:Z["a"],VListItemSubtitle:S["b"],VListItemTitle:S["c"],VMenu:E["a"],VRow:D["a"],VSheet:Re["a"],VSimpleTable:Ie["a"],VSpacer:Y["a"],VTab:Ae["a"],VTabItem:Pe["a"],VTabs:Ne["a"],VTabsItems:$e["a"],VToolbar:Le["a"],VToolbarTitle:K["a"]});var He=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"schedule"},[a("v-container",[a("Calendar"),a("AddEvent")],1)],1)},Fe=[],qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{staticClass:"fill-height"},[a("v-col",[a("v-sheet",{attrs:{height:"64"}},[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-btn",{staticClass:"mr-4",attrs:{outlined:"",color:"grey darken-2"},on:{click:e.setToday}},[e._v("Dziś")]),a("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.prev}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-chevron-left")])],1),a("v-btn",{staticClass:"mr-4",attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.next}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-chevron-right")])],1),e.$refs.calendar?a("v-toolbar-title",[e._v(e._s(e.$refs.calendar.title))]):e._e(),a("v-spacer"),a("v-menu",{attrs:{bottom:"",right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{outlined:"",color:"grey darken-2"}},"v-btn",r,!1),n),[a("span",[e._v(e._s(e.typeToLabel[e.type]))]),a("v-icon",{attrs:{right:""}},[e._v("mdi-menu-down")])],1)]}}])},[a("v-list",[a("v-list-item",{on:{click:function(t){e.type="day"}}},[a("v-list-item-title",[e._v("Dzień")])],1),a("v-list-item",{on:{click:function(t){e.type="week"}}},[a("v-list-item-title",[e._v("Tydzień")])],1),a("v-list-item",{on:{click:function(t){e.type="month"}}},[a("v-list-item-title",[e._v("Miesiąc")])],1),a("v-list-item",{on:{click:function(t){e.type="4day"}}},[a("v-list-item-title",[e._v("4 Dni")])],1)],1)],1)],1)],1),a("v-sheet",{attrs:{height:"600"}},[a("v-calendar",{ref:"calendar",attrs:{locale:"pl-PL",color:"primary",weekdays:e.weekdays,events:e.getAllEvents,"event-color":e.getEventColor,type:e.type},on:{"click:event":e.showEvent,"click:more":e.viewDay,"click:date":e.viewDay},scopedSlots:e._u([{key:"day-body",fn:function(t){var n=t.date,r=t.week;return[a("div",{staticClass:"v-current-time",class:{first:n===r[0].date},style:{top:e.nowY}})]}}]),model:{value:e.focus,callback:function(t){e.focus=t},expression:"focus"}}),a("v-menu",{attrs:{"close-on-content-click":!1,activator:e.selectedElement,"offset-x":""},model:{value:e.selectedOpen,callback:function(t){e.selectedOpen=t},expression:"selectedOpen"}},[a("v-card",{attrs:{color:"grey lighten-4","max-width":"350",flat:""}},[a("v-toolbar",{attrs:{color:e.selectedEvent.color,dark:""}},[e.selectedEvent.archived?e._e():a("EditEvent",{on:{eventUpdated:function(t){e.selectedOpen=!1}}}),a("v-toolbar-title",[e._v(e._s(e.selectedEvent.name))])],1),a("v-expansion-panels",[a("v-expansion-panel",[a("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[a("v-icon",{attrs:{color:"primary"}},[e._v("mdi-account")])]},proxy:!0}])},[e._v(" Klient: "+e._s(e.selectedEvent.clientName)+" ")]),a("v-expansion-panel-content",[a("v-simple-table",[a("tbody",[a("tr",[a("td",[e._v("Imię")]),a("td",[e._v(e._s(e.selectedClient.name))])]),a("tr",[a("td",[e._v("Nazwisko")]),a("td",[e._v(e._s(e.selectedClient.surname))])]),a("tr",[a("td",[e._v("Telefon")]),a("td",[a("a",{attrs:{href:"tel:"+e.selectedClient.phone}},[e._v(e._s(e.selectedClient.phone))])])]),a("tr",[a("td",[e._v("Email")]),a("td",[a("a",{attrs:{href:"mailto:"+e.selectedClient.email}},[e._v(e._s(e.selectedClient.email))])])]),a("tr",[a("td",[e._v("Wizyt")]),a("td",[e._v(e._s(e.selectedClient.visits))])])])])],1)],1),a("v-expansion-panel",[a("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[a("v-icon",{attrs:{color:"primary"}},[e._v("mdi-needle")])]},proxy:!0}])},[e._v(" Zabieg: "+e._s(e.selectedTreatment.name)+" ")]),a("v-expansion-panel-content",[a("v-simple-table",[a("tbody",[a("tr",[a("td",[e._v("Zabieg")]),a("td",[e._v(e._s(e.selectedTreatment.name))])]),a("tr",[a("td",[e._v("Czas")]),a("td",[e._v(" "+e._s(e.selectedTreatment.hours)+" godziny "+e._s(e.selectedTreatment.minutes)+" minuty ")])]),a("tr",[a("td",[e._v("Cena")]),a("td",[e._v(e._s(e.selectedTreatment.price)+"zł")])]),a("tr",[a("td",[e._v("Wykonano")]),a("td",[e._v(e._s(e.selectedTreatment.visits))])])])])],1)],1),a("v-expansion-panel",[a("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[a("v-icon",{attrs:{color:"primary"}},[e._v("mdi-doctor")])]},proxy:!0}])},[e._v(" Wykonawca: "+e._s(e.selectedEvent.doctorName)+" ")])],1),a("v-expansion-panel",[a("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[a("v-icon",{attrs:{color:e.selectedEvent.confirmed?"success":"error"}},[e._v(e._s(e.selectedEvent.confirmed?"mdi-check":"mdi-close-circle"))])]},proxy:!0}])},[e._v(" Status:"),a("span",{staticClass:"ml-1",class:e.selectedEvent.confirmed?"success--text":"error--text"},[e._v(" "+e._s(e.selectedEvent.confirmed?"Potwierdzono":"Nie potwierdzono"))])])],1)],1),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.selectedOpen=!1}}},[e._v("anuluj")]),e.selectedEvent.archived?e._e():a("v-btn",{attrs:{text:"",color:"primary",loading:e.deleteLoader},on:{click:e.deleteClick}},[e._v("usuń")])],1)],1)],1)],1)],1)],1)},Be=[],Ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"400"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-pencil")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline primary white--text"},[e._v(" Edytuj termin zabiegu "),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(t){e.dialog=!1}}},[a("v-icon",{attrs:{color:"white"}},[e._v("mdi-close")])],1)],1),a("v-form",{ref:"form",staticClass:"mx-5",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("div",{staticClass:"caption mt-4"},[e._v("Poprzedni termin")]),a("div",{staticClass:"mb-5"},[e._v(e._s(e.getSelectedEvent.start))]),a("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{required:"",label:"Data zabiegu","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.computedDateFormatted,callback:function(t){e.computedDateFormatted=t},expression:"computedDateFormatted"}},"v-text-field",r,!1),n))]}}]),model:{value:e.menu1,callback:function(t){e.menu1=t},expression:"menu1"}},[a("v-date-picker",{attrs:{"no-title":""},on:{input:function(t){e.menu1=!1}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-select",{attrs:{required:"",items:e.hours,label:"Godzina"},model:{value:e.timeHour,callback:function(t){e.timeHour=t},expression:"timeHour"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-select",{attrs:{items:e.minutes,label:"Minuty"},model:{value:e.timeMinute,callback:function(t){e.timeMinute=t},expression:"timeMinute"}})],1)],1)],1),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:function(t){e.dialog=!1}}},[e._v("anuluj")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:"",loading:e.loader,disabled:!e.valid},on:{click:e.submit}},[e._v("zapisz")])],1)],1)],1)},We=[],Ye={name:"AddEvent",data:function(e){return{date:(new Date).toISOString().substr(0,10),dateFormatted:e.formatDate((new Date).toISOString().substr(0,10)),menu1:!1,loader:!1,dialog:!1,valid:!0,selectedDate:null,hours:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],minutes:[0,10,15,20,30,40,45,50],timeHour:null,timeMinute:null}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["editEvent"])),{},{submit:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()&&e.timeHour){t.next=2;break}return t.abrupt("return");case 2:return e.timeMinute||(e.timeMinute=0),a=e.timeHour<10?"0".concat(e.timeHour):"".concat(e.timeHour),n=e.timeMinute<10?"0".concat(e.timeMinute):"".concat(e.timeMinute),r=new Date("".concat(e.computedDateFormatted," ").concat(a,":").concat(n)),s=new Date("".concat(e.computedDateFormatted," ").concat(a,":").concat(n)),s.setTime(r.getTime()+60*e.getSelectedEvent.time*1e3),e.getSelectedEvent.start="".concat(r.getFullYear(),"-").concat(r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1,"-").concat(r.getDate()<10?"0"+r.getDate():r.getDate()," ").concat(r.getHours()<10?"0"+r.getHours():r.getHours(),":").concat(r.getMinutes()<10?"0"+r.getMinutes():r.getMinutes()),e.getSelectedEvent.end="".concat(s.getFullYear(),"-").concat(s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1,"-").concat(s.getDate()<10?"0"+s.getDate():s.getDate()," ").concat(s.getHours()<10?"0"+s.getHours():s.getHours(),":").concat(s.getMinutes()<10?"0"+s.getMinutes():s.getMinutes()),e.loader=!0,t.next=13,e.editEvent(e.getSelectedEvent);case 13:e.loader=!1,e.dialog=!1,e.reset(),e.$emit("eventUpdated");case 17:case"end":return t.stop()}}),t)})))()},reset:function(){this.$refs.form.reset(),this.date=(new Date).toISOString().substr(0,10)},formatDate:function(e){if(!e)return null;var t=e.slice(0,4),a=e.slice(5,7),n=e.slice(8,10);return"".concat(t,"-").concat(a,"-").concat(n)}}),computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])(["getSelectedEvent"])),{},{computedDateFormatted:{get:function(){return this.formatDate(this.date)},set:function(e){this.date=e}}})},Ke=Ye,Ge=Object(f["a"])(Ke,Ze,We,!1,null,null,null),Je=Ge.exports;h()(Ge,{VBtn:_["a"],VCard:x["a"],VCardActions:w["a"],VCardTitle:w["c"],VCol:k["a"],VDatePicker:y["a"],VDialog:C["a"],VForm:V["a"],VIcon:T["a"],VMenu:E["a"],VRow:D["a"],VSelect:R["a"],VSpacer:Y["a"],VTextField:$["a"]});var Qe={components:{EditEvent:Je},data:function(){return{weekdays:[1,2,3,4,5,6,0],focus:"",type:"week",typeToLabel:{month:"Miesiąc",week:"Tydzień",day:"Dzień","4day":"4 Dni"},ready:!1,selectedEvent:{},selectedElement:null,selectedOpen:!1,selectedClient:{},selectedTreatment:{},deleteLoader:!1}},mounted:function(){this.$refs.calendar.checkChange(),this.ready=!0,this.scrollToTime(),this.updateTime(),this.$vuetify.breakpoint.mobile?this.type="4day":this.type="week"},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["removeEvent","selectEvent"])),{},{viewDay:function(e){var t=e.date;this.focus=t,this.type="day"},getEventColor:function(e){return e.color},setToday:function(){this.focus=""},prev:function(){this.$refs.calendar.prev()},next:function(){this.$refs.calendar.next()},showEvent:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.nativeEvent,r=e.event,s=function(){t.selectedEvent=r,t.selectedElement=n.target,setTimeout((function(){return t.selectedOpen=!0}),10)},t.selectedOpen?(t.selectedOpen=!1,setTimeout(s,10)):s(),n.stopPropagation(),t.selectEvent(r),a.next=7,t.selectedEvent.clientRef.get();case 7:return i=a.sent,t.selectedClient=i.data(),t.selectedClient.id=i.id,a.next=12,t.selectedEvent.treatmentRef.get();case 12:o=a.sent,t.selectedTreatment=o.data(),t.selectedTreatment.id=o.id;case 15:case"end":return a.stop()}}),a)})))()},deleteClick:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.deleteLoader=!0,t.next=3,e.removeEvent(e.selectedEvent,e.selectedClient,e.selectedTreatment);case 3:e.deleteLoader=!1,e.selectedOpen=!1;case 5:case"end":return t.stop()}}),t)})))()},getCurrentTime:function(){return this.cal?60*this.cal.times.now.hour+this.cal.times.now.minute:0},scrollToTime:function(){var e=this.getCurrentTime(),t=Math.max(0,e-e%30-30);this.cal.scrollToTime(t)},updateTime:function(){var e=this;setInterval((function(){return e.cal.updateTimes()}),6e4)}}),computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])(["getAllEvents"])),{},{cal:function(){return this.ready?this.$refs.calendar:null},nowY:function(){return this.cal?this.cal.timeToY(this.cal.times.now)+"px":"-10px"}})},Xe=Qe,et=(a("e611"),Object(f["a"])(Xe,qe,Be,!1,null,null,null)),tt=et.exports;h()(et,{VBtn:_["a"],VCalendar:Te["a"],VCard:x["a"],VCardActions:w["a"],VCol:k["a"],VExpansionPanel:Se["a"],VExpansionPanelContent:Oe["a"],VExpansionPanelHeader:Ee["a"],VExpansionPanels:De["a"],VIcon:T["a"],VList:B["a"],VListItem:z["a"],VListItemTitle:S["c"],VMenu:E["a"],VRow:D["a"],VSheet:Re["a"],VSimpleTable:Ie["a"],VSpacer:Y["a"],VToolbar:Le["a"],VToolbarTitle:K["a"]});var at=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{fullscreen:e.$vuetify.breakpoint.mobile,"max-width":"400","hide-overlay":e.$vuetify.breakpoint.mobile,transition:e.$vuetify.breakpoint.mobile?"dialog-bottom-transition":"scale-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{fixed:"",bottom:"",right:"",fab:"",color:"secondary"}},"v-btn",r,!1),n),[a("v-icon",{attrs:{large:""}},[e._v("mdi-plus-circle")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline primary white--text"},[e._v(" Nowy zabieg "),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(t){e.dialog=!1}}},[a("v-icon",{attrs:{color:"white"}},[e._v("mdi-close")])],1)],1),a("div",{staticClass:"mx-auto",staticStyle:{"max-width":"600px"}},[a("v-form",{ref:"form",staticClass:"mx-5",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-autocomplete",{staticClass:"mt-4",attrs:{"offset-y":"",items:e.getAllTreatments,"item-text":"name","item-value":"id",rules:[function(e){return!!e||"Zabieg jest wymagany"}],label:"Zabieg","no-data-text":"Brak zabiegu",required:""},on:{change:e.treatmentSelected},model:{value:e.selectedTreatmentId,callback:function(t){e.selectedTreatmentId=t},expression:"selectedTreatmentId"}}),a("v-autocomplete",{attrs:{"offset-y":"",items:e.getAllClients,"item-text":"fullname","item-value":"id",rules:[function(e){return!!e||"Klient jest wymagany"}],label:"Klient","no-data-text":"Brak klienta",required:""},on:{change:e.clientSelected},model:{value:e.selectedClientId,callback:function(t){e.selectedClientId=t},expression:"selectedClientId"}}),a("v-autocomplete",{attrs:{"offset-y":"",items:e.getSalon.users,"item-text":"fullname","item-value":"ref.id",rules:[function(e){return!!e||"Wykonawca jest wymagany"}],label:"Wykonawca zabiegu","no-data-text":"Brak wykonawcy",required:""},on:{change:e.doctorSelected},model:{value:e.selectedDoctorId,callback:function(t){e.selectedDoctorId=t},expression:"selectedDoctorId"}}),a("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{required:"",label:"Data zabiegu","prepend-icon":"mdi-calendar",readonly:"",rules:[function(e){return!!e||"Data zabiegu jest wymagana"}]},model:{value:e.computedDateFormatted,callback:function(t){e.computedDateFormatted=t},expression:"computedDateFormatted"}},"v-text-field",r,!1),n))]}}]),model:{value:e.menu1,callback:function(t){e.menu1=t},expression:"menu1"}},[a("v-date-picker",{attrs:{locale:"pl-PL","no-title":""},on:{input:function(t){e.menu1=!1}},model:{value:e.dateDisplay,callback:function(t){e.dateDisplay=t},expression:"dateDisplay"}})],1),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-select",{attrs:{required:"",items:e.hours,label:"Godzina"},model:{value:e.timeHour,callback:function(t){e.timeHour=t},expression:"timeHour"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-select",{attrs:{items:e.minutes,label:"Minuty"},model:{value:e.timeMinute,callback:function(t){e.timeMinute=t},expression:"timeMinute"}})],1)],1)],1),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:function(t){e.dialog=!1}}},[e._v("anuluj")]),a("v-btn",{attrs:{text:""},on:{click:e.reset}},[e._v("resetuj")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:"",loading:e.loader,disabled:!e.valid},on:{click:e.submit}},[e._v("dodaj")])],1)],1)],1)],1)},nt=[],rt={name:"AddEvent",data:function(){return{date:new Date,dateDisplay:(new Date).toISOString().slice(0,10),menu1:!1,loader:!1,dialog:!1,valid:!0,selectedTreatmentId:null,selectedTreatment:null,selectedClientId:null,selectedClient:null,selectedDoctorId:null,selectedDoctor:null,selectedDate:null,doctor:null,hours:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],minutes:[0,5,10,15,20,25,30,35,40,45,50,55],timeHour:(new Date).getHours(),timeMinute:0}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["addEvent"])),{},{submit:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s,i,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()&&e.timeHour){t.next=2;break}return t.abrupt("return");case 2:return e.timeMinute||(e.timeMinute=0),r=e.selectedTreatment,s=e.selectedClient,a=e.timeHour<10?"0".concat(e.timeHour):"".concat(e.timeHour),n=e.timeMinute<10?"0".concat(e.timeMinute):"".concat(e.timeMinute),i=new Date(e.date.getTime()),i.setHours(e.timeHour),i.setMinutes(e.timeMinute),i.setSeconds(0),o=new Date,o.setTime(i.getTime()+60*r.hours*60*1e3+60*r.minutes*1e3),c={name:r.name,time:60*r.hours+r.minutes,color:r.color,confirmed:!1,clientName:"".concat(s.name," ").concat(s.surname),clientPhone:s.phone,clientEmail:s.email,clientRef:e.getUserData.salon.ref.collection("clients").doc(s.id),treatmentRef:e.getUserData.salon.ref.collection("treatments").doc(r.id),start:"".concat(i.toISOString().slice(0,10)," ").concat(a,":").concat(n),end:"".concat(o.toISOString().slice(0,10)," ").concat(o.getHours(),":").concat(o.getMinutes()),startDate:i,endDate:o,doctor:e.selectedDoctor,doctorName:e.selectedDoctor.fullname,archived:!1,category:e.selectedDoctor.fullname,price:r.price,additionalTreatments:[],products:r.products},e.loader=!0,t.next=16,e.addEvent(c);case 16:e.loader=!1,e.dialog=!1,e.reset();case 19:case"end":return t.stop()}}),t)})))()},reset:function(){this.$refs.form.reset(),this.date=new Date,this.dateDisplay=(new Date).toISOString().slice(0,10)},treatmentSelected:function(){var e=this;this.selectedTreatment=this.getAllTreatments.find((function(t){return t.id===e.selectedTreatmentId}))},clientSelected:function(){var e=this;this.selectedClient=this.getAllClients.find((function(t){return t.id===e.selectedClientId}))},doctorSelected:function(){var e=this;this.selectedDoctor=this.getSalon.users.find((function(t){return t.ref.id===e.selectedDoctorId}))},formatDate:function(e){if(!e)return null;var t=e.getFullYear(),a=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0");return"".concat(n,"-").concat(a,"-").concat(t)},doctors:function(){var e=[];return this.getSalon.users.forEach((function(t){t.doctor&&e.push("".concat(t.name," ").concat(t.surname))})),console.log(e),e}}),computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])(["getAllClients","getAllTreatments","getUserData","getSalon"])),{},{computedDateFormatted:{get:function(){return this.formatDate(this.date)},set:function(e){this.date=e}}}),watch:{dateDisplay:function(e){this.date=new Date(Date.parse(e))}}},st=rt,it=Object(f["a"])(st,at,nt,!1,null,null,null),ot=it.exports;h()(it,{VAutocomplete:g["a"],VBtn:_["a"],VCard:x["a"],VCardActions:w["a"],VCardTitle:w["c"],VCol:k["a"],VDatePicker:y["a"],VDialog:C["a"],VForm:V["a"],VIcon:T["a"],VMenu:E["a"],VRow:D["a"],VSelect:R["a"],VSpacer:Y["a"],VTextField:$["a"]});var ct={name:"Schedule",components:{Calendar:tt,AddEvent:ot}},lt=ct,ut=Object(f["a"])(lt,He,Fe,!1,null,null,null),dt=ut.exports;h()(ut,{VContainer:ze["a"]});var mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{class:e.$vuetify.breakpoint.mobile?"pa-0":"",attrs:{fluid:""}},[a("AddClient",{on:{clientAdded:function(t){e.selectedClient=e.getAllClients[0]}}}),e.$vuetify.breakpoint.mobile?a("div",{staticStyle:{height:"100%",width:"100%"}},[a("v-tabs",{attrs:{"background-color":"primary",color:"white",grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(["Lista","Klient"],(function(t){return a("v-tab",{key:t},[e._v(" "+e._s(t)+" ")])})),1),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab-item",{staticClass:"pa-4"},[a("v-autocomplete",{attrs:{"no-data-text":"Brak klientów","offset-y":"",items:e.getAllClients,"item-text":"fullname","item-value":"id",label:"Klient","prepend-icon":"mdi-account-search-outline"},on:{change:e.searchSelect},model:{value:e.searchClientId,callback:function(t){e.searchClientId=t},expression:"searchClientId"}}),a("v-list",{attrs:{"three-line":"","max-height":"100%"}},[a("v-list-item-group",e._l(e.getAllClients,(function(t){return a("v-list-item",{key:t.id,on:{click:function(a){e.selectedClient=t}}},[a("v-list-item-avatar",{staticClass:"white--text",attrs:{color:t.color}},[e._v(e._s(t.name[0]))]),a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.fullname))]),a("v-list-item-subtitle",[e._v(e._s(t.phone)+" "),a("br"),e._v(" "+e._s(t.email))])],1)],1)})),1)],1)],1),a("v-tab-item",[a("v-row",{staticClass:"pa-5",staticStyle:{"max-width":"100%"}},[a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Imię")]),a("div",[e._v(e._s(e.selectedClient.name))])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Nazwisko")]),a("div",[e._v(e._s(e.selectedClient.surname))])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Telefon")]),a("div",[e._v(e._s(e.selectedClient.phone))])]),a("v-col",{attrs:{cols:e.selectedClient.email.length<19?"6":"12",md:"6"}},[a("div",{staticClass:"caption"},[e._v("Email")]),a("div",[e._v(e._s(e.selectedClient.email))])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Zarejestrowany")]),a("div",[e._v(e._s(e.registeredText))])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Liczba wizyt")]),a("div",[e._v(e._s(e.selectedClient.visits))])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Zaplanowanych wizyt")]),a("div",[e._v(e._s(e.selectedClient.plannedcount))])]),a("v-col",{attrs:{cols:"12"}},[a("div",{staticClass:"caption"},[e._v("Zaplanowane wizyty")]),0===e.selectedClient.plannedcount||void 0===e.selectedClient.plannedcount?a("div",[e._v(" Brak zaplanowanych wizyt ")]):a("div",[a("v-list",{attrs:{"two-line":""}},[a("v-list-item-group",e._l(e.plannedvisits,(function(t){return a("v-list-item",{key:t.id},[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.name))]),a("v-list-item-subtitle",[e._v(e._s(t.start)),a("br"),e._v("Status: "),a("span",{class:t.confirmed?"success--text":"error--text"},[e._v(e._s(t.confirmed?"Potwierdzono":"Nie potwierdzono"))])])],1)],1)})),1)],1)],1)]),a("v-col",{attrs:{cols:"12"}},[a("v-expansion-panels",{attrs:{focusable:""}},[a("v-expansion-panel",[a("v-expansion-panel-header",[e._v("Wizyty")]),a("v-expansion-panel-content",[a("v-list",[a("v-list-item-group",e._l(e.pastvisits,(function(e){return a("Visit",{key:e.id,attrs:{treatment:!1,event:e}})})),1)],1)],1)],1)],1),a("div",{staticClass:"mt-4"},[void 0!==e.selectedClient.id?a("v-btn",{attrs:{text:"",color:"error"},on:{click:function(t){return e.deleteClient(e.selectedClient.id)}}},[e._v("Usuń")]):e._e(),void 0!==e.selectedClient.id?a("EditClient",{attrs:{client:e.selectedClient}}):e._e()],1)],1)],1)],1)],1)],1):a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12",md:"3"}},[a("v-card",{staticClass:"px-4 pt-2"},[a("v-autocomplete",{attrs:{"no-data-text":"Brak klientów","offset-y":"",items:e.getAllClients,"item-text":"fullname","item-value":"id",label:"Klient","prepend-icon":"mdi-account-search-outline"},on:{change:e.searchSelect},model:{value:e.searchClientId,callback:function(t){e.searchClientId=t},expression:"searchClientId"}}),a("v-list",{staticStyle:{height:"80vh","overflow-y":"scroll"},attrs:{"three-line":""}},[a("v-list-item-group",e._l(e.getAllClients,(function(t){return a("v-list-item",{key:t.id,on:{click:function(a){e.selectedClient=t}}},[a("v-list-item-avatar",{staticClass:"white--text",attrs:{color:t.color}},[e._v(e._s(t.name[0]))]),a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.fullname))]),a("v-list-item-subtitle",[e._v(e._s(t.phone)+" "),a("br"),e._v(" "+e._s(t.email))])],1)],1)})),1)],1)],1)],1),a("v-col",{attrs:{cols:"12",md:"9"}},[a("v-row",{staticClass:"pa-5"},[a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Imię")]),a("div",[e._v(e._s(e.selectedClient.name))])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Nazwisko")]),a("div",[e._v(e._s(e.selectedClient.surname))])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Telefon")]),a("div",[e._v(e._s(e.selectedClient.phone))])]),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("div",{staticClass:"caption"},[e._v("Email")]),a("div",[e._v(e._s(e.selectedClient.email))])]),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("div",{staticClass:"caption"},[e._v("Zarejestrowany")]),a("div",[e._v(e._s(e.registeredText))])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Liczba wizyt")]),a("div",[e._v(e._s(e.selectedClient.visits))])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Zaplanowanych wizyt")]),a("div",[e._v(e._s(e.selectedClient.plannedcount))])]),a("v-col",{attrs:{cols:"12"}},[a("div",{staticClass:"caption"},[e._v("Zaplanowane wizyty")]),0===e.selectedClient.plannedcount||void 0===e.selectedClient.plannedcount?a("div",[e._v(" Brak zaplanowanych wizyt ")]):a("div",[a("v-list",{attrs:{"two-line":""}},[a("v-list-item-group",e._l(e.plannedvisits,(function(t){return a("v-list-item",{key:t.id},[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.name))]),a("v-list-item-subtitle",[e._v(e._s(t.start)),a("br"),e._v("Status: "),a("span",{class:t.confirmed?"success--text":"error--text"},[e._v(e._s(t.confirmed?"Potwierdzono":"Nie potwierdzono"))])])],1)],1)})),1)],1)],1)]),a("v-col",{attrs:{cols:"12"}},[a("v-expansion-panels",{attrs:{focusable:""}},[a("v-expansion-panel",[a("v-expansion-panel-header",[e._v("Wizyty")]),a("v-expansion-panel-content",[a("v-list",[a("v-list-item-group",e._l(e.pastvisits,(function(e){return a("Visit",{key:e.id,attrs:{treatment:!1,event:e}})})),1)],1)],1)],1)],1),a("div",{staticClass:"mt-4"},[void 0!==e.selectedClient.id?a("v-btn",{attrs:{text:"",color:"error"},on:{click:function(t){return e.deleteClient(e.selectedClient.id)}}},[e._v("Usuń")]):e._e(),void 0!==e.selectedClient.id?a("EditClient",{attrs:{client:e.selectedClient}}):e._e()],1)],1)],1)],1)],1)],1)},vt=[],pt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{fullscreen:e.$vuetify.breakpoint.mobile,"max-width":"400","hide-overlay":e.$vuetify.breakpoint.mobile,transition:e.$vuetify.breakpoint.mobile?"dialog-bottom-transition":"scale-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{fixed:"",bottom:"",right:"",fab:"",color:"secondary"}},"v-btn",r,!1),n),[a("v-icon",{attrs:{large:""}},[e._v("mdi-plus-circle")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline primary white--text"},[e._v(" Dodaj klienta "),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(t){e.dialog=!1}}},[a("v-icon",{attrs:{color:"white"}},[e._v("mdi-close")])],1)],1),a("div",{staticClass:"mx-auto",staticStyle:{"max-width":"600px"}},[a("v-form",{ref:"form",staticClass:"mx-5",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{staticClass:"mt-4",attrs:{counter:50,rules:e.nameRules,label:"Imię",required:""},model:{value:e.clientName,callback:function(t){e.clientName=t},expression:"clientName"}}),a("v-text-field",{attrs:{counter:50,rules:e.surnameRules,label:"Nazwisko",required:""},model:{value:e.clientSurname,callback:function(t){e.clientSurname=t},expression:"clientSurname"}}),a("v-text-field",{attrs:{rules:e.emailRules,label:"Email",required:""},model:{value:e.clientEmail,callback:function(t){e.clientEmail=t},expression:"clientEmail"}}),a("v-text-field",{attrs:{rules:e.phoneRules,label:"Telefon",required:""},model:{value:e.clientPhone,callback:function(t){e.clientPhone=t},expression:"clientPhone"}})],1),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Anuluj")]),a("v-btn",{attrs:{text:""},on:{click:e.reset}},[e._v("resetuj")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:"",loading:e.loader,disabled:!e.valid},on:{click:e.submit}},[e._v("Dodaj")])],1)],1)],1)],1)},ft=[],bt={name:"AddClient",data:function(){return{timeError:!1,loader:!1,dialog:!1,valid:!0,clientName:"",clientSurname:"",nameRules:[function(e){return!!e||"Imię jest wymagane"},function(e){return e&&e.length<=50||"Imię musi być krótsze niż 50 znaków"}],surnameRules:[function(e){return!!e||"Nazwisko jest wymagane"},function(e){return e&&e.length<=50||"Nazwisko musi być krótsze niż 50 znaków"}],clientEmail:"",emailRules:[function(e){return!!e||"Email jest wymagany"},function(e){return/.+@.+/.test(e)||"Nie poprawny email"}],clientPhone:"",phoneRules:[function(e){return!!e||"Numer telefonu jest wymagany"},function(e){return/^\d{9}$/.test(e)||"Niepoprawny numer telefonu"}]}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["addClient","deleteClient"])),{},{getRandomColor:function(){return"#"+Math.floor(16777215*Math.random()).toString(16)},submit:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:return a={name:e.clientName,surname:e.clientSurname,fullname:"".concat(e.clientName," ").concat(e.clientSurname),email:e.clientEmail,phone:e.clientPhone,registered:new Date,visits:0,plannedcount:0,color:e.getRandomColor()},e.loader=!0,t.next=6,e.addClient(a);case 6:e.loader=!1,e.dialog=!1,e.reset(),e.$emit("clientAdded");case 10:case"end":return t.stop()}}),t)})))()},reset:function(){this.$refs.form.reset()}})},ht=bt,gt=Object(f["a"])(ht,pt,ft,!1,null,null,null),_t=gt.exports;h()(gt,{VBtn:_["a"],VCard:x["a"],VCardActions:w["a"],VCardTitle:w["c"],VDialog:C["a"],VForm:V["a"],VIcon:T["a"],VSpacer:Y["a"],VTextField:$["a"]});var xt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"400"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{text:""}},"v-btn",r,!1),n),[e._v("Edytuj")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline primary white--text"},[e._v(" Edytuj klienta "),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(t){e.dialog=!1}}},[a("v-icon",{attrs:{color:"white"}},[e._v("mdi-close")])],1)],1),a("v-form",{ref:"form",staticClass:"mx-5",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{staticClass:"mt-4",attrs:{counter:50,rules:e.nameRules,label:"Imię",required:""},model:{value:e.client.name,callback:function(t){e.$set(e.client,"name",t)},expression:"client.name"}}),a("v-text-field",{attrs:{counter:50,rules:e.surnameRules,label:"Nazwisko",required:""},model:{value:e.client.surname,callback:function(t){e.$set(e.client,"surname",t)},expression:"client.surname"}}),a("v-text-field",{attrs:{rules:e.emailRules,label:"Email",required:""},model:{value:e.client.email,callback:function(t){e.$set(e.client,"email",t)},expression:"client.email"}}),a("v-text-field",{attrs:{rules:e.phoneRules,label:"Telefon",required:""},model:{value:e.client.phone,callback:function(t){e.$set(e.client,"phone",t)},expression:"client.phone"}})],1),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Anuluj")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:"",loading:e.loader,disabled:!e.valid},on:{click:e.submit}},[e._v("Zapisz")])],1)],1)],1)},wt=[],kt={name:"EditClient",props:["client"],data:function(){return{addSuccess:!1,timeError:!1,loader:!1,dialog:!1,valid:!0,clientName:"",clientSurname:"",nameRules:[function(e){return!!e||"Imię jest wymagane"},function(e){return e&&e.length<=50||"Imię musi być krótsze niż 50 znaków"}],surnameRules:[function(e){return!!e||"Nazwisko jest wymagane"},function(e){return e&&e.length<=50||"Nazwisko musi być krótsze niż 50 znaków"}],clientEmail:"",emailRules:[function(e){return!!e||"Email jest wymagany"},function(e){return/.+@.+/.test(e)||"Nie poprawny email"}],clientPhone:"",phoneRules:[function(e){return!!e||"Numer telefonu jest wymagany"},function(e){return/^\d{9}$/.test(e)||"Niepoprawny numer telefonu"}]}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["updateClient"])),{},{submit:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:return e.loader=!0,a={id:e.client.id,name:e.client.name,surname:e.client.surname,email:e.client.email,phone:e.client.phone,registered:e.client.registered,plannedcount:e.client.plannedcount,visits:e.client.visits,color:e.client.color,fullname:"".concat(e.client.name," ").concat(e.client.surname)},t.next=6,e.updateClient(a);case 6:e.loader=!1,e.dialog=!1;case 8:case"end":return t.stop()}}),t)})))()}})},yt=kt,Ct=Object(f["a"])(yt,xt,wt,!1,null,null,null),jt=Ct.exports;h()(Ct,{VBtn:_["a"],VCard:x["a"],VCardActions:w["a"],VCardTitle:w["c"],VDialog:C["a"],VForm:V["a"],VIcon:T["a"],VSpacer:Y["a"],VTextField:$["a"]});var Vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"800"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-list-item",e._g(e._b({},"v-list-item",r,!1),n),[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(e.treatment?e.event.clientName:e.event.name))]),a("v-list-item-subtitle",[e._v(e._s(e.event.start))])],1)],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[e._v("Szczegóły zabiegu"),a("v-spacer"),a("v-btn",{attrs:{icon:"",color:"black"},on:{click:function(t){e.dialog=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",{staticClass:"black--text"},[a("v-row",[a("v-col",{attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"caption"},[e._v("Klient")]),a("div",{staticClass:"subtitle-1"},[e._v(e._s(e.event.clientName))])]),a("v-col",{attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"caption mt-1"},[e._v("Zabieg")]),a("div",{staticClass:"subtitle-1"},[e._v(e._s(e.event.name))])]),a("v-col",{attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"caption mt-1"},[e._v("Dodatkowe zabiegi")]),a("div",{staticClass:"subtitle-1"},[e._v(" "+e._s(e.event.additionalTreatments.length>0?e.additionalTreatments:"Brak dodatkowych zabiegów")+" ")])]),a("v-col",{attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"caption mt-1"},[e._v("Wykonawca")]),a("div",{staticClass:"subtitle-1"},[e._v(e._s(e.event.doctor.fullname))])]),a("v-col",{attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"caption mt-1"},[e._v("Termin")]),a("div",{staticClass:"subtitle-1"},[e._v(e._s(e.event.start))])]),a("v-col",{attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"caption mt-1"},[e._v("Przychód")]),a("div",{staticClass:"subtitle-1"},[e._v(e._s(e.event.price)+" zł")])]),a("v-col",{attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"caption mt-1"},[e._v("Ocena")]),a("div",{staticClass:"subtitle-1"},[e._v(e._s(e.event.rate)+"/5")])])],1),a("div",{staticClass:"caption mt-1"},[e._v("Zdjęcia")]),e.event.imageUrls.length>0?a("v-row",e._l(e.event.imageUrls,(function(e){return a("v-col",{key:e,attrs:{cols:"12",md:"4"}},[a("VisitImage",{attrs:{image:e}})],1)})),1):a("div",{staticClass:"subtitle-1"},[e._v("Brak zdjęć")])],1)],1)],1)},Tt=[],zt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-img",e._g(e._b({attrs:{src:e.image}},"v-img",r,!1),n))]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-img",{attrs:{src:e.image}})],1)},St=[],Ot={data:function(){return{dialog:!1}},props:["image"]},Et=Ot,Dt=a("adda"),Rt=Object(f["a"])(Et,zt,St,!1,null,null,null),It=Rt.exports;h()(Rt,{VDialog:C["a"],VImg:Dt["a"]});var At={props:["event","treatment"],components:{VisitImage:It},data:function(){return{dialog:!1}},computed:{additionalTreatments:function(){var e="";return this.event.additionalTreatments.forEach((function(t){e+=t,e+=", "})),e}}},Pt=At,Nt=Object(f["a"])(Pt,Vt,Tt,!1,null,null,null),$t=Nt.exports;h()(Nt,{VBtn:_["a"],VCard:x["a"],VCardText:w["b"],VCardTitle:w["c"],VCol:k["a"],VDialog:C["a"],VIcon:T["a"],VListItem:z["a"],VListItemContent:S["a"],VListItemSubtitle:S["b"],VListItemTitle:S["c"],VRow:D["a"],VSpacer:Y["a"]});var Lt={name:"Clients",components:{AddClient:_t,EditClient:jt,Visit:$t},data:function(){return{tab:null,first:!1,selectedClient:{name:"",surname:"",phone:"",email:""},searchClientId:null,pastvisits:[],plannedvisits:[],visits:0,planvisits:0,deleteEventLoader:!1}},computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])(["getAllClients"])),{},{registeredText:function(){if(this.selectedClient.registered){var e=this.selectedClient.registered.toDate(),t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear();return"".concat(t,".").concat(a,".").concat(n)}return"Brak"}}),methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["removeClient","removeEvent","fetchClientVisits"])),{},{searchSelect:function(){var e=this;void 0!==this.searchClientId&&(this.selectedClient=this.getAllClients.find((function(t){return t.id===e.searchClientId})))},deleteClient:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.removeClient(e);case 2:t.getAllClients.length>0?t.selectedClient=t.getAllClients[0]:t.selectedClient=null;case 3:case"end":return a.stop()}}),a)})))()},eventDeleted:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.selectedClient.plannedvisits=t.selectedClient.plannedvisits.filter((function(t){return t.eventRef.id!==e.id})),t.selectedClient.plannedcount--;case 2:case"end":return a.stop()}}),a)})))()}}),watch:{selectedClient:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e){a.next=8;break}return t.first?t.tab=1:t.first=!0,t.searchClientId=e.id,a.next=5,t.fetchClientVisits(e.id);case 5:n=a.sent,t.plannedvisits=n.plannedvisits,t.pastvisits=n.pastvisits;case 8:case"end":return a.stop()}}),a)})))()}},mounted:function(){this.getAllClients.length>0&&(this.selectedClient=this.getAllClients[0],this.searchClientId=this.getAllClients[0].id)}},Mt=Lt,Ut=Object(f["a"])(Mt,mt,vt,!1,null,null,null),Ht=Ut.exports;h()(Ut,{VAutocomplete:g["a"],VBtn:_["a"],VCard:x["a"],VCol:k["a"],VContainer:ze["a"],VExpansionPanel:Se["a"],VExpansionPanelContent:Oe["a"],VExpansionPanelHeader:Ee["a"],VExpansionPanels:De["a"],VList:B["a"],VListItem:z["a"],VListItemAvatar:ke["a"],VListItemContent:S["a"],VListItemGroup:Z["a"],VListItemSubtitle:S["b"],VListItemTitle:S["c"],VRow:D["a"],VTab:Ae["a"],VTabItem:Pe["a"],VTabs:Ne["a"],VTabsItems:$e["a"]});var Ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{class:e.$vuetify.breakpoint.mobile?"pa-0":"",attrs:{fluid:""}},[a("AddTreatment",{on:{treatmentAdded:function(t){e.selectedTreatment=e.getAllTreatments[0]}}}),e.$vuetify.breakpoint.mobile?a("div",{staticStyle:{height:"100%",width:"100%"}},[a("v-tabs",{attrs:{"background-color":"primary",color:"white",grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(["Lista","Zabieg"],(function(t){return a("v-tab",{key:t},[e._v(" "+e._s(t)+" ")])})),1),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab-item",{staticClass:"pa-4"},[a("v-autocomplete",{attrs:{"no-data-text":"Brak zabiegów","offset-y":"",items:e.getAllTreatments,"item-text":"name","item-value":"id",label:"Zabieg","prepend-icon":"mdi-needle"},on:{change:e.searchSelect},model:{value:e.searchTreatmentId,callback:function(t){e.searchTreatmentId=t},expression:"searchTreatmentId"}}),a("v-list",{attrs:{"max-height":"100%"}},[a("v-list-item-group",e._l(e.getAllTreatments,(function(t){return a("v-list-item",{key:t.id,on:{click:function(a){e.selectedTreatment=t}}},[a("v-list-item-avatar",{staticClass:"white--text",attrs:{color:t.color}},[e._v(e._s(t.name[0]))]),a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.name))])],1)],1)})),1)],1)],1),a("v-tab-item",[a("v-row",{staticClass:"pa-5",staticStyle:{"max-width":"100%"}},[a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Nazwa zabiegu")]),a("div",[e._v(e._s(e.selectedTreatment.name))])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Czas zabiegu")]),a("div",[e._v(" "+e._s(e.selectedTreatment.hours)+" godziny "+e._s(e.selectedTreatment.minutes)+" minuty ")])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Cena")]),a("div",[e._v(e._s(e.selectedTreatment.price)+" zł")])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Wykonano")]),a("div",[e._v(e._s(e.selectedTreatment.visits))])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Zaplanowanych wizyt")]),a("div",[e._v(e._s(e.selectedTreatment.plannedcount))])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Wymagane produkty")]),e._l(e.selectedTreatment.products,(function(t,n){return a("div",{key:n},[e._v(" "+e._s(t.name)+" "+e._s(t.amount)+" "+e._s(t.unit)+" ")])}))],2),a("v-col",{attrs:{cols:"12"}},[a("div",{staticClass:"caption"},[e._v("Opis")]),a("div",[e._v(" "+e._s(""!==e.selectedTreatment.description?e.selectedTreatment.description:"Brak opisu")+" ")])]),a("v-col",{attrs:{cols:"12"}},[a("div",{staticClass:"caption"},[e._v("Zaplanowane wizyty")]),0===e.selectedTreatment.plannedcount||void 0===e.selectedTreatment.plannedcount?a("div",[e._v(" Brak zaplanowanych wizyt ")]):a("div",[a("v-list",{attrs:{"two-line":""}},[a("v-list-item-group",e._l(e.plannedvisits,(function(t){return a("v-list-item",{key:t.id},[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.clientName))]),a("v-list-item-subtitle",[e._v(e._s(t.start)),a("br"),e._v("Status: "),a("span",{class:t.confirmed?"success--text":"error--text"},[e._v(e._s(t.confirmed?"Potwierdzono":"Nie potwierdzono"))])])],1)],1)})),1)],1)],1)]),a("v-col",{attrs:{cols:"12"}},[a("v-expansion-panels",{attrs:{focusable:""}},[a("v-expansion-panel",[a("v-expansion-panel-header",[e._v("Wykonane zabiegi")]),a("v-expansion-panel-content",[a("v-list",[a("v-list-item-group",e._l(e.pastvisits,(function(e){return a("Visit",{key:e.id,attrs:{treatment:!0,event:e}})})),1)],1)],1)],1)],1),void 0!==e.selectedTreatment.id?a("div",{staticClass:"mt-4"},[a("v-btn",{attrs:{text:"",color:"error"},on:{click:function(t){return e.deleteTreatment(e.selectedTreatment.id)}}},[e._v("Usuń")]),a("EditTreatment",{attrs:{treatment:e.selectedTreatment}})],1):e._e()],1)],1)],1)],1)],1):a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12",md:"3"}},[a("v-card",{staticClass:"px-4 pt-2",attrs:{rounded:e.$vuetify.breakpoint.mobile?"xl":""}},[a("v-autocomplete",{attrs:{"no-data-text":"Brak zabiegów","offset-y":"",items:e.getAllTreatments,"item-text":"name","item-value":"id",label:"Zabieg","prepend-icon":"mdi-needle"},on:{change:e.searchSelect},model:{value:e.searchTreatmentId,callback:function(t){e.searchTreatmentId=t},expression:"searchTreatmentId"}}),a("v-list",{staticStyle:{height:"80vh","overflow-y":"scroll"}},[a("v-list-item-group",e._l(e.getAllTreatments,(function(t){return a("v-list-item",{key:t.id,on:{click:function(a){e.selectedTreatment=t}}},[a("v-list-item-avatar",{staticClass:"white--text",attrs:{color:t.color}},[e._v(e._s(t.name[0]))]),a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.name))])],1)],1)})),1)],1)],1)],1),a("v-col",{attrs:{cols:"12",md:"9"}},[a("v-row",{staticClass:"pa-5"},[a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Nazwa zabiegu")]),a("div",[e._v(e._s(e.selectedTreatment.name))])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Czas zabiegu")]),a("div",[e._v(" "+e._s(e.selectedTreatment.hours)+" godziny "+e._s(e.selectedTreatment.minutes)+" minuty ")])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Cena")]),a("div",[e._v(e._s(e.selectedTreatment.price)+" zł")])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Wykonano")]),a("div",[e._v(e._s(e.selectedTreatment.visits))])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Zaplanowanych wizyt")]),a("div",[e._v(e._s(e.selectedTreatment.plannedcount))])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Wymagane produkty")]),e._l(e.selectedTreatment.products,(function(t,n){return a("div",{key:n},[e._v(" "+e._s(t.name)+" "+e._s(t.amount)+" "+e._s(t.unit)+" ")])}))],2),a("v-col",{attrs:{cols:"12"}},[a("div",{staticClass:"caption"},[e._v("Opis")]),a("div",[e._v(" "+e._s(""!==e.selectedTreatment.description?e.selectedTreatment.description:"Brak opisu")+" ")])]),a("v-col",{attrs:{cols:"12"}},[a("div",{staticClass:"caption"},[e._v("Zaplanowane wizyty")]),0===e.selectedTreatment.plannedcount||void 0===e.selectedTreatment.plannedcount?a("div",[e._v(" Brak zaplanowanych wizyt ")]):a("div",[a("v-list",{attrs:{"two-line":""}},[a("v-list-item-group",e._l(e.plannedvisits,(function(t){return a("v-list-item",{key:t.id},[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.clientName))]),a("v-list-item-subtitle",[e._v(e._s(t.start)),a("br"),e._v("Status: "),a("span",{class:t.confirmed?"success--text":"error--text"},[e._v(e._s(t.confirmed?"Potwierdzono":"Nie potwierdzono"))])])],1)],1)})),1)],1)],1)]),a("v-col",{attrs:{cols:"12"}},[a("v-expansion-panels",{attrs:{focusable:""}},[a("v-expansion-panel",[a("v-expansion-panel-header",[e._v("Wykonane zabiegi")]),a("v-expansion-panel-content",[a("v-list",[a("v-list-item-group",e._l(e.pastvisits,(function(e){return a("Visit",{key:e.id,attrs:{treatment:!0,event:e}})})),1)],1)],1)],1)],1),void 0!==e.selectedTreatment.id?a("div",{staticClass:"mt-4"},[a("v-btn",{attrs:{text:"",color:"error"},on:{click:function(t){return e.deleteTreatment(e.selectedTreatment.id)}}},[e._v("Usuń")]),a("EditTreatment",{attrs:{treatment:e.selectedTreatment}})],1):e._e()],1)],1)],1)],1)],1)},qt=[],Bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{fullscreen:e.$vuetify.breakpoint.mobile,"max-width":"400","hide-overlay":e.$vuetify.breakpoint.mobile,transition:e.$vuetify.breakpoint.mobile?"dialog-bottom-transition":"scale-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{fixed:"",bottom:"",right:"",fab:"",color:"secondary"}},"v-btn",r,!1),n),[a("v-icon",{attrs:{large:""}},[e._v("mdi-plus-circle")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline primary white--text"},[e._v(" Dodaj zabieg "),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(t){e.dialog=!1}}},[a("v-icon",{attrs:{color:"white"}},[e._v("mdi-close")])],1)],1),a("div",{staticClass:"mx-auto",staticStyle:{"max-width":"600px"}},[a("v-form",{ref:"form",staticClass:"mx-5",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{staticClass:"mt-4",attrs:{counter:50,rules:e.nameRules,label:"Nazwa zabiegu",required:""},model:{value:e.treatname,callback:function(t){e.treatname=t},expression:"treatname"}}),a("h3",{staticClass:"caption mb-n3 mt-1"},[e._v("Czas zabiegu")]),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-select",{attrs:{items:e.hours,label:"Godziny"},model:{value:e.timeHour,callback:function(t){e.timeHour=t},expression:"timeHour"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-select",{attrs:{items:e.minutes,label:"Minuty"},model:{value:e.timeMinute,callback:function(t){e.timeMinute=t},expression:"timeMinute"}})],1)],1),a("v-text-field",{attrs:{rules:e.priceRules,label:"Cena zabiegu",type:"number",required:""},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}}),a("v-textarea",{attrs:{rows:"1","auto-grow":"",clearable:"",label:"Opis"},model:{value:e.treatmentDesc,callback:function(t){e.treatmentDesc=t},expression:"treatmentDesc"}}),a("v-btn",{staticClass:"mb-2",attrs:{text:"",color:"primary"},on:{click:function(t){return e.products.push({id:null,amount:null})}}},[e._v("Dodaj produkt")]),e._l(e.products,(function(t,n){return a("div",{key:n},[a("v-autocomplete",{staticClass:"mt-2",attrs:{items:e.getAllProducts,"item-text":"name","item-value":"id",label:"Produkt","no-data-text":"Brak produktów",required:""},model:{value:e.products[n].id,callback:function(t){e.$set(e.products[n],"id",t)},expression:"products[i].id"}}),a("div",{staticClass:"d-flex justify-center align-center"},[a("v-text-field",{attrs:{rules:e.amountRules,label:"Ilość wymagana do zabiegu",type:"number",required:""},model:{value:t.amount,callback:function(a){e.$set(t,"amount",a)},expression:"product.amount"}}),a("v-btn",{staticClass:"ml-3",attrs:{icon:""}},[a("v-icon",{attrs:{color:"error"},on:{click:function(t){return e.products.splice(n,1)}}},[e._v("mdi-delete")])],1)],1)],1)})),a("div",{staticClass:"caption mb-2"},[e._v("Kolor")]),a("v-color-picker",{staticClass:"ml-5",attrs:{required:"","hide-inputs":""},model:{value:e.color,callback:function(t){e.color=t},expression:"color"}})],2),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Anuluj")]),a("v-btn",{attrs:{text:""},on:{click:e.reset}},[e._v("resetuj")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:"",loading:e.loader,disabled:!e.valid},on:{click:e.submit}},[e._v("Dodaj")])],1)],1)],1)],1)},Zt=[],Wt={name:"AddTreatment",data:function(){return{products:[],treatmentDesc:"",loader:!1,dialog:!1,valid:!0,hours:[0,1,2,3,4,5,6],minutes:[0,5,10,15,20,30,45],color:"#D9486E",timeHour:null,timeMinute:null,treatname:"",nameRules:[function(e){return!!e||"Nazwa zabiegu jest wymagana"},function(e){return e&&e.length<=50||"Nazwa zabiegu musi być krótsza niż 50 znaków"}],price:null,priceRules:[function(e){return!!e||"Cena zabiegu jest wymagana"},function(e){return e>0||"Cena zabiegu musi być większa od 0"}],amountRules:[function(e){return!!e||"Cena zabiegu jest wymagana"},function(e){return e>0||"Cena zabiegu musi być większa od 0"}]}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["addTreatment"])),{},{submit:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:if(!e.timeHour&&!e.timeMinute){t.next=16;break}return e.timeMinute||(e.timeMinute=0),e.timeHour||(e.timeHour=0),e.products.length>0&&e.products.forEach((function(t){var a=e.getAllProducts.find((function(e){return e.id===t.id}));a&&(t.name=a.name,t.amount=parseFloat(t.amount),t.unit=a.unit,t.ref=e.getUserData.salon.ref.collection("products").doc(a.id),delete t.id)})),a={name:e.treatname,hours:e.timeHour,minutes:e.timeMinute,price:parseFloat(e.price),products:e.products?e.products:[],color:e.color,visits:0,plannedcount:0,description:void 0!==e.treatmentDesc?e.treatmentDesc:""},e.loader=!0,t.next=10,e.addTreatment(a);case 10:e.loader=!1,e.dialog=!1,e.reset(),e.$emit("treatmentAdded"),t.next=18;break;case 16:return e.timeError=!0,t.abrupt("return");case 18:case"end":return t.stop()}}),t)})))()},reset:function(){this.$refs.form.reset(),this.products=[]}}),computed:Object(i["a"])({},Object(u["c"])(["getAllProducts","getUserData"]))},Yt=Wt,Kt=a("03a4"),Gt=a("a844"),Jt=Object(f["a"])(Yt,Bt,Zt,!1,null,null,null),Qt=Jt.exports;h()(Jt,{VAutocomplete:g["a"],VBtn:_["a"],VCard:x["a"],VCardActions:w["a"],VCardTitle:w["c"],VCol:k["a"],VColorPicker:Kt["a"],VDialog:C["a"],VForm:V["a"],VIcon:T["a"],VRow:D["a"],VSelect:R["a"],VSpacer:Y["a"],VTextField:$["a"],VTextarea:Gt["a"]});var Xt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"400"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{text:""}},"v-btn",r,!1),n),[e._v("Edytuj")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline primary white--text"},[e._v(" Edytuj zabieg "),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(t){e.dialog=!1}}},[a("v-icon",{attrs:{color:"white"}},[e._v("mdi-close")])],1)],1),a("v-form",{ref:"form",staticClass:"mx-5",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{staticClass:"mt-4",attrs:{counter:50,rules:e.nameRules,label:"Nazwa zabiegu",required:""},model:{value:e.treatment.name,callback:function(t){e.$set(e.treatment,"name",t)},expression:"treatment.name"}}),a("h3",{staticClass:"caption mb-n3 mt-1"},[e._v("Czas zabiegu")]),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-select",{attrs:{items:e.hours,label:"Godziny"},model:{value:e.treatment.hours,callback:function(t){e.$set(e.treatment,"hours",t)},expression:"treatment.hours"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-select",{attrs:{items:e.minutes,label:"Minuty"},model:{value:e.treatment.minutes,callback:function(t){e.$set(e.treatment,"minutes",t)},expression:"treatment.minutes"}})],1)],1),a("v-text-field",{attrs:{rules:e.priceRules,label:"Cena zabiegu",type:"number",required:""},model:{value:e.treatment.price,callback:function(t){e.$set(e.treatment,"price",t)},expression:"treatment.price"}}),a("v-textarea",{attrs:{rows:"1","auto-grow":"",clearable:"",label:"Opis"},model:{value:e.treatment.description,callback:function(t){e.$set(e.treatment,"description",t)},expression:"treatment.description"}}),a("div",{staticClass:"caption mb-2"},[e._v("Kolor")]),a("v-color-picker",{staticClass:"ml-5",attrs:{required:"","hide-inputs":""},model:{value:e.treatment.color,callback:function(t){e.$set(e.treatment,"color",t)},expression:"treatment.color"}})],1),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Anuluj")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:"",loading:e.loader,disabled:!e.valid},on:{click:e.submit}},[e._v("Zapisz")])],1)],1)],1)},ea=[],ta=(a("a4d3"),a("e01a"),{name:"EditTreatment",props:["treatment"],data:function(){return{addSuccess:!1,timeError:!1,loader:!1,dialog:!1,color:null,valid:!0,hours:[1,2,3,4,5,6],minutes:[0,5,10,15,20,30,45],timeHour:null,timeMinute:null,treatname:"",nameRules:[function(e){return!!e||"Nazwa zabiegu jest wymagana"},function(e){return e&&e.length<=50||"Nazwa zabiegu musi być krótsza niż 50 znaków"}],price:null,priceRules:[function(e){return!!e||"Cena zabiegu jest wymagana"},function(e){return e>0||"Cena zabiegu musi być większa od 0"}]}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["updateTreatment"])),{},{submit:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:if(!e.treatment.hours&&!e.treatment.minutes){t.next=12;break}return e.treatment.minutes||(e.treatment.minutes=0),e.treatment.hours||(e.treatment.hours=0),a={id:e.treatment.id,name:e.treatment.name,hours:e.treatment.hours,minutes:e.treatment.minutes,price:e.treatment.price,color:e.treatment.color,visits:e.treatment.visits,plannedvisits:e.treatment.plannedvisits,pastvisits:e.treatment.pastvisits,description:void 0!==e.treatment.description?e.treatment.description:""},e.loader=!0,t.next=9,e.updateTreatment(a);case 9:e.loader=!1,e.dialog=!1,e.reset();case 12:return t.abrupt("return");case 13:case"end":return t.stop()}}),t)})))()},reset:function(){this.$refs.form.reset()}})}),aa=ta,na=Object(f["a"])(aa,Xt,ea,!1,null,null,null),ra=na.exports;h()(na,{VBtn:_["a"],VCard:x["a"],VCardActions:w["a"],VCardTitle:w["c"],VCol:k["a"],VColorPicker:Kt["a"],VDialog:C["a"],VForm:V["a"],VIcon:T["a"],VRow:D["a"],VSelect:R["a"],VSpacer:Y["a"],VTextField:$["a"],VTextarea:Gt["a"]});var sa={name:"Treatments",components:{AddTreatment:Qt,EditTreatment:ra,Visit:$t},data:function(){return{first:!1,tab:0,selectedTreatment:{name:"",color:"#ffffff",count:0,hours:0,minutes:0,price:0,plannedcount:0},pastvisits:[],plannedvisits:[],searchTreatmentId:null}},computed:Object(i["a"])({},Object(u["c"])(["getAllTreatments"])),methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["removeTreatment","fetchTreatmentVisits"])),{},{getRandomColor:function(){return"#"+Math.floor(16777215*Math.random()).toString(16)},searchSelect:function(){var e=this;void 0!==this.searchTreatmentId&&(this.selectedTreatment=this.getAllTreatments.find((function(t){return t.id===e.searchTreatmentId})))},deleteTreatment:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.removeTreatment(e);case 2:t.getAllTreatments.length>0?t.selectedTreatment=t.getAllTreatments[1]:t.selectedTreatment=null;case 3:case"end":return a.stop()}}),a)})))()},eventDeleted:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.selectedTreatment.plannedvisits=t.selectedTreatment.plannedvisits.filter((function(t){return t.eventRef.id!==e.id})),t.selectedTreatment.plannedcount--;case 2:case"end":return a.stop()}}),a)})))()}}),watch:{selectedTreatment:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e){a.next=8;break}return t.first?t.tab=1:t.first=!0,t.searchTreatmentId=e.id,a.next=5,t.fetchTreatmentVisits(e.id);case 5:n=a.sent,t.plannedvisits=n.plannedvisits,t.pastvisits=n.pastvisits;case 8:case"end":return a.stop()}}),a)})))()}},mounted:function(){this.getAllTreatments.length>0&&(this.selectedTreatment=this.getAllTreatments[0],this.searchTreatmentId=this.getAllTreatments[0].id)}},ia=sa,oa=Object(f["a"])(ia,Ft,qt,!1,null,null,null),ca=oa.exports;h()(oa,{VAutocomplete:g["a"],VBtn:_["a"],VCard:x["a"],VCol:k["a"],VContainer:ze["a"],VExpansionPanel:Se["a"],VExpansionPanelContent:Oe["a"],VExpansionPanelHeader:Ee["a"],VExpansionPanels:De["a"],VList:B["a"],VListItem:z["a"],VListItemAvatar:ke["a"],VListItemContent:S["a"],VListItemGroup:Z["a"],VListItemSubtitle:S["b"],VListItemTitle:S["c"],VRow:D["a"],VTab:Ae["a"],VTabItem:Pe["a"],VTabs:Ne["a"],VTabsItems:$e["a"]});var la=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{class:e.$vuetify.breakpoint.mobile?"pa-0":"",attrs:{fluid:""}},[a("AddProduct",{on:{productAdded:function(t){e.selectedProduct=e.getAllProducts[0]}}}),e.$vuetify.breakpoint.mobile?a("div",{staticStyle:{height:"100%",width:"100%"}},[a("v-tabs",{attrs:{"background-color":"primary",color:"white",grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(["Lista","Produkt"],(function(t){return a("v-tab",{key:t},[e._v(" "+e._s(t)+" ")])})),1),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab-item",{staticClass:"pa-4"},[a("v-autocomplete",{attrs:{"no-data-text":"Brak produktów","offset-y":"",items:e.getAllProducts,"item-text":"name","item-value":"id",label:"Produkt","prepend-icon":"mdi-account-search-outline"},on:{change:e.searchSelect},model:{value:e.searchProductId,callback:function(t){e.searchProductId=t},expression:"searchProductId"}}),a("v-list",{attrs:{"three-line":"","max-height":"100%"}},[a("v-list-item-group",e._l(e.getAllProducts,(function(t){return a("v-list-item",{key:t.id,on:{click:function(a){e.selectedProduct=t}}},[a("v-list-item-avatar",{staticClass:"white--text",attrs:{color:t.color}},[e._v(e._s(t.name[0]))]),a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.name))]),a("v-list-item-subtitle",[e._v("Obecnie: "+e._s(t.amount)+" "+e._s(t.unit)),a("br"),e._v(" Pozostanie: "),a("span",{class:t.plannedAmount<t.newAmount?"error--text":""},[e._v(e._s(t.plannedAmount)+" "+e._s(t.unit))])])],1)],1)})),1)],1)],1),a("v-tab-item",[a("v-row",{staticClass:"pa-5",staticStyle:{"max-width":"100%"}},[a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Nazwa")]),a("div",[e._v(e._s(e.selectedProduct.name))])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Producent")]),a("div",[e._v(e._s(e.selectedProduct.producer))])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Ilość w opakowaniu")]),a("div",[e._v(" "+e._s(e.selectedProduct.newAmount)+" "+e._s(e.selectedProduct.unit)+" ")])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Dodano")]),a("div",[e._v(e._s(e.registeredText))])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Pozostało")]),a("div",[e._v(e._s(e.selectedProduct.amount)+" "+e._s(e.selectedProduct.unit))])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Pozostanie")]),a("div",[e._v(" "+e._s(e.selectedProduct.plannedAmount)+" "+e._s(e.selectedProduct.unit)+" ")])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Użyto")]),a("div",[e._v(" "+e._s(e.selectedProduct.used)+" "+e._s(1===e.selectedProduct.used?"raz":"razy")+" ")])]),a("v-col",{attrs:{cols:"12"}},[a("div",{staticClass:"mt-4"},[void 0!==e.selectedProduct.id?a("v-btn",{attrs:{text:"",color:"error"},on:{click:function(t){return e.deleteProduct(e.selectedProduct.id)}}},[e._v("Usuń")]):e._e()],1)])],1)],1)],1)],1):a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12",md:"3"}},[a("v-card",{staticClass:"px-4 pt-2"},[a("v-autocomplete",{attrs:{"no-data-text":"Brak produktów","offset-y":"",items:e.getAllProducts,"item-text":"name","item-value":"id",label:"Produkt","prepend-icon":"mdi-account-search-outline"},on:{change:e.searchSelect},model:{value:e.searchProductId,callback:function(t){e.searchProductId=t},expression:"searchProductId"}}),a("v-list",{staticStyle:{height:"80vh","overflow-y":"scroll"},attrs:{"three-line":""}},[a("v-list-item-group",e._l(e.getAllProducts,(function(t){return a("v-list-item",{key:t.id,on:{click:function(a){e.selectedProduct=t}}},[a("v-list-item-avatar",{staticClass:"white--text",attrs:{color:t.color}},[e._v(e._s(t.name[0]))]),a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.name))]),a("v-list-item-subtitle",[e._v("Obecnie: "+e._s(t.amount)+" "+e._s(t.unit)),a("br"),e._v(" Pozostanie: "),a("span",{class:t.plannedAmount<t.newAmount?"error--text":""},[e._v(e._s(t.plannedAmount)+" "+e._s(t.unit))])])],1)],1)})),1)],1)],1)],1),a("v-col",{attrs:{cols:"12",md:"9"}},[a("v-row",{staticClass:"pa-5"},[a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Nazwa")]),a("div",[e._v(e._s(e.selectedProduct.name))])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Producent")]),a("div",[e._v(e._s(e.selectedProduct.producer))])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Ilość w opakowaniu")]),a("div",[e._v(" "+e._s(e.selectedProduct.newAmount)+" "+e._s(e.selectedProduct.unit)+" ")])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Dodano")]),a("div",[e._v(e._s(e.registeredText))])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Pozostało")]),a("div",[e._v(e._s(e.selectedProduct.amount)+" "+e._s(e.selectedProduct.unit))])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Pozostanie")]),a("div",[e._v(" "+e._s(e.selectedProduct.plannedAmount)+" "+e._s(e.selectedProduct.unit)+" ")])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"caption"},[e._v("Użyto")]),a("div",[e._v(" "+e._s(e.selectedProduct.used)+" "+e._s(1===e.selectedProduct.used?"raz":"razy")+" ")])]),a("v-col",{attrs:{cols:"12"}},[a("div",{staticClass:"mt-4"},[void 0!==e.selectedProduct.id?a("v-btn",{attrs:{text:"",color:"error"},on:{click:function(t){return e.deleteProduct(e.selectedProduct.id)}}},[e._v("Usuń")]):e._e()],1)])],1)],1)],1)],1)},ua=[],da=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{fullscreen:e.$vuetify.breakpoint.mobile,"max-width":"400","hide-overlay":e.$vuetify.breakpoint.mobile,transition:e.$vuetify.breakpoint.mobile?"dialog-bottom-transition":"scale-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{fixed:"",bottom:"",right:"",fab:"",color:"secondary"}},"v-btn",r,!1),n),[a("v-icon",{attrs:{large:""}},[e._v("mdi-plus-circle")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline primary white--text"},[e._v(" Dodaj produkt "),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(t){e.dialog=!1}}},[a("v-icon",{attrs:{color:"white"}},[e._v("mdi-close")])],1)],1),a("div",{staticClass:"mx-auto",staticStyle:{"max-width":"600px"}},[a("v-form",{ref:"form",staticClass:"mx-5",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{staticClass:"mt-4",attrs:{counter:50,rules:e.nameRules,label:"Nazwa produktu",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-text-field",{staticClass:"mt-4",attrs:{counter:50,rules:e.producerRules,label:"Nazwa producenta"},model:{value:e.producer,callback:function(t){e.producer=t},expression:"producer"}}),a("v-select",{staticClass:"mt-4",attrs:{rules:e.unitRules,items:e.units,label:"Jednostka ilości",required:""},model:{value:e.unit,callback:function(t){e.unit=t},expression:"unit"}}),a("v-text-field",{attrs:{rules:e.priceRules,label:"Cena produktu",type:"number",required:""},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}}),a("v-text-field",{attrs:{rules:e.newAmountRules,label:"Ilość produktu w opkakowaniu",type:"number",required:""},model:{value:e.newAmount,callback:function(t){e.newAmount=t},expression:"newAmount"}}),a("v-text-field",{attrs:{rules:e.amountRules,label:"Ilość produktu w magazynie",type:"number"},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}}),a("v-textarea",{attrs:{rows:"1","auto-grow":"",clearable:"",label:"Opis"},model:{value:e.productDesc,callback:function(t){e.productDesc=t},expression:"productDesc"}}),a("div",{staticClass:"caption mb-2"},[e._v("Kolor")]),a("v-color-picker",{staticClass:"ml-5",attrs:{required:"","hide-inputs":""},model:{value:e.color,callback:function(t){e.color=t},expression:"color"}})],1),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Anuluj")]),a("v-btn",{attrs:{text:""},on:{click:e.reset}},[e._v("resetuj")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:"",loading:e.loader,disabled:!e.valid},on:{click:e.submit}},[e._v("Dodaj")])],1)],1)],1)],1)},ma=[],va={data:function(){return{productDesc:"",loader:!1,dialog:!1,valid:!0,color:"#D9486E",name:"",nameRules:[function(e){return!!e||"Nazwa produktu jest wymagana"},function(e){return e&&e.length<=50||"Nazwa produktu musi być krótsza niż 50 znaków"}],producer:"",producerRules:[function(e){return e&&e.length<=50||"Nazwa producenta musi być krótsza niż 50 znaków"}],unit:"",unitRules:[function(e){return!!e||"Jednostka jest wymagana"}],units:["szt","mg","ml","g","l","kg","j"],amount:null,amountRules:[function(e){return e>=0||"Obecna ilość produku musi być większa lub równa 0"}],newAmount:null,newAmountRules:[function(e){return!!e||"Ilość produktu w nowym opakowaniu jest wymagana"},function(e){return e>0||"Ilość produktu w nowym opakowaniu musi być większa od 0"}],price:null,priceRules:[function(e){return!!e||"Cena produktu jest wymagana"},function(e){return e>0||"Cena produktu musi być większa od 0"}]}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["addProduct"])),{},{submit:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:return a={name:e.name,producer:e.producer?e.producer:"Brak producenta",amount:e.amount?parseFloat(e.amount):0,price:parseFloat(e.price),color:e.color,description:void 0!==e.productDesc?e.productDesc:"",unit:e.unit,newAmount:parseFloat(e.newAmount),plannedAmount:e.amount?parseFloat(e.amount):0,used:0,registered:new Date},e.loader=!0,t.next=6,e.addProduct(a);case 6:e.loader=!1,e.dialog=!1,e.reset(),e.$emit("productAdded");case 10:case"end":return t.stop()}}),t)})))()},reset:function(){this.$refs.form.reset()}})},pa=va,fa=Object(f["a"])(pa,da,ma,!1,null,null,null),ba=fa.exports;h()(fa,{VBtn:_["a"],VCard:x["a"],VCardActions:w["a"],VCardTitle:w["c"],VColorPicker:Kt["a"],VDialog:C["a"],VForm:V["a"],VIcon:T["a"],VSelect:R["a"],VSpacer:Y["a"],VTextField:$["a"],VTextarea:Gt["a"]});var ha={name:"Clients",components:{AddProduct:ba},data:function(){return{tab:0,first:!1,selectedProduct:{name:"",description:"",producer:"",unit:"",price:null,amount:null,newAmount:null,plannedAmount:null,used:null},searchProductId:null}},computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])(["getAllProducts"])),{},{registeredText:function(){if(this.selectedProduct.registered){var e=this.selectedProduct.registered.toDate(),t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear();return"".concat(t,".").concat(a,".").concat(n)}return"Brak"}}),methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["removeProduct"])),{},{searchSelect:function(){var e=this;void 0!==this.searchProductId&&(this.selectedProduct=this.getAllProducts.find((function(t){return t.id===e.searchProductId})))},deleteProduct:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.removeProduct(e);case 2:t.getAllProducts.length>0?t.selectedProduct=t.getAllProducts[0]:t.selectedProduct=null;case 3:case"end":return a.stop()}}),a)})))()}}),watch:{selectedProduct:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e&&(t.first?t.tab=1:t.first=!0,t.searchProductId=e.id);case 1:case"end":return a.stop()}}),a)})))()}},mounted:function(){this.getAllProducts.length>0&&(this.selectedProduct=this.getAllProducts[0],this.searchProductId=this.getAllProducts[0].id)}},ga=ha,_a=Object(f["a"])(ga,la,ua,!1,null,null,null),xa=_a.exports;h()(_a,{VAutocomplete:g["a"],VBtn:_["a"],VCard:x["a"],VCol:k["a"],VContainer:ze["a"],VList:B["a"],VListItem:z["a"],VListItemAvatar:ke["a"],VListItemContent:S["a"],VListItemGroup:Z["a"],VListItemSubtitle:S["b"],VListItemTitle:S["c"],VRow:D["a"],VTab:Ae["a"],VTabItem:Pe["a"],VTabs:Ne["a"],VTabsItems:$e["a"]});var wa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"today"},[a("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[a("v-sheet",{attrs:{height:"64"}},[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-btn",{staticClass:"mr-4",attrs:{outlined:"",color:"grey darken-2"},on:{click:e.setToday}},[e._v("Dzisiaj")]),a("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.prev}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-chevron-left")])],1),a("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.next}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-chevron-right")])],1),e.$refs.calendar?a("v-toolbar-title",[e._v(e._s(e.$refs.calendar.title))]):e._e(),a("v-spacer")],1)],1),a("v-sheet",{attrs:{height:"600"}},[a("v-calendar",{ref:"calendar",attrs:{color:"primary",type:"category","category-show-all":"",categories:e.categories,events:e.getAllEvents,"event-color":e.getEventColor,locale:"pl-PL"},on:{"click:event":e.showEvent},scopedSlots:e._u([{key:"day-body",fn:function(t){var n=t.date,r=t.week;return[a("div",{staticClass:"v-current-time",class:{first:n===r[0].date},style:{top:e.nowY}})]}}]),model:{value:e.focus,callback:function(t){e.focus=t},expression:"focus"}}),a("v-menu",{attrs:{"close-on-content-click":!1,activator:e.selectedElement,"offset-x":""},model:{value:e.selectedOpen,callback:function(t){e.selectedOpen=t},expression:"selectedOpen"}},[a("v-card",{attrs:{color:"grey lighten-4","max-width":"350",flat:""}},[a("v-toolbar",{attrs:{color:e.selectedEvent.color,dark:""}},[a("v-toolbar-title",[e._v(e._s(e.selectedEvent.name))])],1),a("v-expansion-panels",[a("v-expansion-panel",[a("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[a("v-icon",{attrs:{color:"primary"}},[e._v("mdi-account")])]},proxy:!0}])},[e._v(" Klient: "+e._s(e.selectedEvent.clientName)+" ")]),a("v-expansion-panel-content",[a("v-simple-table",[a("tbody",[a("tr",[a("td",[e._v("Imię")]),a("td",[e._v(e._s(e.selectedClient.name))])]),a("tr",[a("td",[e._v("Nazwisko")]),a("td",[e._v(e._s(e.selectedClient.surname))])]),a("tr",[a("td",[e._v("Telefon")]),a("td",[a("a",{attrs:{href:"tel:"+e.selectedClient.phone}},[e._v(e._s(e.selectedClient.phone))])])]),a("tr",[a("td",[e._v("Email")]),a("td",[a("a",{attrs:{href:"mailto:"+e.selectedClient.email}},[e._v(e._s(e.selectedClient.email))])])]),a("tr",[a("td",[e._v("Wizyt")]),a("td",[e._v(e._s(e.selectedClient.visits))])])])])],1)],1),a("v-expansion-panel",[a("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[a("v-icon",{attrs:{color:"primary"}},[e._v("mdi-needle")])]},proxy:!0}])},[e._v(" Zabieg: "+e._s(e.selectedTreatment.name)+" ")]),a("v-expansion-panel-content",[a("v-simple-table",[a("tbody",[a("tr",[a("td",[e._v("Zabieg")]),a("td",[e._v(e._s(e.selectedTreatment.name))])]),a("tr",[a("td",[e._v("Czas")]),a("td",[e._v(" "+e._s(e.selectedTreatment.hours)+" godziny "+e._s(e.selectedTreatment.minutes)+" minuty ")])]),a("tr",[a("td",[e._v("Cena")]),a("td",[e._v(e._s(e.selectedTreatment.price)+"zł")])]),a("tr",[a("td",[e._v("Wykonano")]),a("td",[e._v(e._s(e.selectedTreatment.visits))])])])])],1)],1),a("v-expansion-panel",[a("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[a("v-icon",{attrs:{color:e.selectedEvent.confirmed?"success":"error"}},[e._v(e._s(e.selectedEvent.confirmed?"mdi-check":"mdi-close-circle"))])]},proxy:!0}])},[e._v(" Status:"),a("span",{staticClass:"ml-1",class:e.selectedEvent.confirmed?"success--text":"error--text"},[e._v(" "+e._s(e.selectedEvent.confirmed?"Potwierdzono":"Nie potwierdzono"))])])],1)],1),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"black"},on:{click:function(t){e.selectedOpen=!1}}},[e._v("anuluj")]),a("v-spacer"),e.selectedEvent.archived?e._e():a("EventSummary",{attrs:{event:e.selectedEvent},on:{archived:function(t){e.selectedOpen=!1}}})],1)],1)],1)],1)],1)],1)},ka=[],ya={name:"Today",data:function(){return{focus:"",value:"",ready:!1,selectedEvent:{},selectedTreatment:{},selectedClient:{},selectedElement:null,selectedOpen:!1}},components:{EventSummary:be},mounted:function(){this.ready=!0,this.scrollToTime(),this.updateTime()},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["archiveEvent"])),{},{getEventColor:function(e){return e.archived?"#969696":e.color},setToday:function(){this.focus=""},prev:function(){this.$refs.calendar.prev()},next:function(){this.$refs.calendar.next()},getCurrentTime:function(){return this.cal?60*this.cal.times.now.hour+this.cal.times.now.minute:0},scrollToTime:function(){var e=this.getCurrentTime(),t=Math.max(0,e-e%30-30);this.cal.scrollToTime(t)},updateTime:function(){var e=this;setInterval((function(){return e.cal.updateTimes()}),6e4)},showEvent:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.nativeEvent,r=e.event,s=function(){t.selectedEvent=r,t.selectedElement=n.target,setTimeout((function(){return t.selectedOpen=!0}),10)},t.selectedOpen?(t.selectedOpen=!1,setTimeout(s,10)):s(),n.stopPropagation(),a.next=6,t.selectedEvent.clientRef.get();case 6:return i=a.sent,t.selectedClient=i.data(),t.selectedClient.id=i.id,a.next=11,t.selectedEvent.treatmentRef.get();case 11:o=a.sent,t.selectedTreatment=o.data(),t.selectedTreatment.id=o.id;case 14:case"end":return a.stop()}}),a)})))()}}),computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])(["getAllEvents","getSalon"])),{},{cal:function(){return this.ready?this.$refs.calendar:null},nowY:function(){return this.cal?this.cal.timeToY(this.cal.times.now)+"px":"-10px"},categories:function(){var e=[];return this.getSalon.users.forEach((function(t){t.doctor&&e.push("".concat(t.name," ").concat(t.surname))})),e}})},Ca=ya,ja=(a("15da"),Object(f["a"])(Ca,wa,ka,!1,null,null,null)),Va=ja.exports;h()(ja,{VBtn:_["a"],VCalendar:Te["a"],VCard:x["a"],VCardActions:w["a"],VContainer:ze["a"],VExpansionPanel:Se["a"],VExpansionPanelContent:Oe["a"],VExpansionPanelHeader:Ee["a"],VExpansionPanels:De["a"],VIcon:T["a"],VMenu:E["a"],VSheet:Re["a"],VSimpleTable:Ie["a"],VSpacer:Y["a"],VToolbar:Le["a"],VToolbarTitle:K["a"]});var Ta=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"confirms",class:e.$vuetify.breakpoint.mobile?"pa-0":"",attrs:{fluid:""}},[e.$vuetify.breakpoint.mobile?a("div",{staticStyle:{height:"100%",width:"100%"}},[a("v-tabs",{attrs:{"background-color":"primary",color:"white",grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(["Dzisiaj","Jutro","Pojutrze"],(function(t){return a("v-tab",{key:t},[e._v(" "+e._s(t)+" ")])})),1),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.days,(function(t){return a("v-tab-item",{key:t.name,staticClass:"pa-4"},[t.list.length>0?a("v-list",{staticClass:"desktop",attrs:{"min-height":"83.1vh","max-height":"100%","three-line":""}},[a("v-list-item-group",e._l(t.list,(function(e){return a("ConfirmEventItem",{key:e.id,attrs:{event:e}})})),1)],1):a("div",{staticClass:"d-flex"},[a("v-icon",{staticClass:"fab mr-3",attrs:{size:e.$vuetify.breakpoint.mobile?30:50,color:"success"}},[e._v("mdi-check-circle")]),a("div",{staticClass:"mt-md-2 text-subtitle-1 font-weight-regular text-md-h5 success--text"},[e._v(" Wszystkie zabiegi potwierdzone ")])],1)],1)})),1)],1):a("v-row",e._l(e.days,(function(t){return a("v-col",{key:t.name,attrs:{cols:"12",md:"4"}},[a("v-card",{staticClass:"pb-4 px-3",attrs:{elevation:"12"}},[a("v-card-title",{staticClass:"text-h4 grey--text text--darken-2"},[e._v(e._s(t.name))]),t.list.length>0?a("v-list",{staticClass:"desktop",attrs:{"three-line":""}},[a("v-list-item-group",e._l(t.list,(function(e){return a("ConfirmEventItem",{key:e.id,attrs:{event:e}})})),1)],1):a("div",{staticClass:"d-flex"},[a("v-icon",{staticClass:"fab mr-3",attrs:{size:e.$vuetify.breakpoint.mobile?30:50,color:"success"}},[e._v("mdi-check-circle")]),a("div",{staticClass:"mt-md-2 text-subtitle-1 font-weight-regular text-md-h5 success--text"},[e._v(" Wszystkie zabiegi potwierdzone ")])],1)],1)],1)})),1)],1)},za=[],Sa={data:function(){return{tab:0}},components:{ConfirmEventItem:Ce},computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])(["getTodayNotConfirmedEvents","getTomorrowNotConfirmedEvents","getDayAfterNotConfirmedEvents"])),{},{days:function(){return[{name:"Dzisiaj",list:this.getTodayNotConfirmedEvents},{name:"Jutro",list:this.getTomorrowNotConfirmedEvents},{name:"Pojutrze",list:this.getDayAfterNotConfirmedEvents}]}})},Oa=Sa,Ea=(a("585c"),Object(f["a"])(Oa,Ta,za,!1,null,"cac30640",null)),Da=Ea.exports;h()(Ea,{VCard:x["a"],VCardTitle:w["c"],VCol:k["a"],VContainer:ze["a"],VIcon:T["a"],VList:B["a"],VListItemGroup:Z["a"],VRow:D["a"],VTab:Ae["a"],VTabItem:Pe["a"],VTabs:Ne["a"],VTabsItems:$e["a"]});var Ra=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-card",{staticClass:"mt-15 mx-auto px-5",attrs:{"max-width":"500px"}},[a("v-card-title",{staticClass:"grey--text"},[e._v("Logowanie")]),a("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{rules:e.emailRules,label:"E-mail",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{"append-icon":e.show?"mdi-eye":"mdi-eye-off",rules:e.passwordRules,type:e.show?"text":"password",label:"Hasło",hint:"Conajmniej 6 znaków",counter:""},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("v-card-actions",[a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:e.reset}},[e._v("resetuj")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:"",loading:e.loader,disabled:!e.valid},on:{click:e.logInClick}},[e._v("zaloguj")])],1)],1)],1)],1)},Ia=[],Aa={data:function(){return{show:!1,loader:!1,valid:!0,email:"",emailRules:[function(e){return!!e||"E-mail jest wymagany"},function(e){return/.+@.+\..+/.test(e)||"E-mail musi być poprawny"}],password:"",passwordRules:[function(e){return!!e||"Hasło jest wymagane"},function(e){return e.length>=6||"Conajmniej 6 znaków"}]}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["logIn"])),{},{validate:function(){this.$refs.form.validate()},reset:function(){this.$refs.form.reset(),this.email="",this.password=""},resetValidation:function(){this.$refs.form.resetValidation()},logInClick:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:return e.loader=!0,a={email:e.email,password:e.password},t.next=6,e.logIn(a);case 6:e.loader=!1;case 7:case"end":return t.stop()}}),t)})))()}}),computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])(["getUser"])),{},{user:function(){return this.getUser}}),watch:{user:function(e){null!==e&&void 0!==e&&this.$router.push("/")}}},Pa=Aa,Na=Object(f["a"])(Pa,Ra,Ia,!1,null,null,null),$a=Na.exports;h()(Na,{VBtn:_["a"],VCard:x["a"],VCardActions:w["a"],VCardTitle:w["c"],VContainer:ze["a"],VForm:V["a"],VSpacer:Y["a"],VTextField:$["a"]});var La=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-card",{staticClass:"mt-5 mx-auto",attrs:{"max-width":"600px"}},[a("v-stepper",{model:{value:e.el,callback:function(t){e.el=t},expression:"el"}},[a("v-stepper-header",[a("v-stepper-step",{attrs:{complete:e.el>1,step:"1"}},[e._v("Rejestracja")]),a("v-divider"),a("v-stepper-step",{attrs:{complete:e.el>2,step:"2"}},[e._v("Wybierz salon")]),a("v-divider")],1),a("v-stepper-items",[a("v-stepper-content",{attrs:{step:"1"}},[a("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{rules:e.emailRules,label:"E-mail",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{"append-icon":e.show?"mdi-eye":"mdi-eye-off",rules:e.passwordRules,type:e.show?"text":"password",label:"Hasło",hint:"Conajmniej 6 znaków",counter:""},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-text-field",{attrs:{counter:50,rules:e.nameRules,label:"Imię",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-text-field",{attrs:{counter:50,rules:e.surnameRules,label:"Nazwisko",required:""},model:{value:e.surname,callback:function(t){e.surname=t},expression:"surname"}}),a("v-text-field",{attrs:{rules:e.phoneRules,label:"Telefon",required:""},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),a("div",{staticClass:"d-inline"},[a("v-btn",{attrs:{text:""},on:{click:e.reset}},[e._v("resetuj")]),a("v-btn",{attrs:{color:"primary",text:"",loading:e.loader,disabled:!e.valid},on:{click:e.register}},[e._v("zarejestruj")])],1)],1),a("v-stepper-content",{attrs:{step:"2"}},[a("v-row",[a("v-col",{attrs:{cols:"9"}},[a("v-text-field",{attrs:{placeholder:"ACFXYY",label:"Klucz salonu",rules:e.salon_keyRules},model:{value:e.salon_key,callback:function(t){e.salon_key=t},expression:"salon_key"}})],1),a("v-col",{attrs:{cols:"3"}},[a("v-btn",{staticClass:"mt-3",attrs:{color:"primary",loading:e.joinLoader},on:{click:function(t){return t.preventDefault(),e.joinSalonClick(t)}}},[e._v("Dołącz")])],1),a("v-col",{attrs:{cols:"12"}},[a("div",{staticClass:"text-h5 grey--text text-center"},[e._v("lub")])]),a("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[a("v-btn",{attrs:{color:"primary"}},[e._v("Stwórz swój salon")])],1)],1)],1)],1)],1)],1)],1)},Ma=[],Ua={data:function(){return{el:1,show:!1,loader:!1,joinLoader:!1,valid:!0,name:null,surname:null,phone:null,phoneRules:[function(e){return!!e||"Numer telefonu jest wymagany"},function(e){return/^\d{9}$/.test(e)||"Niepoprawny numer telefonu"}],nameRules:[function(e){return!!e||"Imię jest wymagane"},function(e){return e&&e.length<=50||"Imię musi być krótsze niż 50 znaków"}],surnameRules:[function(e){return!!e||"Nazwisko jest wymagane"},function(e){return e&&e.length<=50||"Nazwisko musi być krótsze niż 50 znaków"}],email:"",emailRules:[function(e){return!!e||"E-mail jest wymagany"},function(e){return/.+@.+\..+/.test(e)||"E-mail musi być poprawny"}],password:"",passwordRules:[function(e){return!!e||"Hasło jest wymagane"},function(e){return e.length>=6||"Conajmniej 6 znaków"}],salon_key:"",salon_keyRules:[function(e){return!!e||"Klucz salonu jest wymagany"},function(e){return 6===e.length||"Klucz musi składać się z 6 znaków"}]}},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["registerUser","joinSalon"])),{},{validate:function(){this.$refs.form.validate()},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},register:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:return e.loader=!0,a={email:e.email,password:e.password,name:e.name,surname:e.surname,phone:e.phone},t.next=6,e.registerUser(a);case 6:e.loader=!1,e.el=2;case 8:case"end":return t.stop()}}),t)})))()},joinSalonClick:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.joinLoader=!0,t.next=3,e.joinSalon(e.salon_key);case 3:a=t.sent,e.joinLoader=!1,a&&e.$router.push("/");case 6:case"end":return t.stop()}}),t)})))()}})},Ha=Ua,Fa=Object(f["a"])(Ha,La,Ma,!1,null,null,null),qa=Fa.exports;h()(Fa,{VBtn:_["a"],VCard:x["a"],VCol:k["a"],VContainer:ze["a"],VDivider:j["a"],VForm:V["a"],VRow:D["a"],VStepper:I["a"],VStepperContent:A["a"],VStepperHeader:P["a"],VStepperItems:P["b"],VStepperStep:N["a"],VTextField:$["a"]});var Ba=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",{staticClass:"mt-4"},[a("v-col",{attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"text-h4 grey--text mb-5"},[e._v("Ustawienia salonu")]),a("v-text-field",{attrs:{rules:e.nameRules,label:"Nazwa salonu",counter:50,required:"",disabled:e.disableName},model:{value:e.getSalon.name,callback:function(t){e.$set(e.getSalon,"name",t)},expression:"getSalon.name"}}),e.disableName?a("v-btn",{staticClass:"ml-n3 mt-n3",attrs:{text:""},on:{click:function(t){e.disableName=!1}}},[e._v("edytuj")]):a("v-btn",{staticClass:"ml-n3 mt-n3",attrs:{text:"",loading:e.loader},on:{click:e.saveClick}},[e._v("zapisz")])],1),a("v-col",{attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"text-h4 grey--text"},[e._v("Pracownicy")]),a("v-list",[a("v-list-item-group",e._l(e.getSalon.users,(function(e,t){return a("User",{key:t,attrs:{user:e}})})),1)],1)],1)],1)],1)},Za=[],Wa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-list-item",e._g(e._b({},"v-list-item",r,!1),n),[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(e.user.name)+" "+e._s(e.user.surname))])],1)],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[e._v(e._s(e.user.name)+" "+e._s(e.user.surname))]),a("v-card-text",[a("div",{staticClass:"caption"},[e._v("Imię i nazwisko")]),a("div",{staticClass:"text-subtitle-1 black--text"},[e._v(e._s(e.user.name)+" "+e._s(e.user.surname))]),e.user.doctor?a("div",[a("div",{staticClass:"caption"},[e._v("Wykonanych wizyt")]),a("div",{staticClass:"text-subtitle-1 black--text"},[e._v(e._s(e.user.visits))])]):a("div",[a("div",{staticClass:"caption"},[e._v("Rola")]),a("div",{staticClass:"text-subtitle-1 black--text"},[e._v("Menedżer")])])]),a("v-card-actions",[e.user.doctor?a("v-btn",{attrs:{color:"primary",text:""},on:{click:e.roleClick}},[e._v("ustaw jako menadżera")]):a("v-btn",{attrs:{color:"primary",text:""},on:{click:e.roleClick}},[e._v("ustaw jako doktora")]),a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:function(t){e.dialog=!1}}},[e._v("anuluj")])],1)],1)],1)},Ya=[],Ka={data:function(){return{dialog:!1,loader:!1}},props:["user"],methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["setDoctor"])),{},{roleClick:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loader=!0,a={},a.doctor=!e.user.doctor,a.ref=e.user.ref,t.next=6,e.setDoctor(a);case 6:e.loader=!1,e.dialog=!1;case 8:case"end":return t.stop()}}),t)})))()}})},Ga=Ka,Ja=Object(f["a"])(Ga,Wa,Ya,!1,null,null,null),Qa=Ja.exports;h()(Ja,{VBtn:_["a"],VCard:x["a"],VCardActions:w["a"],VCardText:w["b"],VCardTitle:w["c"],VDialog:C["a"],VListItem:z["a"],VListItemContent:S["a"],VListItemTitle:S["c"],VSpacer:Y["a"]});var Xa={data:function(){return{disableName:!0,loader:!1,nameRules:[function(e){return!!e||"Nazwa salonu jest wymagana"},function(e){return e.length<=50||"Nazwa musi być krótsza niż 50 znaków"}]}},computed:Object(i["a"])({},Object(u["c"])(["getSalon"])),components:{User:Qa},methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["setSalonName"])),{},{saveClick:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loader=!0,t.next=3,e.setSalonName(e.getSalon.name);case 3:e.loader=!1,e.disableName=!0;case 5:case"end":return t.stop()}}),t)})))()}})},en=Xa,tn=Object(f["a"])(en,Ba,Za,!1,null,null,null),an=tn.exports;h()(tn,{VBtn:_["a"],VCol:k["a"],VContainer:ze["a"],VList:B["a"],VListItemGroup:Z["a"],VRow:D["a"],VTextField:$["a"]});var nn,rn,sn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("div",{staticClass:"text-h4 grey--text mt-2 mb-5",domProps:{textContent:e._s(e.statsString)}}),a("v-sheet",{staticClass:"d-flex",attrs:{tile:"",height:"54"}},["Rok"!==e.type?a("v-btn",{staticClass:"ma-2",attrs:{icon:""}},[a("v-icon",[e._v("mdi-chevron-left")])],1):e._e(),a("v-select",{staticClass:"ma-2",attrs:{items:e.types,dense:"",outlined:"","hide-details":"",label:"Typ"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),"Rok"!==e.type?a("v-btn",{staticClass:"ma-2",attrs:{icon:""}},[a("v-icon",[e._v("mdi-chevron-right")])],1):e._e()],1),a("IncomeChart")],1)},on=[],cn=(a("d81d"),a("ddb0"),a("1fca")),ln={extends:cn["a"],data:function(){return{currentMont:(new Date).getMonth(),labels:[],yearlyLabels:[],monthlyLabels:[],values:[],yearlyValues:[],monthlyValues:[],months:[{name:"Styczeń",days:[],value:0},{name:"Luty",days:[],value:0},{name:"Marzec",days:[],value:0},{name:"Kwiecień",days:[],value:0},{name:"Maj",days:[],value:0},{name:"Czerwiec",days:[],value:0},{name:"Lipiec",days:[],value:0},{name:"Sierpień",days:[],value:0},{name:"Wrzesień",days:[],value:0},{name:"Październik",days:[],value:0},{name:"Listopad",days:[],value:0},{name:"Grudzień",days:[],value:0}]}},methods:{getDaysInMonth:function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},setYearView:function(){this.labels=this.yearlyLabels,this.values=this.yearlyValues,this.loadChart()},setMonthView:function(e){this.labels=this.months[e].days.map((function(e){return e.name})),this.values=this.months[e].days.map((function(e){return e.value})),this.loadChart()},loadChart:function(){this.renderChart({labels:this.labels,datasets:[{backgroundColor:"#D9486E",label:"Przychody ",data:this.values}]},{responsive:!0,maintainAspectRatio:!1})}},computed:Object(u["c"])(["getAllEvents","getStatsType"]),mounted:function(){var e=this,t=new Date,a=0;this.months.forEach((function(n){e.yearlyLabels.push(n.name);for(var r=e.getDaysInMonth(new Date("".concat(t.getFullYear(),"-").concat(a+1,"-1"))),s=1;s<=r;s++)e.months[a].days.push({name:s<10?"0".concat(s):"".concat(s),value:0});a++})),this.getAllEvents.forEach((function(a){if(!a.startDate.toDate().getFullYear()!==t.getFullYear()){var n=a.startDate.toDate().getMonth(),r=a.startDate.toDate().getDate();e.months[n].value+=a.price,e.months[n].days[r-1].value+=a.price}})),this.yearlyValues=this.months.map((function(e){return e.value})),this.labels=this.yearlyLabels,this.values=this.yearlyValues,this.loadChart()},watch:{getStatsType:function(e){switch(e){case"Rok":this.setYearView();break;case"Miesiąc":this.setMonthView((new Date).getMonth());break;default:break}}}},un=ln,dn=Object(f["a"])(un,nn,rn,!1,null,null,null),mn=dn.exports,vn={components:{IncomeChart:mn},data:function(){return{type:"Rok",types:["Rok","Miesiąc"],month:(new Date).getMonth(),monthNames:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"]}},methods:Object(i["a"])({},Object(u["b"])(["setStatsType"])),watch:{type:function(e){this.setStatsType(e)}},computed:{statsString:function(){return"Rok"===this.type?"Statystyki na rok ".concat((new Date).getFullYear()):"Statyski na ".concat(this.monthNames[this.month]," ").concat((new Date).getFullYear())}}},pn=vn,fn=Object(f["a"])(pn,sn,on,!1,null,null,null),bn=fn.exports;h()(fn,{VBtn:_["a"],VContainer:ze["a"],VIcon:T["a"],VSelect:R["a"],VSheet:Re["a"]}),n["a"].use(se["a"]);var hn=[{path:"/",name:"Home",component:Ue,meta:{requiresAuth:!0}},{path:"/calendar",name:"About",component:dt,meta:{requiresAuth:!0}},{path:"/clients",name:"Clients",component:Ht,meta:{requiresAuth:!0}},{path:"/treatments",name:"Treatments",component:ca,meta:{requiresAuth:!0}},{path:"/products",name:"Products",component:xa,meta:{requiresAuth:!0}},{path:"/today",name:"today",component:Va,meta:{requiresAuth:!0}},{path:"/confirms",name:"confirms",component:Da,meta:{requiresAuth:!0}},{path:"/settings",name:"settings",component:an,meta:{requiresAuth:!0}},{path:"/statistics",name:"statistics",component:bn,meta:{requiresAuth:!0}},{path:"/login",name:"login",component:$a,meta:{requiresGuest:!0}},{path:"/register",name:"register",component:qa,meta:{requiresGuest:!0}}],gn=new se["a"]({routes:hn});gn.beforeEach((function(e,t,a){e.matched.some((function(e){return e.meta.requiresAuth}))?ar.currentUser?a():a({path:"/login",query:{redirect:e.fullPath}}):e.matched.some((function(e){return e.meta.requiresGuest}))&&ar.currentUser?a({path:"/",query:{redirect:e.fullPath}}):a()}));var _n=gn,xn={clients:[]},wn={getAllClients:function(e){return e.clients}},kn={fetchClients:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,n=e.rootState,n.login.userData.salon.ref.collection("clients").onSnapshot((function(e){e.docChanges().forEach((function(e){"added"===e.type&&a("clientAdded",Object(i["a"])(Object(i["a"])({},e.doc.data()),{},{id:e.doc.id})),"modified"===e.type&&a("clientUpdated",Object(i["a"])(Object(i["a"])({},e.doc.data()),{},{id:e.doc.id})),"removed"===e.type&&a("clientRemoved",e.doc.id)}))}));case 2:case"end":return t.stop()}}),t)})))()},addClient:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.dispatch,r=e.rootState,a.prev=1,a.next=4,r.login.userData.salon.ref.collection("clients").add(t);case 4:n("showAlert",{text:"Pomyślnie dodano klienta",success:!0}),a.next=11;break;case 7:a.prev=7,a.t0=a["catch"](1),console.error(a.t0.error),n("showAlert",{text:"Nie udało się dodać klienta",success:!1});case 11:return a.abrupt("return");case 12:case"end":return a.stop()}}),a,null,[[1,7]])})))()},removeClient:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.dispatch,r=e.rootState,a.prev=1,a.next=4,r.login.userData.salon.ref.collection("clients").doc(t).delete();case 4:n("showAlert",{text:"Pomyślnie usunięto klienta",success:!0}),a.next=11;break;case 7:a.prev=7,a.t0=a["catch"](1),console.error(a.t0),n("showAlert",{text:"Nie udało się usunąć klienta",success:!1});case 11:return a.abrupt("return");case 12:case"end":return a.stop()}}),a,null,[[1,7]])})))()},updateClient:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.dispatch,r=e.rootState,a.prev=1,a.next=4,r.login.userData.salon.ref.collection("clients").doc(t.id).set(t);case 4:n("showAlert",{text:"Pomyślnie zaktualizowano klienta",success:!0}),a.next=11;break;case 7:a.prev=7,a.t0=a["catch"](1),console.error(a.t0),n("showAlert",{text:"Nie udało się zaktualizować klienta",success:!1});case 11:return a.abrupt("return");case 12:case"end":return a.stop()}}),a,null,[[1,7]])})))()},fetchClientVisits:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r,s,o,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.rootState,r=[],s=[],a.next=4,n.login.userData.salon.ref.collection("clients").doc(t).collection("plannedvisits").get();case 4:return o=a.sent,o.forEach((function(e){r.push(Object(i["a"])(Object(i["a"])({},e.data()),{},{id:e.id}))})),a.next=8,n.login.userData.salon.ref.collection("clients").doc(t).collection("pastvisits").get();case 8:return c=a.sent,c.forEach((function(e){s.push(Object(i["a"])(Object(i["a"])({},e.data()),{},{id:e.id}))})),a.abrupt("return",{plannedvisits:r,pastvisits:s});case 11:case"end":return a.stop()}}),a)})))()}},yn={setClients:function(e,t){return e.clients=t},clientAdded:function(e,t){return e.clients.unshift(t)},clientRemoved:function(e,t){return e.clients=e.clients.filter((function(e){return e.id!==t}))},clientUpdated:function(e,t){return e.clients=e.clients.map((function(e){return e.id===t.id?t:e}))}},Cn={state:xn,getters:wn,actions:kn,mutations:yn},jn={events:[],selectedEvent:null,currentEvent:null},Vn={getAllEvents:function(e){return e.events},getTodayNotConfirmedEvents:function(e){return e.events.filter((function(e){var t=e.startDate.toDate();t.setHours(0,0,0,0);var a=new Date;return a.setHours(0,0,0,0),!e.archived&&!e.confirmed&&a.toISOString()===t.toISOString()})).sort((function(e,t){var a=e.startDate.toDate(),n=t.startDate.toDate();return a-n}))},getTomorrowNotConfirmedEvents:function(e){return e.events.filter((function(e){var t=e.startDate.toDate();t.setHours(0,0,0,0);var a=new Date;return a.setHours(0,0,0,0),a.setDate(a.getDate()+1),!e.archived&&!e.confirmed&&a.toISOString()===t.toISOString()})).sort((function(e,t){var a=e.startDate.toDate(),n=t.startDate.toDate();return a-n}))},getDayAfterNotConfirmedEvents:function(e){return e.events.filter((function(e){var t=e.startDate.toDate();t.setHours(0,0,0,0);var a=new Date;return a.setHours(0,0,0,0),a.setDate(a.getDate()+2),!e.archived&&!e.confirmed&&a.toISOString()===t.toISOString()})).sort((function(e,t){var a=e.startDate.toDate(),n=t.startDate.toDate();return a-n}))},getSelectedEvent:function(e){return e.selectedEvent},getCurrentEvent:function(e){return e.currentEvent}},Tn={fetchEvents:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,n=e.dispatch,r=e.rootState,t.prev=1,r.login.userData.salon.ref.collection("events").onSnapshot((function(e){e.docChanges().forEach((function(e){"added"===e.type&&a("eventAdded",Object(i["a"])(Object(i["a"])({},e.doc.data()),{},{id:e.doc.id})),"modified"===e.type&&a("eventUpdated",Object(i["a"])(Object(i["a"])({},e.doc.data()),{},{id:e.doc.id})),"removed"===e.type&&a("eventRemoved",e.doc.id)}))})),t.abrupt("return");case 6:t.prev=6,t.t0=t["catch"](1),console.error(t.t0),n("showAlert",{text:"Nie udało się pobrać bazy danych wizyt",success:!1});case 10:case"end":return t.stop()}}),t,null,[[1,6]])})))()},addEvent:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.dispatch,r=e.rootState,a.prev=1,s=r.login.userData.salon.ref.collection("events").doc(),t.id=s.id,i={name:t.name,eventRef:r.login.userData.salon.ref.collection("events").doc(t.id),confirmed:!1,start:t.start,startDate:t.startDate,clientName:t.clientName,doctor:t.doctor,products:t.products},o=tr.batch(),o.set(s,t),o.set(t.treatmentRef.collection("plannedvisits").doc(t.id),i),o.update(t.treatmentRef,{plannedcount:rr}),o.set(t.clientRef.collection("plannedvisits").doc(t.id),i),o.update(t.clientRef,{plannedcount:rr}),o.update(t.doctor.ref,{plannedcount:rr}),t.products.forEach((function(e){o.update(e.ref,{plannedAmount:ir(-1*e.amount)})})),a.next=15,o.commit();case 15:n("showAlert",{text:"Pomyślnie dodano wizytę",success:!0}),a.next=22;break;case 18:a.prev=18,a.t0=a["catch"](1),console.log("Batch failure:",a.t0),n("showAlert",{text:"Nie udało się dodać wizyty",success:!1});case 22:return a.abrupt("return");case 23:case"end":return a.stop()}}),a,null,[[1,18]])})))()},removeEvent:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.dispatch,r=e.rootState,a.prev=1,s=tr.batch(),s.delete(t.clientRef.collection("plannedvisits").doc(t.id)),s.update(t.clientRef,{plannedcount:sr}),s.delete(t.treatmentRef.collection("plannedvisits").doc(t.id)),s.update(t.treatmentRef,{plannedcount:sr}),s.update(t.doctor.ref,{plannedcount:sr}),s.delete(r.login.userData.salon.ref.collection("events").doc(t.id)),t.products.forEach((function(e){s.update(e.ref,{plannedAmount:ir(e.amount)})})),a.next=12,s.commit();case 12:n("showAlert",{text:"Pomyślnie usunięto wizytę",success:!0}),a.next=19;break;case 15:a.prev=15,a.t0=a["catch"](1),console.error(a.t0),n("showAlert",{text:"Nie udało się usunąć wizyty",success:!1});case 19:return a.abrupt("return");case 20:case"end":return a.stop()}}),a,null,[[1,15]])})))()},editEvent:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.dispatch,r=e.rootState,a.prev=1,s=tr.batch(),s.update(t.treatmentRef.collection("plannedvisits").doc(t.id),{start:t.start,end:t.end}),s.update(t.clientRef.collection("plannedvisits").doc(t.id),{start:t.start,end:t.end}),s.update(r.login.userData.salon.ref.collection("events").doc(t.id),{start:t.start,end:t.end}),a.next=8,s.commit();case 8:n("showAlert",{text:"Pomyślnie zaktualizowano wizytę",success:!0}),a.next=15;break;case 11:a.prev=11,a.t0=a["catch"](1),console.error(a.t0),n("showAlert",{text:"Nie udało się zaktualizować wizyty",success:!1});case 15:return a.abrupt("return");case 16:case"end":return a.stop()}}),a,null,[[1,11]])})))()},confirmEvent:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.dispatch,r=e.rootState,a.prev=1,s=tr.batch(),s.update(r.login.userData.salon.ref.collection("events").doc(t.id),{confirmed:!0}),s.update(t.treatmentRef.collection("plannedvisits").doc(t.id),{confirmed:!0}),s.update(t.clientRef.collection("plannedvisits").doc(t.id),{confirmed:!0}),a.next=8,s.commit();case 8:n("showAlert",{text:"Pomyślnie potwierdzono wizytę",success:!0}),a.next=15;break;case 11:a.prev=11,a.t0=a["catch"](1),console.error(a.t0),n("showAlert",{text:"Nie udało się potwierdzić wizyty",success:!1});case 15:return a.abrupt("return");case 16:case"end":return a.stop()}}),a,null,[[1,11]])})))()},archiveEvent:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o,c,l,u,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.dispatch,r=e.rootState,a.prev=1,s=tr.batch(),i=r.login.userData.salon.ref.id,o=[],c=0;case 6:if(!(c<t.images.length)){a.next=18;break}return l=t.images[c],u=nr.child("".concat(i,"/").concat(t.id,"/").concat(l.name)),a.next=11,u.put(l);case 11:return a.next=13,u.getDownloadURL();case 13:d=a.sent,o.push(d);case 15:c++,a.next=6;break;case 18:return t.imageUrls=o,delete t.images,s.update(r.login.userData.salon.ref.collection("events").doc(t.id),{archived:!0,additionalTreatments:t.additionalTreatments.map((function(e){return e.name})),price:t.price}),s.delete(t.treatmentRef.collection("plannedvisits").doc(t.id)),s.set(t.treatmentRef.collection("pastvisits").doc(t.id),{name:t.name,eventRef:r.login.userData.salon.ref.collection("events").doc(t.id),confirmed:t.confirmed,start:t.start,startDate:t.startDate,clientName:t.clientName,doctor:t.doctor,imageUrls:o,rate:t.rate,price:t.price,additionalTreatments:t.additionalTreatments.map((function(e){return e.name}))}),s.update(t.treatmentRef,{plannedcount:sr,visits:rr}),s.delete(t.clientRef.collection("plannedvisits").doc(t.id)),s.set(t.clientRef.collection("pastvisits").doc(t.id),{name:t.name,eventRef:r.login.userData.salon.ref.collection("events").doc(t.id),confirmed:t.confirmed,start:t.start,startDate:t.startDate,clientName:t.clientName,doctor:t.doctor,imageUrls:o,rate:t.rate,price:t.price,additionalTreatments:t.additionalTreatments.map((function(e){return e.name}))}),s.update(t.clientRef,{plannedcount:sr,visits:rr}),s.update(r.login.userData.salon.ref,{visits:rr}),s.update(t.doctor.ref,{visits:rr}),t.products.forEach((function(e){s.update(e.ref,{amount:ir(-1*e.amount),used:rr})})),t.additionalTreatments.forEach((function(e){s.update(r.login.userData.salon.ref.collection("treatments").doc(e.id),{visits:rr}),e.products.forEach((function(e){s.update(e.ref,{amount:ir(-1*e.amount),plannedAmount:ir(-1*e.amount),used:rr})}))})),a.next=33,s.commit();case 33:n("showAlert",{text:"Zakończono zabieg",success:!0}),n("fetchSalon"),a.next=41;break;case 37:a.prev=37,a.t0=a["catch"](1),console.error(a.t0),n("showAlert",{text:"Nie udało się zakończyć zabiegu",success:!1});case 41:return a.abrupt("return");case 42:case"end":return a.stop()}}),a,null,[[1,37]])})))()},selectEvent:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,n("setSelectedEvent",t);case 2:case"end":return a.stop()}}),a)})))()}},zn={setSelectedEvent:function(e,t){return e.selectedEvent=t},setCurrentEvent:function(e,t){return e.currentEvent=t},eventAdded:function(e,t){return e.events.push(t)},eventRemoved:function(e,t){return e.events=e.events.filter((function(e){return e.id!==t}))},eventUpdated:function(e,t){return e.events=e.events.map((function(e){return e.id===t.id?t:e}))}},Sn={state:jn,getters:Vn,actions:Tn,mutations:zn},On={treatments:[]},En={getAllTreatments:function(e){return e.treatments}},Dn={fetchTreatments:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,n=e.rootState,n.login.userData.salon.ref.collection("treatments").onSnapshot((function(e){e.docChanges().forEach((function(e){"added"===e.type&&a("treatmentAdded",Object(i["a"])(Object(i["a"])({},e.doc.data()),{},{id:e.doc.id})),"modified"===e.type&&a("treatmentUpdated",Object(i["a"])(Object(i["a"])({},e.doc.data()),{},{id:e.doc.id})),"removed"===e.type&&a("treatmentRemoved",e.doc.id)}))}));case 2:case"end":return t.stop()}}),t)})))()},addTreatment:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.dispatch,r=e.rootState,a.prev=1,a.next=4,r.login.userData.salon.ref.collection("treatments").add(t);case 4:n("showAlert",{text:"Pomyślnie dodano zabieg",success:!0}),a.next=11;break;case 7:a.prev=7,a.t0=a["catch"](1),console.error(a.t0.error),n("showAlert",{text:"Nie udało się dodać zabiegu",success:!1});case 11:return a.abrupt("return");case 12:case"end":return a.stop()}}),a,null,[[1,7]])})))()},removeTreatment:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.dispatch,r=e.rootState,a.prev=1,a.next=4,r.login.userData.salon.ref.collection("treatments").doc(t).delete();case 4:n("showAlert",{text:"Pomyślnie usunięto zabieg",success:!0}),a.next=11;break;case 7:a.prev=7,a.t0=a["catch"](1),console.error(a.t0.error),n("showAlert",{text:"Nie udało się dodać zabiegu",success:!1});case 11:return a.abrupt("return");case 12:case"end":return a.stop()}}),a,null,[[1,7]])})))()},updateTreatment:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.dispatch,r=e.rootState,a.prev=1,s=r.login.userData.salon.ref.collection("treatments").doc(t.id),delete t.id,a.next=6,s.set(t);case 6:n("showAlert",{text:"Pomyślnie zaktualizowano zabieg",success:!0}),a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](1),console.error(a.t0.error),n("showAlert",{text:"Nie udało się zaktualizować zabiegu",success:!1});case 13:return a.abrupt("return");case 14:case"end":return a.stop()}}),a,null,[[1,9]])})))()},fetchTreatmentVisits:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r,s,o,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.rootState,r=[],s=[],a.next=4,n.login.userData.salon.ref.collection("treatments").doc(t).collection("plannedvisits").get();case 4:return o=a.sent,o.forEach((function(e){r.push(Object(i["a"])(Object(i["a"])({},e.data()),{},{id:e.id}))})),a.next=8,n.login.userData.salon.ref.collection("treatments").doc(t).collection("pastvisits").get();case 8:return c=a.sent,c.forEach((function(e){s.push(Object(i["a"])(Object(i["a"])({},e.data()),{},{id:e.id}))})),a.abrupt("return",{plannedvisits:r,pastvisits:s});case 11:case"end":return a.stop()}}),a)})))()}},Rn={setTreatments:function(e,t){return e.treatments=t},treatmentAdded:function(e,t){return e.treatments.unshift(t)},treatmentRemoved:function(e,t){return e.treatments=e.treatments.filter((function(e){return e.id!==t}))},treatmentUpdated:function(e,t){return e.treatments=e.treatments.map((function(e){return e.id===t.id?t:e}))}},In={state:On,getters:En,actions:Dn,mutations:Rn},An={products:[]},Pn={getAllProducts:function(e){return e.products},getLowProducts:function(e){return e.products.filter((function(e){return e.plannedAmount<=2*e.newAmount}))}},Nn={fetchProducts:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.commit,n=e.rootState,n.login.userData.salon.ref.collection("products").onSnapshot((function(e){e.docChanges().forEach((function(e){"added"===e.type&&a("productAdded",Object(i["a"])(Object(i["a"])({},e.doc.data()),{},{id:e.doc.id})),"modified"===e.type&&a("productUpdated",Object(i["a"])(Object(i["a"])({},e.doc.data()),{},{id:e.doc.id})),"removed"===e.type&&a("productRemoved",e.doc.id)}))}));case 2:case"end":return t.stop()}}),t)})))()},addProduct:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.dispatch,r=e.rootState,a.prev=1,a.next=4,r.login.userData.salon.ref.collection("products").add(t);case 4:n("showAlert",{text:"Pomyślnie dodano produktu",success:!0}),a.next=11;break;case 7:a.prev=7,a.t0=a["catch"](1),console.error(a.t0.error),n("showAlert",{text:"Nie udało się dodać produktu",success:!1});case 11:return a.abrupt("return");case 12:case"end":return a.stop()}}),a,null,[[1,7]])})))()},removeProduct:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.dispatch,r=e.rootState,a.prev=1,a.next=4,r.login.userData.salon.ref.collection("products").doc(t).delete();case 4:n("showAlert",{text:"Pomyślnie usunięto produkt",success:!0}),a.next=11;break;case 7:a.prev=7,a.t0=a["catch"](1),console.error(a.t0),n("showAlert",{text:"Nie udało się usunąć produkt",success:!1});case 11:return a.abrupt("return");case 12:case"end":return a.stop()}}),a,null,[[1,7]])})))()},updateProduct:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.dispatch,r=e.rootState,a.prev=1,a.next=4,r.login.userData.salon.ref.collection("products").doc(t.id).set(t);case 4:n("showAlert",{text:"Pomyślnie zaktualizowano produkt",success:!0}),a.next=11;break;case 7:a.prev=7,a.t0=a["catch"](1),console.error(a.t0),n("showAlert",{text:"Nie udało się zaktualizować produktu",success:!1});case 11:return a.abrupt("return");case 12:case"end":return a.stop()}}),a,null,[[1,7]])})))()}},$n={productAdded:function(e,t){return e.products.unshift(t)},productRemoved:function(e,t){return e.products=e.products.filter((function(e){return e.id!==t}))},productUpdated:function(e,t){return e.products=e.products.map((function(e){return e.id===t.id?t:e}))}},Ln={state:An,getters:Pn,actions:Nn,mutations:$n},Mn={isLoggedIn:!1,user:null,userData:{},alert:{show:!1,text:"",success:!0}},Un={getIsLoggedIn:function(e){return e.isLoggedIn},getUser:function(e){return e.user},getUserData:function(e){return e.userData},getAlert:function(e){return e.alert}},Hn={registerUser:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.commit,a.prev=1,a.next=4,ar.createUserWithEmailAndPassword(t.email,t.password);case 4:if(r=a.sent,!r){a.next=12;break}return n("setIsLoggedIn",!0),n("setUser",r.user),a.next=10,tr.collection("users").doc(r.user.uid).set({email:t.email,name:t.name,surname:t.surname,phone:t.phone,doctor:!1,registered:(new Date).toISOString()});case 10:a.next=13;break;case 12:return a.abrupt("return",!1);case 13:a.next=19;break;case 15:return a.prev=15,a.t0=a["catch"](1),console.log(a.t0.code),a.abrupt("return",!1);case 19:return a.abrupt("return",!0);case 20:case"end":return a.stop()}}),a,null,[[1,15]])})))()},logIn:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.commit,a.prev=1,a.next=4,ar.signInWithEmailAndPassword(t.email,t.password);case 4:if(r=a.sent,s=r.user,!s){a.next=17;break}return n("setIsLoggedIn",!0),n("setUser",s),a.next=11,tr.collection("users").doc(s.uid).get();case 11:i=a.sent,o=i.data(),o.id=i.id,n("setUserData",o),a.next=18;break;case 17:return a.abrupt("return",!1);case 18:a.next=24;break;case 20:return a.prev=20,a.t0=a["catch"](1),console.log(a.t0.code),a.abrupt("return",!1);case 24:return a.abrupt("return",!0);case 25:case"end":return a.stop()}}),a,null,[[1,20]])})))()},logOut:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,ar.signOut();case 3:return a("setIsLoggedIn",!1),a("setUser",null),console.log("logged out"),t.abrupt("return");case 7:case"end":return t.stop()}}),t)})))()},joinSalon:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.commit,r=e.dispatch,a.next=3,tr.collection("salons").where("key","==",t).get();case 3:if(s=a.sent,!s.empty){a.next=8;break}return console.log("Cannot find salon"),r("showAlert",{text:"Salon o podanym kluczu nie istnieje!",success:!1}),a.abrupt("return",!1);case 8:return s.forEach(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.data(),a.id=t.id,e.next=4,tr.collection("users").doc(Mn.user.uid).update({salon:{name:a.name,ref:tr.collection("salons").doc(t.id)}});case 4:return e.next=6,tr.collection("users").doc(Mn.user.uid).get();case 6:return s=e.sent,i=s.data(),i.id=s.id,n("setUserData",i),e.next=12,tr.runTransaction(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var n,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=tr.collection("salons").doc(a.id),e.next=3,t.get(n);case 3:r=e.sent,s=r.data().users,s.push({name:Mn.userData.name,surname:Mn.userData.surname,fullname:"".concat(i.name," ").concat(i.surname),id:Mn.user.uid,doctor:!1,visits:0,ref:tr.collection("users").doc(Mn.user.uid)}),t.update(n,{users:s});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 12:r("fetchSalon");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.abrupt("return",!0);case 10:case"end":return a.stop()}}),a)})))()},showAlert:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e.commit,t.show=!0,n("setAlert",t),setTimeout((function(){return n("hideAlert")}),3e3);case 4:case"end":return a.stop()}}),a)})))()},authStateChanged:function(e){var t=e.commit,a=e.dispatch;ar.onAuthStateChanged(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(n){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=14;break}return t("setIsLoggedIn",!0),t("setUser",n),e.next=5,tr.collection("users").doc(n.uid).get();case 5:r=e.sent,s=r.data(),void 0!==s&&(s.id=r.id,t("setUserData",s),a("fetchSalon")),a("fetchEvents"),a("fetchClients"),a("fetchTreatments"),a("fetchProducts"),e.next=17;break;case 14:console.log("User signed out"),t("setIsLoggedIn",!1),t("setUser",null);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},Fn={setIsLoggedIn:function(e,t){return e.isLoggedIn=t},setUser:function(e,t){return e.user=t},setUserData:function(e,t){return e.userData=t},setAlert:function(e,t){return e.alert=t},hideAlert:function(e){return e.alert.show=!1}},qn={state:Mn,getters:Un,actions:Hn,mutations:Fn},Bn={salon:{name:"",leader:{name:"",surname:""}},admin:!1,statsType:"Rok"},Zn={getSalon:function(e){return e.salon},isAdmin:function(e){return e.admin},getStatsType:function(e){return e.statsType}},Wn={fetchSalon:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,n=e.rootState,t.next=3,n.login.userData.salon.ref.get();case 3:r=t.sent,s=r.data(),s.id=r.id,Bn.isAdmin||s.leader.ref.id===n.login.user.uid&&a("setAdmin",!0),a("setSalon",s);case 8:case"end":return t.stop()}}),t)})))()},setDoctor:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.dispatch,r=e.rootState,a.prev=1,a.next=4,t.ref.update({doctor:t.doctor});case 4:return s=r.salon.salon.users,s.forEach((function(e){e.ref.id===t.ref.id&&(e.doctor=t.doctor)})),a.next=8,r.login.userData.salon.ref.update({users:s});case 8:n("fetchSalon"),a.next=15;break;case 11:a.prev=11,a.t0=a["catch"](1),console.error(a.t0),n("showAlert",{text:"Nie udało się zaktualizować pracownika",success:!1});case 15:case"end":return a.stop()}}),a,null,[[1,11]])})))()},setSalonName:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.commit,r=e.dispatch,a.prev=1,a.next=4,tr.collection("salons").doc(Bn.salon.id).update({name:t});case 4:s=Bn.salon,s.name=t,n("setSalon",s),r("showAlert",{text:"Pomyślnie zaktualizowano nazwę salonu",success:!0}),a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](1),console.error(a.t0),r("showAlert",{text:"Nie udało się zaktualizować nazwy salonu",success:!1});case 14:case"end":return a.stop()}}),a,null,[[1,10]])})))()},setStatsType:function(e,t){var a=e.commit;a("statsTypeSet",t)}},Yn={setSalon:function(e,t){return e.salon=t},setAdmin:function(e,t){return e.admin=t},statsTypeSet:function(e,t){return e.statsType=t}},Kn={state:Bn,getters:Zn,actions:Wn,mutations:Yn};n["a"].use(u["a"]);var Gn=new u["a"].Store({state:{},mutations:{},actions:{},modules:{clients:Cn,events:Sn,treatments:In,products:Ln,login:qn,salon:Kn}}),Jn=a("f309");n["a"].use(Jn["a"]);var Qn=new Jn["a"]({theme:{themes:{light:{primary:"#D984A3",secondary:"#D9486E"}}}}),Xn=a("59ca"),er=a.n(Xn);a("e71f"),a("ea7b"),a("588e");n["a"].config.productionTip=!1,er.a.initializeApp({apiKey:"AIzaSyDZuwNnftQPQX4mcf-UwLIOjxE0HC88KYk",authDomain:"beutymng.firebaseapp.com",databaseURL:"https://beutymng.firebaseio.com",projectId:"beutymng",storageBucket:"beutymng.appspot.com",messagingSenderId:"728645110661",appId:"1:728645110661:web:226b79631083a9148a52ec",measurementId:"G-J7R1N5H844"});var tr=er.a.firestore(),ar=er.a.auth(),nr=er.a.storage().ref(),rr=er.a.firestore.FieldValue.increment(1),sr=er.a.firestore.FieldValue.increment(-1),ir=function(e){return er.a.firestore.FieldValue.increment(e)},or=null;new n["a"]({router:_n,store:Gn,vuetify:Qn,render:function(e){return e(re)}}).$mount("#app")},"585c":function(e,t,a){"use strict";var n=a("3fef"),r=a.n(n);r.a},6442:function(e,t,a){},"8a49":function(e,t,a){"use strict";var n=a("2492"),r=a.n(n);r.a},e611:function(e,t,a){"use strict";var n=a("0560"),r=a.n(n);r.a}});
//# sourceMappingURL=app.4a95d067.js.map